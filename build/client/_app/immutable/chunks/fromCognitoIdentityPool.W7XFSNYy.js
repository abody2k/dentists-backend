import{a as Ve}from"./_commonjsHelpers.BosuxZz1.js";const Xa=e=>{let t=e.httpHandler;return{setHttpHandler(r){t=r},httpHandler(){return t},updateHttpClientConfig(r,n){t.updateHttpClientConfig(r,n)},httpHandlerConfigs(){return t.httpHandlerConfigs()}}},Za=e=>({httpHandler:e.httpHandler()});var hi;(function(e){e.HEADER="header",e.QUERY="query"})(hi||(hi={}));var pi;(function(e){e.HEADER="header",e.QUERY="query"})(pi||(pi={}));var zt;(function(e){e.HTTP="http",e.HTTPS="https"})(zt||(zt={}));var wr;(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(wr||(wr={}));var yi;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(yi||(yi={}));const ts="__smithy_context";var gi;(function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"})(gi||(gi={}));var mi;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(mi||(mi={}));class me{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static isInstance(t){if(!t)return!1;const r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){const t=new me({...this,headers:{...this.headers}});return t.query&&(t.query=vl(t.query)),t}}function vl(e){return Object.keys(e).reduce((t,r)=>{const n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})}class _r{constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;const r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}}function xl(e){return t=>async r=>{const{request:n}=r;return me.isInstance(n)&&n.body&&e.runtime==="node"&&(n.headers={...n.headers,Expect:"100-continue"}),t({...r,request:n})}}const Al={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},Rl=e=>({applyToStack:t=>{t.add(xl(e),Al)}});const Cl=e=>t=>async r=>{if(!me.isInstance(r.request))return t(r);const{request:n}=r,{handlerProtocol:s=""}=e.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let i=n.hostname;n.port!=null&&(i+=`:${n.port}`),n.headers.host=i}return t(r)},Pl={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},Ya=e=>({applyToStack:t=>{t.add(Cl(e),Pl)}}),Tl=()=>(e,t)=>async r=>{var n,s;try{const i=await e(r),{clientName:o,commandName:a,logger:u,dynamoDbDocumentClientOptions:c={}}=t,{overrideInputFilterSensitiveLog:l,overrideOutputFilterSensitiveLog:h}=c,f=l??t.inputFilterSensitiveLog,y=h??t.outputFilterSensitiveLog,{$metadata:g,...E}=i.output;return(n=u==null?void 0:u.info)==null||n.call(u,{clientName:o,commandName:a,input:f(r.input),output:y(E),metadata:g}),i}catch(i){const{clientName:o,commandName:a,logger:u,dynamoDbDocumentClientOptions:c={}}=t,{overrideInputFilterSensitiveLog:l}=c,h=l??t.inputFilterSensitiveLog;throw(s=u==null?void 0:u.error)==null||s.call(u,{clientName:o,commandName:a,input:h(r.input),error:i,metadata:i.$metadata}),i}},Ol={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Qa=e=>({applyToStack:t=>{t.add(Tl(),Ol)}});var bi={};const wi="X-Amzn-Trace-Id",Il="AWS_LAMBDA_FUNCTION_NAME",Nl="_X_AMZN_TRACE_ID",kl=e=>t=>async r=>{const{request:n}=r;if(!me.isInstance(n)||e.runtime!=="node"||n.headers.hasOwnProperty(wi))return t(r);const s=bi[Il],i=bi[Nl],o=a=>typeof a=="string"&&a.length>0;return o(s)&&o(i)&&(n.headers[wi]=i),t({...r,request:n})},$l={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},Ja=e=>({applyToStack:t=>{t.add(kl(e),$l)}});class Bs{trace(){}debug(){}info(){}warn(){}error(){}}const We=(e,t)=>{const r=[];if(e&&r.push(e),t)for(const n of t)r.push(n);return r},Me=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,Sr=()=>{let e=[],t=[],r=!1;const n=new Set,s=h=>h.sort((f,y)=>_i[y.step]-_i[f.step]||Si[y.priority||"normal"]-Si[f.priority||"normal"]),i=h=>{let f=!1;const y=g=>{const E=We(g.name,g.aliases);if(E.includes(h)){f=!0;for(const C of E)n.delete(C);return!1}return!0};return e=e.filter(y),t=t.filter(y),f},o=h=>{let f=!1;const y=g=>{if(g.middleware===h){f=!0;for(const E of We(g.name,g.aliases))n.delete(E);return!1}return!0};return e=e.filter(y),t=t.filter(y),f},a=h=>{var f;return e.forEach(y=>{h.add(y.middleware,{...y})}),t.forEach(y=>{h.addRelativeTo(y.middleware,{...y})}),(f=h.identifyOnResolve)==null||f.call(h,l.identifyOnResolve()),h},u=h=>{const f=[];return h.before.forEach(y=>{y.before.length===0&&y.after.length===0?f.push(y):f.push(...u(y))}),f.push(h),h.after.reverse().forEach(y=>{y.before.length===0&&y.after.length===0?f.push(y):f.push(...u(y))}),f},c=(h=!1)=>{const f=[],y=[],g={};return e.forEach(C=>{const N={...C,before:[],after:[]};for(const D of We(N.name,N.aliases))g[D]=N;f.push(N)}),t.forEach(C=>{const N={...C,before:[],after:[]};for(const D of We(N.name,N.aliases))g[D]=N;y.push(N)}),y.forEach(C=>{if(C.toMiddleware){const N=g[C.toMiddleware];if(N===void 0){if(h)return;throw new Error(`${C.toMiddleware} is not found when adding ${Me(C.name,C.aliases)} middleware ${C.relation} ${C.toMiddleware}`)}C.relation==="after"&&N.after.push(C),C.relation==="before"&&N.before.push(C)}}),s(f).map(u).reduce((C,N)=>(C.push(...N),C),[])},l={add:(h,f={})=>{const{name:y,override:g,aliases:E}=f,C={step:"initialize",priority:"normal",middleware:h,...f},N=We(y,E);if(N.length>0){if(N.some(D=>n.has(D))){if(!g)throw new Error(`Duplicate middleware name '${Me(y,E)}'`);for(const D of N){const X=e.findIndex(yt=>{var gt;return yt.name===D||((gt=yt.aliases)==null?void 0:gt.some(Lr=>Lr===D))});if(X===-1)continue;const fe=e[X];if(fe.step!==C.step||C.priority!==fe.priority)throw new Error(`"${Me(fe.name,fe.aliases)}" middleware with ${fe.priority} priority in ${fe.step} step cannot be overridden by "${Me(y,E)}" middleware with ${C.priority} priority in ${C.step} step.`);e.splice(X,1)}}for(const D of N)n.add(D)}e.push(C)},addRelativeTo:(h,f)=>{const{name:y,override:g,aliases:E}=f,C={middleware:h,...f},N=We(y,E);if(N.length>0){if(N.some(D=>n.has(D))){if(!g)throw new Error(`Duplicate middleware name '${Me(y,E)}'`);for(const D of N){const X=t.findIndex(yt=>{var gt;return yt.name===D||((gt=yt.aliases)==null?void 0:gt.some(Lr=>Lr===D))});if(X===-1)continue;const fe=t[X];if(fe.toMiddleware!==C.toMiddleware||fe.relation!==C.relation)throw new Error(`"${Me(fe.name,fe.aliases)}" middleware ${fe.relation} "${fe.toMiddleware}" middleware cannot be overridden by "${Me(y,E)}" middleware ${C.relation} "${C.toMiddleware}" middleware.`);t.splice(X,1)}}for(const D of N)n.add(D)}t.push(C)},clone:()=>a(Sr()),use:h=>{h.applyToStack(l)},remove:h=>typeof h=="string"?i(h):o(h),removeByTag:h=>{let f=!1;const y=g=>{const{tags:E,name:C,aliases:N}=g;if(E&&E.includes(h)){const D=We(C,N);for(const X of D)n.delete(X);return f=!0,!1}return!0};return e=e.filter(y),t=t.filter(y),f},concat:h=>{var y;const f=a(Sr());return f.use(h),f.identifyOnResolve(r||f.identifyOnResolve()||(((y=h.identifyOnResolve)==null?void 0:y.call(h))??!1)),f},applyToStack:a,identify:()=>c(!0).map(h=>{const f=h.step??h.relation+" "+h.toMiddleware;return Me(h.name,h.aliases)+" - "+f}),identifyOnResolve(h){return typeof h=="boolean"&&(r=h),r},resolve:(h,f)=>{for(const y of c().map(g=>g.middleware).reverse())h=y(h,f);return r&&console.log(l.identify()),h}};return l},_i={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Si={high:3,normal:2,low:1};class ec{constructor(t){this.middlewareStack=Sr(),this.config=t}send(t,r,n){const s=typeof r!="function"?r:void 0,i=typeof r=="function"?r:n,o=t.resolveMiddleware(this.middlewareStack,this.config,s);if(i)o(t).then(a=>i(null,a.output),a=>i(a)).catch(()=>{});else return o(t).then(a=>a.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}}const He={},at=new Array(64);for(let e=0,t=65,r=90;e+t<=r;e++){const n=String.fromCharCode(e+t);He[n]=e,at[e]=n}for(let e=0,t=97,r=122;e+t<=r;e++){const n=String.fromCharCode(e+t),s=e+26;He[n]=s,at[s]=n}for(let e=0;e<10;e++){He[e.toString(10)]=e+52;const t=e.toString(10),r=e+52;He[t]=r,at[r]=t}He["+"]=62;at[62]="+";He["/"]=63;at[63]="/";const st=6,Ut=8,Bl=63,Cr=e=>{let t=e.length/4*3;e.slice(-2)==="=="?t-=2:e.slice(-1)==="="&&t--;const r=new ArrayBuffer(t),n=new DataView(r);for(let s=0;s<e.length;s+=4){let i=0,o=0;for(let c=s,l=s+3;c<=l;c++)if(e[c]!=="="){if(!(e[c]in He))throw new TypeError(`Invalid character ${e[c]} in base64 string.`);i|=He[e[c]]<<(l-c)*st,o+=st}else i>>=st;const a=s/4*3;i>>=o%Ut;const u=Math.floor(o/Ut);for(let c=0;c<u;c++){const l=(u-c-1)*Ut;n.setUint8(a+c,(i&255<<l)>>l)}}return new Uint8Array(r)};function Pr(e){let t="";for(let r=0;r<e.length;r+=3){let n=0,s=0;for(let o=r,a=Math.min(r+3,e.length);o<a;o++)n|=e[o]<<(a-o-1)*Ut,s+=Ut;const i=Math.ceil(s/st);n<<=i*st-s;for(let o=1;o<=i;o++){const a=(i-o)*st;t+=at[(n&Bl<<a)>>a]}t+="==".slice(0,4-i)}return t}const ct=e=>new TextEncoder().encode(e),Lt=e=>typeof e=="string"?ct(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),er=e=>new TextDecoder("utf-8").decode(e);function Ml(e,t="utf-8"){return t==="base64"?Pr(e):er(e)}function Fl(e,t){return t==="base64"?Qe.mutate(Cr(e)):Qe.mutate(ct(e))}class Qe extends Uint8Array{static fromString(t,r="utf-8"){switch(typeof t){case"string":return Fl(t,r);default:throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}}static mutate(t){return Object.setPrototypeOf(t,Qe.prototype),t}transformToString(t="utf-8"){return Ml(this,t)}}const Dl=(e,t)=>{const{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:s,checksumLocationName:i,streamHasher:o}=t,a=r!==void 0&&n!==void 0&&s!==void 0&&i!==void 0&&o!==void 0,u=a?o(s,e):void 0,c=e.getReader();return new ReadableStream({async pull(l){const{value:h,done:f}=await c.read();if(f){if(l.enqueue(`0\r
`),a){const y=r(await u);l.enqueue(`${i}:${y}\r
`),l.enqueue(`\r
`)}l.close()}else l.enqueue(`${(n(h)||0).toString(16)}\r
${h}\r
`)}})},Ze=e=>encodeURIComponent(e).replace(/[!'()*]/g,Ul),Ul=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`;function Ll(e){const t=[];for(let r of Object.keys(e).sort()){const n=e[r];if(r=Ze(r),Array.isArray(n))for(let s=0,i=n.length;s<i;s++)t.push(`${r}=${Ze(n[s])}`);else{let s=r;(n||typeof n=="string")&&(s+=`=${Ze(n)}`),t.push(s)}}return t.join("&")}function jl(e=0){return new Promise((t,r)=>{e&&setTimeout(()=>{const n=new Error(`Request did not complete within ${e} ms`);n.name="TimeoutError",r(n)},e)})}const Hl={supported:typeof Request<"u"&&"keepalive"in new Request("https://[::1]")};class Tr{static create(t){return typeof(t==null?void 0:t.handle)=="function"?t:new Tr(t)}constructor(t){typeof t=="function"?this.configProvider=t().then(r=>r||{}):(this.config=t??{},this.configProvider=Promise.resolve(this.config))}destroy(){}async handle(t,{abortSignal:r}={}){this.config||(this.config=await this.configProvider);const n=this.config.requestTimeout,s=this.config.keepAlive===!0;if(r!=null&&r.aborted){const E=new Error("Request aborted");return E.name="AbortError",Promise.reject(E)}let i=t.path;const o=Ll(t.query||{});o&&(i+=`?${o}`),t.fragment&&(i+=`#${t.fragment}`);let a="";if(t.username!=null||t.password!=null){const E=t.username??"",C=t.password??"";a=`${E}:${C}@`}const{port:u,method:c}=t,l=`${t.protocol}//${a}${t.hostname}${u?`:${u}`:""}${i}`,f={body:c==="GET"||c==="HEAD"?void 0:t.body,headers:new Headers(t.headers),method:c};typeof AbortController<"u"&&(f.signal=r),Hl.supported&&(f.keepalive=s);const y=new Request(l,f),g=[fetch(y).then(E=>{const C=E.headers,N={};for(const X of C.entries())N[X[0]]=X[1];return E.body!=null?{response:new _r({headers:N,reason:E.statusText,statusCode:E.status,body:E.body})}:E.blob().then(X=>({response:new _r({headers:N,reason:E.statusText,statusCode:E.status,body:X})}))}),jl(n)];return r&&g.push(new Promise((E,C)=>{r.onabort=()=>{const N=new Error("Request aborted");N.name="AbortError",C(N)}})),Promise.race(g)}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[t]=r,n))}httpHandlerConfigs(){return this.config??{}}}const Ms=e=>typeof Blob=="function"&&e instanceof Blob?zl(e):ql(e);async function zl(e){const t=await Vl(e),r=Cr(t);return new Uint8Array(r)}async function ql(e){let t=new Uint8Array(0);const r=e.getReader();let n=!1;for(;!n;){const{done:s,value:i}=await r.read();if(i){const o=t;t=new Uint8Array(o.length+i.length),t.set(o),t.set(i,o.length)}n=s}return t}function Vl(e){return new Promise((t,r)=>{const n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return r(new Error("Reader aborted too early"));const s=n.result??"",i=s.indexOf(","),o=i>-1?i+1:s.length;t(s.substring(o))},n.onabort=()=>r(new Error("Read aborted")),n.onerror=()=>r(n.error),n.readAsDataURL(e)})}const tc={},rs={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),tc[e]=t,rs[t]=e}function Gl(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){const n=e.slice(r,r+2).toLowerCase();if(n in rs)t[r/2]=rs[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return t}function pe(e){let t="";for(let r=0;r<e.byteLength;r++)t+=tc[e[r]];return t}const Ei="The stream has already been transformed.",Wl=e=>{var s,i;if(!vi(e)&&!xi(e)){const o=((i=(s=e==null?void 0:e.__proto__)==null?void 0:s.constructor)==null?void 0:i.name)||e;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${o}`)}let t=!1;const r=async()=>{if(t)throw new Error(Ei);return t=!0,await Ms(e)},n=o=>{if(typeof o.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return o.stream()};return Object.assign(e,{transformToByteArray:r,transformToString:async o=>{const a=await r();if(o==="base64")return Pr(a);if(o==="hex")return pe(a);if(o===void 0||o==="utf8"||o==="utf-8")return er(a);if(typeof TextDecoder=="function")return new TextDecoder(o).decode(a);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(t)throw new Error(Ei);if(t=!0,vi(e))return n(e);if(xi(e))return e;throw new Error(`Cannot transform payload to web stream, got ${e}`)}})},vi=e=>typeof Blob=="function"&&e instanceof Blob,xi=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream,rc=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return Qe.mutate(e);if(!e)return Qe.mutate(new Uint8Array);const r=t.streamCollector(e);return Qe.mutate(await r)};class tr{constructor(){this.middlewareStack=Sr()}static classBuilder(){return new Kl}resolveMiddlewareWithContext(t,r,n,{middlewareFn:s,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:u,smithyContext:c,additionalContext:l,CommandCtor:h}){for(const C of s.bind(this)(h,t,r,n))this.middlewareStack.use(C);const f=t.concat(this.middlewareStack),{logger:y}=r,g={logger:y,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:u,[ts]:{...c},...l},{requestHandler:E}=r;return f.resolve(C=>E.handle(C.request,n||{}),g)}}class Kl{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=t=>t,this._outputFilterSensitiveLog=t=>t,this._serializer=null,this._deserializer=null}init(t){this._init=t}ep(t){return this._ep=t,this}m(t){return this._middlewareFn=t,this}s(t,r,n={}){return this._smithyContext={service:t,operation:r,...n},this}c(t={}){return this._additionalContext=t,this}n(t,r){return this._clientName=t,this._commandName=r,this}f(t=n=>n,r=n=>n){return this._inputFilterSensitiveLog=t,this._outputFilterSensitiveLog=r,this}ser(t){return this._serializer=t,this}de(t){return this._deserializer=t,this}build(){const t=this;let r;return r=class extends tr{static getEndpointParameterInstructions(){return t._ep}constructor(n){super(),this.input=n,this.serialize=t._serializer,this.deserialize=t._deserializer,t._init(this)}resolveMiddleware(n,s,i){return this.resolveMiddlewareWithContext(n,s,i,{CommandCtor:r,middlewareFn:t._middlewareFn,clientName:t._clientName,commandName:t._commandName,inputFilterSensitiveLog:t._inputFilterSensitiveLog,outputFilterSensitiveLog:t._outputFilterSensitiveLog,smithyContext:t._smithyContext,additionalContext:t._additionalContext})}}}}const Ai="***SensitiveInformation***",nc=e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}},Er=e=>{if(e!=null){if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&oc.warn(ic(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},Xl=Math.ceil(2**127*(2-2**-23)),Ri=e=>{const t=Er(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>Xl)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},ns=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}},Ci=e=>Fs(e,32),Pi=e=>Fs(e,16),Ti=e=>Fs(e,8),Fs=(e,t)=>{const r=ns(e);if(r!==void 0&&Zl(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},Zl=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},ut=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},sc=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;const t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},z=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return oc.warn(ic(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}},Yl=e=>Er(typeof e=="string"?lt(e):e),Ql=e=>Ri(typeof e=="string"?lt(e):e),Jl=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,lt=e=>{const t=e.match(Jl);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},ed=e=>ns(typeof e=="string"?lt(e):e),Oi=e=>Ci(typeof e=="string"?lt(e):e),td=e=>Pi(typeof e=="string"?lt(e):e),rd=e=>Ti(typeof e=="string"?lt(e):e),ic=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),oc={warn:console.warn},nd=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],sd=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),Ds=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const t=sd.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");const[r,n,s,i,o,a,u,c,l]=t,h=td(ac(n)),f=jt(s,"month",1,12),y=jt(i,"day",1,31),g=od(h,f,y,{hours:o,minutes:a,seconds:u,fractionalMilliseconds:c});return l.toUpperCase()!="Z"&&g.setTime(g.getTime()-dd(l)),g},id=e=>{if(e==null)return;let t;if(typeof e=="number")t=e;else if(typeof e=="string")t=Yl(e);else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(t)||t===1/0||t===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(t*1e3))},od=(e,t,r,n)=>{const s=t-1;return cd(e,s,r),new Date(Date.UTC(e,s,r,jt(n.hours,"hour",0,23),jt(n.minutes,"minute",0,59),jt(n.seconds,"seconds",0,60),ld(n.fractionalMilliseconds)))},ad=[31,28,31,30,31,30,31,31,30,31,30,31],cd=(e,t,r)=>{let n=ad[t];if(t===1&&ud(e)&&(n=29),r>n)throw new TypeError(`Invalid day for ${nd[t]} in ${e}: ${r}`)},ud=e=>e%4===0&&(e%100!==0||e%400===0),jt=(e,t,r,n)=>{const s=rd(ac(e));if(s<r||s>n)throw new TypeError(`${t} must be between ${r} and ${n}, inclusive`);return s},ld=e=>e==null?0:Ql("0."+e)*1e3,dd=e=>{const t=e[0];let r=1;if(t=="+")r=1;else if(t=="-")r=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);const n=Number(e.substring(1,3)),s=Number(e.substring(4,6));return r*(n*60+s)*60*1e3},ac=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)};class Or extends Error{constructor(t){super(t.message),Object.setPrototypeOf(this,Or.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}}const ve=(e,t={})=>{Object.entries(t).filter(([,n])=>n!==void 0).forEach(([n,s])=>{(e[n]==null||e[n]==="")&&(e[n]=s)});const r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e},fd=({output:e,parsedBody:t,exceptionCtor:r,errorCode:n})=>{const s=hd(e),i=s.httpStatusCode?s.httpStatusCode+"":void 0,o=new r({name:(t==null?void 0:t.code)||(t==null?void 0:t.Code)||n||i||"UnknownError",$fault:"client",$metadata:s});throw ve(o,t)},cc=e=>({output:t,parsedBody:r,errorCode:n})=>{fd({output:t,parsedBody:r,exceptionCtor:e,errorCode:n})},hd=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),uc=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},pd=e=>{const t=[];for(const r in wr){const n=wr[r];e[n]!==void 0&&t.push({algorithmId:()=>n,checksumConstructor:()=>e[n]})}return{_checksumAlgorithms:t,addChecksumAlgorithm(r){this._checksumAlgorithms.push(r)},checksumAlgorithms(){return this._checksumAlgorithms}}},yd=e=>{const t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t},gd=e=>{let t=e.retryStrategy;return{setRetryStrategy(r){t=r},retryStrategy(){return t}}},md=e=>{const t={};return t.retryStrategy=e.retryStrategy(),t},lc=e=>({...pd(e),...gd(e)}),dc=e=>({...yd(e),...md(e)});function Ii(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}const ss=e=>Array.isArray(e)?e:[e],fc=e=>{const t="#text";for(const r in e)e.hasOwnProperty(r)&&e[r][t]!==void 0?e[r]=e[r][t]:typeof e[r]=="object"&&e[r]!==null&&(e[r]=fc(e[r]));return e},is=function(){const e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,[null,...arguments]),r=new t;return Object.setPrototypeOf(r,e.prototype),r};is.prototype=Object.create(String.prototype,{constructor:{value:is,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(is,String);function ze(e,t,r){let n,s,i;if(typeof t>"u"&&typeof r>"u")n={},i=e;else{if(n=e,typeof t=="function")return s=t,i=r,bd(n,s,i);i=t}for(const o of Object.keys(i)){if(!Array.isArray(i[o])){n[o]=i[o];continue}pc(n,null,i,o)}return n}const hc=(e,t)=>{const r={};for(const n in t)pc(r,e,t,n);return r},bd=(e,t,r)=>ze(e,Object.entries(r).reduce((n,[s,i])=>(Array.isArray(i)?n[s]=i:typeof i=="function"?n[s]=[t,i()]:n[s]=[t,i],n),{})),pc=(e,t,r,n)=>{if(t!==null){let o=r[n];typeof o=="function"&&(o=[,o]);const[a=wd,u=_d,c=n]=o;(typeof a=="function"&&a(t[c])||typeof a!="function"&&a)&&(e[n]=u(t[c]));return}let[s,i]=r[n];if(typeof i=="function"){let o;const a=s===void 0&&(o=i())!=null,u=typeof s=="function"&&!!s(void 0)||typeof s!="function"&&!!s;a?e[n]=o:u&&(e[n]=i())}else{const o=s===void 0&&i!=null,a=typeof s=="function"&&!!s(i)||typeof s!="function"&&!!s;(o||a)&&(e[n]=i)}},wd=e=>e!=null,_d=e=>e,Sd=(e,t,r,n,s,i)=>{if(t!=null&&t[r]!==void 0){const o=n();if(o.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(s,i?o.split("/").map(a=>Ii(a)).join("/"):Ii(o))}else throw new Error("No value provided for input HTTP label: "+r+".");return e},le=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null).map(le);if(typeof e=="object"){const t={};for(const r of Object.keys(e))e[r]!=null&&(t[r]=le(e[r]));return t}return e},Ed=e=>(t,r)=>async n=>{const s=await e.region(),i=e.region;r.__s3RegionRedirect&&(e.region=async()=>(e.region=i,r.__s3RegionRedirect));const o=await t(n);if(r.__s3RegionRedirect){const a=await e.region();if(s!==a)throw new Error("Region was not restored following S3 region redirect.")}return o},vd={tags:["REGION_REDIRECT","S3"],name:"regionRedirectEndpointMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"};function xd(e){return(t,r)=>async n=>{var s,i;try{return await t(n)}catch(o){if(e.followRegionRedirects&&((s=o==null?void 0:o.$metadata)==null?void 0:s.httpStatusCode)===301){try{const a=o.$response.headers["x-amz-bucket-region"];(i=r.logger)==null||i.debug(`Redirecting from ${await e.region()} to ${a}`),r.__s3RegionRedirect=a}catch(a){throw new Error("Region redirect failed: "+a)}return t(n)}else throw o}}}const Ad={step:"initialize",tags:["REGION_REDIRECT","S3"],name:"regionRedirectMiddleware",override:!0},Rd=e=>({applyToStack:t=>{t.add(xd(e),Ad),t.addRelativeTo(Ed(e),vd)}});class Ir{constructor(t={}){this.data=t,this.lastPurgeTime=Date.now()}get(t){const r=this.data[t];if(r)return r}set(t,r){return this.data[t]=r,r}delete(t){delete this.data[t]}async purgeExpired(){const t=Date.now();if(!(this.lastPurgeTime+Ir.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS>t))for(const r in this.data){const n=this.data[r];if(!n.isRefreshing){const s=await n.identity;s.expiration&&s.expiration.getTime()<t&&delete this.data[r]}}}}Ir.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS=3e4;class jr{constructor(t,r=!1,n=Date.now()){this._identity=t,this.isRefreshing=r,this.accessed=n}get identity(){return this.accessed=Date.now(),this._identity}}class Nr{constructor(t,r=new Ir){this.createSessionFn=t,this.cache=r}async getS3ExpressIdentity(t,r){const n=r.Bucket,{cache:s}=this,i=s.get(n);return i?i.identity.then(o=>{var c,l;return(((c=o.expiration)==null?void 0:c.getTime())??0)<Date.now()?s.set(n,new jr(this.getIdentity(n))).identity:((((l=o.expiration)==null?void 0:l.getTime())??0)<Date.now()+Nr.REFRESH_WINDOW_MS&&!i.isRefreshing&&(i.isRefreshing=!0,this.getIdentity(n).then(h=>{s.set(n,new jr(Promise.resolve(h)))})),o)}):s.set(n,new jr(this.getIdentity(n))).identity}async getIdentity(t){var s,i;await this.cache.purgeExpired().catch(o=>{console.warn(`Error while clearing expired entries in S3ExpressIdentityCache: 
`+o)});const r=await this.createSessionFn(t);if(!((s=r.Credentials)!=null&&s.AccessKeyId)||!((i=r.Credentials)!=null&&i.SecretAccessKey))throw new Error("s3#createSession response credential missing AccessKeyId or SecretAccessKey.");return{accessKeyId:r.Credentials.AccessKeyId,secretAccessKey:r.Credentials.SecretAccessKey,sessionToken:r.Credentials.SessionToken,expiration:r.Credentials.Expiration?new Date(r.Credentials.Expiration):void 0}}}Nr.REFRESH_WINDOW_MS=6e4;var Hr={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var os=function(e,t){return os=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},os(e,t)};function Cd(e,t){os(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var as=function(){return as=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},as.apply(this,arguments)};function Pd(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function Td(e,t,r,n){var s=arguments.length,i=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}function Od(e,t){return function(r,n){t(r,n,e)}}function Id(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Nd(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(h){o(h)}}function u(l){try{c(n.throw(l))}catch(h){o(h)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(e,t||[])).next())})}function kd(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(l){c=[6,l],s=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function $d(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}function Bd(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function cs(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function yc(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function Md(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(yc(arguments[t]));return e}function Fd(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),s=0,t=0;t<r;t++)for(var i=arguments[t],o=0,a=i.length;o<a;o++,s++)n[s]=i[o];return n}function qt(e){return this instanceof qt?(this.v=e,this):new qt(e)}function Dd(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(f){n[f]&&(s[f]=function(y){return new Promise(function(g,E){i.push([f,y,g,E])>1||a(f,y)})})}function a(f,y){try{u(n[f](y))}catch(g){h(i[0][3],g)}}function u(f){f.value instanceof qt?Promise.resolve(f.value.v).then(c,l):h(i[0][2],f)}function c(f){a("next",f)}function l(f){a("throw",f)}function h(f,y){f(y),i.shift(),i.length&&a(i[0][0],i[0][1])}}function Ud(e){var t,r;return t={},n("next"),n("throw",function(s){throw s}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(s,i){t[s]=e[s]?function(o){return(r=!r)?{value:qt(e[s](o)),done:s==="return"}:i?i(o):o}:i}}function Ld(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof cs=="function"?cs(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(o){return new Promise(function(a,u){o=e[i](o),s(a,u,o.done,o.value)})}}function s(i,o,a,u){Promise.resolve(u).then(function(c){i({value:c,done:a})},o)}}function jd(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function Hd(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function zd(e){return e&&e.__esModule?e:{default:e}}function qd(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function Vd(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}const Gd=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return as},__asyncDelegator:Ud,__asyncGenerator:Dd,__asyncValues:Ld,__await:qt,__awaiter:Nd,__classPrivateFieldGet:qd,__classPrivateFieldSet:Vd,__createBinding:$d,__decorate:Td,__exportStar:Bd,__extends:Cd,__generator:kd,__importDefault:zd,__importStar:Hd,__makeTemplateObject:jd,__metadata:Id,__param:Od,__read:yc,__rest:Pd,__spread:Md,__spreadArrays:Fd,__values:cs},Symbol.toStringTag,{value:"Module"})),gc=Ve(Gd);var zr={},mt={};const Wd=e=>{const t=[];for(let r=0,n=e.length;r<n;r++){const s=e.charCodeAt(r);if(s<128)t.push(s);else if(s<2048)t.push(s>>6|192,s&63|128);else if(r+1<e.length&&(s&64512)===55296&&(e.charCodeAt(r+1)&64512)===56320){const i=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023);t.push(i>>18|240,i>>12&63|128,i>>6&63|128,i&63|128)}else t.push(s>>12|224,s>>6&63|128,s&63|128)}return Uint8Array.from(t)},Kd=e=>{let t="";for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s<128)t+=String.fromCharCode(s);else if(192<=s&&s<224){const i=e[++r];t+=String.fromCharCode((s&31)<<6|i&63)}else if(240<=s&&s<365){const o="%"+[s,e[++r],e[++r],e[++r]].map(a=>a.toString(16)).join("%");t+=decodeURIComponent(o)}else t+=String.fromCharCode((s&15)<<12|(e[++r]&63)<<6|e[++r]&63)}return t};function Xd(e){return new TextEncoder().encode(e)}function Zd(e){return new TextDecoder("utf-8").decode(e)}const Yd=e=>typeof TextEncoder=="function"?Xd(e):Wd(e),Qd=e=>typeof TextDecoder=="function"?Zd(e):Kd(e),Jd=Object.freeze(Object.defineProperty({__proto__:null,fromUtf8:Yd,toUtf8:Qd},Symbol.toStringTag,{value:"Module"})),kr=Ve(Jd);var Ni;function ef(){if(Ni)return mt;Ni=1,Object.defineProperty(mt,"__esModule",{value:!0}),mt.convertToBuffer=void 0;var e=kr,t=typeof Buffer<"u"&&Buffer.from?function(n){return Buffer.from(n,"utf8")}:e.fromUtf8;function r(n){return n instanceof Uint8Array?n:typeof n=="string"?t(n):ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(n)}return mt.convertToBuffer=r,mt}var bt={},ki;function tf(){if(ki)return bt;ki=1,Object.defineProperty(bt,"__esModule",{value:!0}),bt.isEmptyData=void 0;function e(t){return typeof t=="string"?t.length===0:t.byteLength===0}return bt.isEmptyData=e,bt}var wt={},$i;function rf(){if($i)return wt;$i=1,Object.defineProperty(wt,"__esModule",{value:!0}),wt.numToUint8=void 0;function e(t){return new Uint8Array([(t&4278190080)>>24,(t&16711680)>>16,(t&65280)>>8,t&255])}return wt.numToUint8=e,wt}var _t={},Bi;function nf(){if(Bi)return _t;Bi=1,Object.defineProperty(_t,"__esModule",{value:!0}),_t.uint32ArrayFrom=void 0;function e(t){if(!Uint32Array.from){for(var r=new Uint32Array(t.length),n=0;n<t.length;)r[n]=t[n],n+=1;return r}return Uint32Array.from(t)}return _t.uint32ArrayFrom=e,_t}var Mi;function dt(){return Mi||(Mi=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.uint32ArrayFrom=e.numToUint8=e.isEmptyData=e.convertToBuffer=void 0;var t=ef();Object.defineProperty(e,"convertToBuffer",{enumerable:!0,get:function(){return t.convertToBuffer}});var r=tf();Object.defineProperty(e,"isEmptyData",{enumerable:!0,get:function(){return r.isEmptyData}});var n=rf();Object.defineProperty(e,"numToUint8",{enumerable:!0,get:function(){return n.numToUint8}});var s=nf();Object.defineProperty(e,"uint32ArrayFrom",{enumerable:!0,get:function(){return s.uint32ArrayFrom}})}(zr)),zr}var St={},Fi;function sf(){if(Fi)return St;Fi=1,Object.defineProperty(St,"__esModule",{value:!0}),St.AwsCrc32=void 0;var e=gc,t=dt(),r=mc(),n=function(){function s(){this.crc32=new r.Crc32}return s.prototype.update=function(i){(0,t.isEmptyData)(i)||this.crc32.update((0,t.convertToBuffer)(i))},s.prototype.digest=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(i){return[2,(0,t.numToUint8)(this.crc32.digest())]})})},s.prototype.reset=function(){this.crc32=new r.Crc32},s}();return St.AwsCrc32=n,St}var Di;function mc(){return Di||(Di=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AwsCrc32=e.Crc32=e.crc32=void 0;var t=gc,r=dt();function n(u){return new s().update(u).digest()}e.crc32=n;var s=function(){function u(){this.checksum=4294967295}return u.prototype.update=function(c){var l,h;try{for(var f=t.__values(c),y=f.next();!y.done;y=f.next()){var g=y.value;this.checksum=this.checksum>>>8^o[(this.checksum^g)&255]}}catch(E){l={error:E}}finally{try{y&&!y.done&&(h=f.return)&&h.call(f)}finally{if(l)throw l.error}}return this},u.prototype.digest=function(){return(this.checksum^4294967295)>>>0},u}();e.Crc32=s;var i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],o=(0,r.uint32ArrayFrom)(i),a=sf();Object.defineProperty(e,"AwsCrc32",{enumerable:!0,get:function(){return a.AwsCrc32}})}(Hr)),Hr}var bc=mc();class Ht{constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);const r=new Uint8Array(8);for(let n=7,s=Math.abs(Math.round(t));n>-1&&s>0;n--,s/=256)r[n]=s;return t<0&&Ui(r),new Ht(r)}valueOf(){const t=this.bytes.slice(0),r=t[0]&128;return r&&Ui(t),parseInt(pe(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}}function Ui(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}class wc{constructor(t,r){this.toUtf8=t,this.fromUtf8=r}format(t){const r=[];for(const i of Object.keys(t)){const o=this.fromUtf8(i);r.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(t[i]))}const n=new Uint8Array(r.reduce((i,o)=>i+o.byteLength,0));let s=0;for(const i of r)n.set(i,s),s+=i.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":const r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":const n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":const s=new Uint8Array(9);return s[0]=5,s.set(t.value.bytes,1),s;case"binary":const i=new DataView(new ArrayBuffer(3+t.value.byteLength));i.setUint8(0,6),i.setUint16(1,t.value.byteLength,!1);const o=new Uint8Array(i.buffer);return o.set(t.value,3),o;case"string":const a=this.fromUtf8(t.value),u=new DataView(new ArrayBuffer(3+a.byteLength));u.setUint8(0,7),u.setUint16(1,a.byteLength,!1);const c=new Uint8Array(u.buffer);return c.set(a,3),c;case"timestamp":const l=new Uint8Array(9);return l[0]=8,l.set(Ht.fromNumber(t.value.valueOf()).bytes,1),l;case"uuid":if(!pf.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);const h=new Uint8Array(17);return h[0]=9,h.set(Gl(t.value.replace(/\-/g,"")),1),h}}parse(t){const r={};let n=0;for(;n<t.byteLength;){const s=t.getUint8(n++),i=this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,s));switch(n+=s,t.getUint8(n++)){case 0:r[i]={type:ji,value:!0};break;case 1:r[i]={type:ji,value:!1};break;case 2:r[i]={type:of,value:t.getInt8(n++)};break;case 3:r[i]={type:af,value:t.getInt16(n,!1)},n+=2;break;case 4:r[i]={type:cf,value:t.getInt32(n,!1)},n+=4;break;case 5:r[i]={type:uf,value:new Ht(new Uint8Array(t.buffer,t.byteOffset+n,8))},n+=8;break;case 6:const o=t.getUint16(n,!1);n+=2,r[i]={type:lf,value:new Uint8Array(t.buffer,t.byteOffset+n,o)},n+=o;break;case 7:const a=t.getUint16(n,!1);n+=2,r[i]={type:df,value:this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,a))},n+=a;break;case 8:r[i]={type:ff,value:new Date(new Ht(new Uint8Array(t.buffer,t.byteOffset+n,8)).valueOf())},n+=8;break;case 9:const u=new Uint8Array(t.buffer,t.byteOffset+n,16);n+=16,r[i]={type:hf,value:`${pe(u.subarray(0,4))}-${pe(u.subarray(4,6))}-${pe(u.subarray(6,8))}-${pe(u.subarray(8,10))}-${pe(u.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return r}}var Li;(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(Li||(Li={}));const ji="boolean",of="byte",af="short",cf="integer",uf="long",lf="binary",df="string",ff="timestamp",hf="uuid",pf=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,_c=4,Le=_c*2,Xe=4,yf=Le+Xe*2;function gf({byteLength:e,byteOffset:t,buffer:r}){if(e<yf)throw new Error("Provided message too short to accommodate event stream message overhead");const n=new DataView(r,t,e),s=n.getUint32(0,!1);if(e!==s)throw new Error("Reported message length does not match received message length");const i=n.getUint32(_c,!1),o=n.getUint32(Le,!1),a=n.getUint32(e-Xe,!1),u=new bc.Crc32().update(new Uint8Array(r,t,Le));if(o!==u.digest())throw new Error(`The prelude checksum specified in the message (${o}) does not match the calculated CRC32 checksum (${u.digest()})`);if(u.update(new Uint8Array(r,t+Le,e-(Le+Xe))),a!==u.digest())throw new Error(`The message checksum (${u.digest()}) did not match the expected value of ${a}`);return{headers:new DataView(r,t+Le+Xe,i),body:new Uint8Array(r,t+Le+Xe+i,s-i-(Le+Xe+Xe))}}class mf{constructor(t,r){this.headerMarshaller=new wc(t,r),this.messageBuffer=[],this.isEndOfStream=!1}feed(t){this.messageBuffer.push(this.decode(t))}endOfStream(){this.isEndOfStream=!0}getMessage(){const t=this.messageBuffer.pop(),r=this.isEndOfStream;return{getMessage(){return t},isEndOfStream(){return r}}}getAvailableMessages(){const t=this.messageBuffer;this.messageBuffer=[];const r=this.isEndOfStream;return{getMessages(){return t},isEndOfStream(){return r}}}encode({headers:t,body:r}){const n=this.headerMarshaller.format(t),s=n.byteLength+r.byteLength+16,i=new Uint8Array(s),o=new DataView(i.buffer,i.byteOffset,i.byteLength),a=new bc.Crc32;return o.setUint32(0,s,!1),o.setUint32(4,n.byteLength,!1),o.setUint32(8,a.update(i.subarray(0,8)).digest(),!1),i.set(n,12),i.set(r,n.byteLength+12),o.setUint32(s-4,a.update(i.subarray(8,s-4)).digest(),!1),i}decode(t){const{headers:r,body:n}=gf(t);return{headers:this.headerMarshaller.parse(r),body:n}}formatHeaders(t){return this.headerMarshaller.format(t)}}class bf{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const t of this.options.inputStream)yield this.options.decoder.decode(t)}}class wf{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const t of this.options.messageStream)yield this.options.encoder.encode(t);this.options.includeEndFrame&&(yield new Uint8Array(0))}}class _f{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const t of this.options.messageStream){const r=await this.options.deserializer(t);r!==void 0&&(yield r)}}}class Sf{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const t of this.options.inputStream)yield this.options.serializer(t)}}const Ef=e=>e[ts]||(e[ts]={}),Ee=e=>{if(typeof e=="function")return e;const t=Promise.resolve(e);return()=>t},vf="X-Amz-Algorithm",xf="X-Amz-Credential",Sc="X-Amz-Date",Af="X-Amz-SignedHeaders",Rf="X-Amz-Expires",Ec="X-Amz-Signature",vc="X-Amz-Security-Token",xc="authorization",Ac=Sc.toLowerCase(),Cf="date",Pf=[xc,Ac,Cf],Tf=Ec.toLowerCase(),us="x-amz-content-sha256",Of=vc.toLowerCase(),If={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Nf=/^proxy-/,kf=/^sec-/,qr="AWS4-HMAC-SHA256",$f="AWS4-HMAC-SHA256-PAYLOAD",Bf="UNSIGNED-PAYLOAD",Mf=50,Rc="aws4_request",Ff=60*60*24*7,rr={},Vr=[],Gr=(e,t,r)=>`${e}/${t}/${r}/${Rc}`,Df=async(e,t,r,n,s)=>{const i=await Hi(e,t.secretAccessKey,t.accessKeyId),o=`${r}:${n}:${s}:${pe(i)}:${t.sessionToken}`;if(o in rr)return rr[o];for(Vr.push(o);Vr.length>Mf;)delete rr[Vr.shift()];let a=`AWS4${t.secretAccessKey}`;for(const u of[r,n,s,Rc])a=await Hi(e,a,u);return rr[o]=a},Hi=(e,t,r)=>{const n=new e(t);return n.update(Lt(r)),n.digest()},zi=({headers:e},t,r)=>{const n={};for(const s of Object.keys(e).sort()){if(e[s]==null)continue;const i=s.toLowerCase();(i in If||t!=null&&t.has(i)||Nf.test(i)||kf.test(i))&&(!r||r&&!r.has(i))||(n[i]=e[s].trim().replace(/\s+/g," "))}return n},Uf=({query:e={}})=>{const t=[],r={};for(const n of Object.keys(e).sort()){if(n.toLowerCase()===Tf)continue;t.push(n);const s=e[n];typeof s=="string"?r[n]=`${Ze(n)}=${Ze(s)}`:Array.isArray(s)&&(r[n]=s.slice(0).reduce((i,o)=>i.concat([`${Ze(n)}=${Ze(o)}`]),[]).sort().join("&"))}return t.map(n=>r[n]).filter(n=>n).join("&")},Lf=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]",Wr=async({headers:e,body:t},r)=>{for(const n of Object.keys(e))if(n.toLowerCase()===us)return e[n];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||Lf(t)){const n=new r;return n.update(Lt(t)),pe(await n.digest())}return Bf},jf=(e,t)=>{e=e.toLowerCase();for(const r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1},Cc=({headers:e,query:t,...r})=>({...r,headers:{...e},query:t?Hf(t):void 0}),Hf=e=>Object.keys(e).reduce((t,r)=>{const n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{}),zf=(e,t={})=>{var s;const{headers:r,query:n={}}=typeof e.clone=="function"?e.clone():Cc(e);for(const i of Object.keys(r)){const o=i.toLowerCase();o.slice(0,6)==="x-amz-"&&!((s=t.unhoistableHeaders)!=null&&s.has(o))&&(n[i]=r[i],delete r[i])}return{...e,headers:r,query:n}},qi=e=>{e=typeof e.clone=="function"?e.clone():Cc(e);for(const t of Object.keys(e.headers))Pf.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e},qf=e=>Vf(e).toISOString().replace(/\.\d{3}Z$/,"Z"),Vf=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e;class ls{constructor({applyChecksum:t,credentials:r,region:n,service:s,sha256:i,uriEscapePath:o=!0}){this.headerMarshaller=new wc(er,ct),this.service=s,this.sha256=i,this.uriEscapePath=o,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=Ee(n),this.credentialProvider=Ee(r)}async presign(t,r={}){const{signingDate:n=new Date,expiresIn:s=3600,unsignableHeaders:i,unhoistableHeaders:o,signableHeaders:a,signingRegion:u,signingService:c}=r,l=await this.credentialProvider();this.validateResolvedCredentials(l);const h=u??await this.regionProvider(),{longDate:f,shortDate:y}=nr(n);if(s>Ff)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const g=Gr(y,h,c??this.service),E=zf(qi(t),{unhoistableHeaders:o});l.sessionToken&&(E.query[vc]=l.sessionToken),E.query[vf]=qr,E.query[xf]=`${l.accessKeyId}/${g}`,E.query[Sc]=f,E.query[Rf]=s.toString(10);const C=zi(E,i,a);return E.query[Af]=Vi(C),E.query[Ec]=await this.getSignature(f,g,this.getSigningKey(l,h,y,c),this.createCanonicalRequest(E,C,await Wr(t,this.sha256))),E}async sign(t,r){return typeof t=="string"?this.signString(t,r):t.headers&&t.payload?this.signEvent(t,r):t.message?this.signMessage(t,r):this.signRequest(t,r)}async signEvent({headers:t,payload:r},{signingDate:n=new Date,priorSignature:s,signingRegion:i,signingService:o}){const a=i??await this.regionProvider(),{shortDate:u,longDate:c}=nr(n),l=Gr(u,a,o??this.service),h=await Wr({headers:{},body:r},this.sha256),f=new this.sha256;f.update(t);const y=pe(await f.digest()),g=[$f,c,l,s,y,h].join(`
`);return this.signString(g,{signingDate:n,signingRegion:a,signingService:o})}async signMessage(t,{signingDate:r=new Date,signingRegion:n,signingService:s}){return this.signEvent({headers:this.headerMarshaller.format(t.message.headers),payload:t.message.body},{signingDate:r,signingRegion:n,signingService:s,priorSignature:t.priorSignature}).then(o=>({message:t.message,signature:o}))}async signString(t,{signingDate:r=new Date,signingRegion:n,signingService:s}={}){const i=await this.credentialProvider();this.validateResolvedCredentials(i);const o=n??await this.regionProvider(),{shortDate:a}=nr(r),u=new this.sha256(await this.getSigningKey(i,o,a,s));return u.update(Lt(t)),pe(await u.digest())}async signRequest(t,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:s,signingRegion:i,signingService:o}={}){const a=await this.credentialProvider();this.validateResolvedCredentials(a);const u=i??await this.regionProvider(),c=qi(t),{longDate:l,shortDate:h}=nr(r),f=Gr(h,u,o??this.service);c.headers[Ac]=l,a.sessionToken&&(c.headers[Of]=a.sessionToken);const y=await Wr(c,this.sha256);!jf(us,c.headers)&&this.applyChecksum&&(c.headers[us]=y);const g=zi(c,s,n),E=await this.getSignature(l,f,this.getSigningKey(a,u,h,o),this.createCanonicalRequest(c,g,y));return c.headers[xc]=`${qr} Credential=${a.accessKeyId}/${f}, SignedHeaders=${Vi(g)}, Signature=${E}`,c}createCanonicalRequest(t,r,n){const s=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${Uf(t)}
${s.map(i=>`${i}:${r[i]}`).join(`
`)}

${s.join(";")}
${n}`}async createStringToSign(t,r,n){const s=new this.sha256;s.update(Lt(n));const i=await s.digest();return`${qr}
${t}
${r}
${pe(i)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){const r=[];for(const i of t.split("/"))(i==null?void 0:i.length)!==0&&i!=="."&&(i===".."?r.pop():r.push(i));const n=`${t!=null&&t.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&(t!=null&&t.endsWith("/"))?"/":""}`;return encodeURIComponent(n).replace(/%2F/g,"/")}return t}async getSignature(t,r,n,s){const i=await this.createStringToSign(t,r,s),o=new this.sha256(await n);return o.update(Lt(i)),pe(await o.digest())}getSigningKey(t,r,n,s){return Df(this.sha256,t,n,r,s||this.service)}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}}const nr=e=>{const t=qf(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},Vi=e=>Object.keys(e).sort().join(";");var Gi;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(Gi||(Gi={}));const Gf="Directory",Wf="S3Express",Kf="sigv4-s3express",ds="X-Amz-S3session-Token",fs=ds.toLowerCase();class Xf extends ls{async signWithCredentials(t,r,n){const s=Wi(r);t.headers[fs]=r.sessionToken;const i=this;return Ki(i,s),i.signRequest(t,n??{})}async presignWithCredentials(t,r,n){const s=Wi(r);return delete t.headers[fs],t.headers[ds]=r.sessionToken,t.query=t.query??{},t.query[ds]=r.sessionToken,Ki(this,s),this.presign(t,n)}}function Wi(e){return{accessKeyId:e.accessKeyId,secretAccessKey:e.secretAccessKey,expiration:e.expiration}}function Ki(e,t){const r=setTimeout(()=>{throw new Error("SignatureV4S3Express credential override was created but not called.")},10),n=e.credentialProvider,s=()=>(clearTimeout(r),e.credentialProvider=n,Promise.resolve(t));e.credentialProvider=s}const Zf=e=>(t,r)=>async n=>{var s,i,o,a,u;if(r.endpointV2){const c=r.endpointV2,l=((o=(i=(s=c.properties)==null?void 0:s.authSchemes)==null?void 0:i[0])==null?void 0:o.name)===Kf;if((((a=c.properties)==null?void 0:a.backend)===Wf||((u=c.properties)==null?void 0:u.bucketType)===Gf)&&(r.isS3ExpressBucket=!0),l){const f=n.input.Bucket;if(f){const y=await e.s3ExpressIdentityProvider.getS3ExpressIdentity(await e.credentials(),{Bucket:f});r.s3ExpressIdentity=y,me.isInstance(n.request)&&y.sessionToken&&(n.request.headers[fs]=y.sessionToken)}}}return t(n)},Yf={name:"s3ExpressMiddleware",step:"build",tags:["S3","S3_EXPRESS"],override:!0},Qf=e=>({applyToStack:t=>{t.add(Zf(e),Yf)}}),Jf=(e,{session:t})=>{const[r,n]=t;return{...e,forcePathStyle:e.forcePathStyle??!1,useAccelerateEndpoint:e.useAccelerateEndpoint??!1,disableMultiregionAccessPoints:e.disableMultiregionAccessPoints??!1,followRegionRedirects:e.followRegionRedirects??!1,s3ExpressIdentityProvider:e.s3ExpressIdentityProvider??new Nr(async s=>r().send(new n({Bucket:s,SessionMode:"ReadWrite"})))}},eh=e=>typeof e=="string"&&e.indexOf("arn:")===0&&e.split(":").length>=6;function th(){return e=>async t=>{const{input:{Bucket:r}}=t;if(typeof r=="string"&&!eh(r)&&r.indexOf("/")>=0){const n=new Error(`Bucket name shouldn't contain '/', received '${r}'`);throw n.name="InvalidBucketName",n}return e({...t})}}const rh={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},nh=e=>({applyToStack:t=>{t.add(th(),rh)}});class Us extends Error{constructor(t,r=!0){super(t),this.tryNextLink=r,this.name="ProviderError",Object.setPrototypeOf(this,Us.prototype)}static from(t,r=!0){return Object.assign(new this(t.message,r),t)}}class ft extends Us{constructor(t,r=!0){super(t,r),this.tryNextLink=r,this.name="CredentialsProviderError",Object.setPrototypeOf(this,ft.prototype)}}const Pc=(e,t,r)=>{let n,s,i,o=!1;const a=async()=>{s||(s=e());try{n=await s,i=!0,o=!1}finally{s=void 0}return n};return t===void 0?async u=>((!i||u!=null&&u.forceRefresh)&&(n=await a()),n):async u=>((!i||u!=null&&u.forceRefresh)&&(n=await a()),o?n:r&&!r(n)?(o=!0,n):(t(n)&&await a(),n))},sh=3e5,Tc=e=>{const t=e.credentials?ih(e.credentials):e.credentialDefaultProvider(e),{signingEscapePath:r=!0,systemClockOffset:n=e.systemClockOffset||0,sha256:s}=e;let i;return e.signer?i=Ee(e.signer):e.regionInfoProvider?i=()=>Ee(e.region)().then(async o=>[await e.regionInfoProvider(o,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},o]).then(([o,a])=>{const{signingRegion:u,signingService:c}=o;e.signingRegion=e.signingRegion||u||a,e.signingName=e.signingName||c||e.serviceId;const l={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:s,uriEscapePath:r},h=e.signerConstructor||ls;return new h(l)}):i=async o=>{o=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await Ee(e.region)(),properties:{}},o);const a=o.signingRegion,u=o.signingName;e.signingRegion=e.signingRegion||a,e.signingName=e.signingName||u||e.serviceId;const c={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:s,uriEscapePath:r},l=e.signerConstructor||ls;return new l(c)},{...e,systemClockOffset:n,signingEscapePath:r,credentials:t,signer:i}},ih=e=>typeof e=="function"?Pc(e,t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<sh,t=>t.expiration!==void 0):Ee(e),Oc=e=>new Date(Date.now()+e),oh=(e,t)=>Math.abs(Oc(t).getTime()-e)>=3e5,Xi=(e,t)=>{const r=Date.parse(e);return oh(r,t)?r-Date.now():t},ah=e=>(t,r)=>async function(n){var h,f,y,g;if(!me.isInstance(n.request))return t(n);const s=(y=(f=(h=r.endpointV2)==null?void 0:h.properties)==null?void 0:f.authSchemes)==null?void 0:y[0],i=(s==null?void 0:s.name)==="sigv4a"?(g=s==null?void 0:s.signingRegionSet)==null?void 0:g.join(","):void 0,o=await e.signer(s);let a;const u={signingDate:Oc(e.systemClockOffset),signingRegion:i||r.signing_region,signingService:r.signing_service};if(r.s3ExpressIdentity){if(a=await o.signWithCredentials(n.request,r.s3ExpressIdentity,u),a.headers["X-Amz-Security-Token"]||a.headers["x-amz-security-token"])throw new Error("X-Amz-Security-Token must not be set for s3-express requests.")}else a=await o.sign(n.request,u);const c=await t({...n,request:a}).catch(E=>{const C=E.ServerTime??Zi(E.$response);throw C&&(e.systemClockOffset=Xi(C,e.systemClockOffset)),E}),l=Zi(c.response);return l&&(e.systemClockOffset=Xi(l,e.systemClockOffset)),c},Zi=e=>{var t,r;return _r.isInstance(e)?((t=e.headers)==null?void 0:t.date)??((r=e.headers)==null?void 0:r.Date):void 0},ch={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},uh=e=>({applyToStack:t=>{t.addRelativeTo(ah(e),ch)}});function Ic(e){return{...e,customUserAgent:typeof e.customUserAgent=="string"?[[e.customUserAgent]]:e.customUserAgent}}const lh=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),Nc=e=>lh.test(e)||e.startsWith("[")&&e.endsWith("]"),dh=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),Ls=(e,t=!1)=>{if(!t)return dh.test(e);const r=e.split(".");for(const n of r)if(!Ls(n))return!1;return!0},hs={},Vt="endpoints";function qe(e){return typeof e!="object"||e==null?e:"ref"in e?`$${qe(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(qe).join(", ")})`:JSON.stringify(e,null,2)}class ye extends Error{constructor(t){super(t),this.name="EndpointError"}}const fh=(e,t)=>e===t,hh=e=>{const t=e.split("."),r=[];for(const n of t){const s=n.indexOf("[");if(s!==-1){if(n.indexOf("]")!==n.length-1)throw new ye(`Path: '${e}' does not end with ']'`);const i=n.slice(s+1,-1);if(Number.isNaN(parseInt(i)))throw new ye(`Invalid array index: '${i}' in path: '${e}'`);s!==0&&r.push(n.slice(0,s)),r.push(i)}else r.push(n)}return r},kc=(e,t)=>hh(t).reduce((r,n)=>{if(typeof r!="object")throw new ye(`Index '${n}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},e),ph=e=>e!=null,yh=e=>!e,Kr={[zt.HTTP]:80,[zt.HTTPS]:443},gh=e=>{const t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){const{hostname:f,port:y,protocol:g="",path:E="",query:C={}}=e,N=new URL(`${g}//${f}${y?`:${y}`:""}${E}`);return N.search=Object.entries(C).map(([D,X])=>`${D}=${X}`).join("&"),N}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;const r=t.href,{host:n,hostname:s,pathname:i,protocol:o,search:a}=t;if(a)return null;const u=o.slice(0,-1);if(!Object.values(zt).includes(u))return null;const c=Nc(s),l=r.includes(`${n}:${Kr[u]}`)||typeof e=="string"&&e.includes(`${n}:${Kr[u]}`),h=`${n}${l?`:${Kr[u]}`:""}`;return{scheme:u,authority:h,path:i,normalizedPath:i.endsWith("/")?i:`${i}/`,isIp:c}},mh=(e,t)=>e===t,bh=(e,t,r,n)=>t>=r||e.length<r?null:n?e.substring(e.length-r,e.length-t):e.substring(t,r),wh=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),_h={booleanEquals:fh,getAttr:kc,isSet:ph,isValidHostLabel:Ls,not:yh,parseURL:gh,stringEquals:mh,substring:bh,uriEncode:wh},$c=(e,t)=>{const r=[],n={...t.endpointParams,...t.referenceRecord};let s=0;for(;s<e.length;){const i=e.indexOf("{",s);if(i===-1){r.push(e.slice(s));break}r.push(e.slice(s,i));const o=e.indexOf("}",i);if(o===-1){r.push(e.slice(i));break}e[i+1]==="{"&&e[o+1]==="}"&&(r.push(e.slice(i+1,o)),s=o+2);const a=e.substring(i+1,o);if(a.includes("#")){const[u,c]=a.split("#");r.push(kc(n[u],c))}else r.push(n[a]);s=o+1}return r.join("")},Sh=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e],$r=(e,t,r)=>{if(typeof e=="string")return $c(e,r);if(e.fn)return Bc(e,r);if(e.ref)return Sh(e,r);throw new ye(`'${t}': ${String(e)} is not a string, function or reference.`)},Bc=({fn:e,argv:t},r)=>{const n=t.map(i=>["boolean","number"].includes(typeof i)?i:$r(i,"arg",r)),s=e.split(".");return s[0]in hs&&s[1]!=null?hs[s[0]][s[1]](...n):_h[e](...n)},Eh=({assign:e,...t},r)=>{var s,i;if(e&&e in r.referenceRecord)throw new ye(`'${e}' is already defined in Reference Record.`);const n=Bc(t,r);return(i=(s=r.logger)==null?void 0:s.debug)==null||i.call(s,Vt,`evaluateCondition: ${qe(t)} = ${qe(n)}`),{result:n===""?!0:!!n,...e!=null&&{toAssign:{name:e,value:n}}}},js=(e=[],t)=>{var n,s;const r={};for(const i of e){const{result:o,toAssign:a}=Eh(i,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!o)return{result:o};a&&(r[a.name]=a.value,(s=(n=t.logger)==null?void 0:n.debug)==null||s.call(n,Vt,`assign: ${a.name} := ${qe(a.value)}`))}return{result:!0,referenceRecord:r}},vh=(e,t)=>Object.entries(e).reduce((r,[n,s])=>({...r,[n]:s.map(i=>{const o=$r(i,"Header value entry",t);if(typeof o!="string")throw new ye(`Header '${n}' value '${o}' is not a string`);return o})}),{}),Mc=(e,t)=>{if(Array.isArray(e))return e.map(r=>Mc(r,t));switch(typeof e){case"string":return $c(e,t);case"object":if(e===null)throw new ye(`Unexpected endpoint property: ${e}`);return Fc(e,t);case"boolean":return e;default:throw new ye(`Unexpected endpoint property type: ${typeof e}`)}},Fc=(e,t)=>Object.entries(e).reduce((r,[n,s])=>({...r,[n]:Mc(s,t)}),{}),xh=(e,t)=>{const r=$r(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new ye(`Endpoint URL must be a string, got ${typeof r}`)},Ah=(e,t)=>{var l,h;const{conditions:r,endpoint:n}=e,{result:s,referenceRecord:i}=js(r,t);if(!s)return;const o={...t,referenceRecord:{...t.referenceRecord,...i}},{url:a,properties:u,headers:c}=n;return(h=(l=t.logger)==null?void 0:l.debug)==null||h.call(l,Vt,`Resolving endpoint from template: ${qe(n)}`),{...c!=null&&{headers:vh(c,o)},...u!=null&&{properties:Fc(u,o)},url:xh(a,o)}},Rh=(e,t)=>{const{conditions:r,error:n}=e,{result:s,referenceRecord:i}=js(r,t);if(s)throw new ye($r(n,"Error",{...t,referenceRecord:{...t.referenceRecord,...i}}))},Ch=(e,t)=>{const{conditions:r,rules:n}=e,{result:s,referenceRecord:i}=js(r,t);if(s)return Dc(n,{...t,referenceRecord:{...t.referenceRecord,...i}})},Dc=(e,t)=>{for(const r of e)if(r.type==="endpoint"){const n=Ah(r,t);if(n)return n}else if(r.type==="error")Rh(r,t);else if(r.type==="tree"){const n=Ch(r,t);if(n)return n}else throw new ye(`Unknown endpoint rule: ${r}`);throw new ye("Rules evaluation failed")},Uc=(e,t)=>{var c,l,h,f,y;const{endpointParams:r,logger:n}=t,{parameters:s,rules:i}=e;(l=(c=t.logger)==null?void 0:c.debug)==null||l.call(c,`${Vt} Initial EndpointParams: ${qe(r)}`);const o=Object.entries(s).filter(([,g])=>g.default!=null).map(([g,E])=>[g,E.default]);if(o.length>0)for(const[g,E]of o)r[g]=r[g]??E;const a=Object.entries(s).filter(([,g])=>g.required).map(([g])=>g);for(const g of a)if(r[g]==null)throw new ye(`Missing required parameter: '${g}'`);const u=Dc(i,{endpointParams:r,logger:n,referenceRecord:{}});if((h=t.endpointParams)!=null&&h.Endpoint)try{const g=new URL(t.endpointParams.Endpoint),{protocol:E,port:C}=g;u.url.protocol=E,u.url.port=C}catch{}return(y=(f=t.logger)==null?void 0:f.debug)==null||y.call(f,`${Vt} Resolved endpoint: ${qe(u)}`),u},Lc=(e,t=!1)=>{if(t){for(const r of e.split("."))if(!Lc(r))return!1;return!0}return!(!Ls(e)||e.length<3||e.length>63||e!==e.toLowerCase()||Nc(e))},Ph=e=>{const t=e.split(":");if(t.length<6)return null;const[r,n,s,i,o,...a]=t;return r!=="arn"||n===""||s===""||a[0]===""?null:{partition:n,service:s,region:i,accountId:o,resourceId:a[0].includes("/")?a[0].split("/"):a}},Th=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{}}],Oh="1.1",Ih={partitions:Th,version:Oh};let Nh=Ih;const kh=e=>{const{partitions:t}=Nh;for(const n of t){const{regions:s,outputs:i}=n;for(const[o,a]of Object.entries(s))if(o===e)return{...i,...a}}for(const n of t){const{regionRegex:s,outputs:i}=n;if(new RegExp(s).test(e))return{...i}}const r=t.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},$h={isVirtualHostableS3Bucket:Lc,parseArn:Ph,partition:kh};hs.aws=$h;const Yi="user-agent",Xr="x-amz-user-agent",Qi=" ",Zr="/",Bh=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,Mh=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,Ji="-",Fh=e=>(t,r)=>async n=>{var h,f;const{request:s}=n;if(!me.isInstance(s))return t(n);const{headers:i}=s,o=((h=r==null?void 0:r.userAgent)==null?void 0:h.map(Yr))||[],a=(await e.defaultUserAgentProvider()).map(Yr),u=((f=e==null?void 0:e.customUserAgent)==null?void 0:f.map(Yr))||[],c=[].concat([...a,...o,...u]).join(Qi),l=[...a.filter(y=>y.startsWith("aws-sdk-")),...u].join(Qi);return e.runtime!=="browser"?(l&&(i[Xr]=i[Xr]?`${i[Yi]} ${l}`:l),i[Yi]=c):i[Xr]=c,t({...n,request:s})},Yr=e=>{var o;const t=e[0].split(Zr).map(a=>a.replace(Bh,Ji)).join(Zr),r=(o=e[1])==null?void 0:o.replace(Mh,Ji),n=t.indexOf(Zr),s=t.substring(0,n);let i=t.substring(n+1);return s==="api"&&(i=i.toLowerCase()),[s,i,r].filter(a=>a&&a.length>0).reduce((a,u,c)=>{switch(c){case 0:return u;case 1:return`${a}/${u}`;default:return`${a}#${u}`}},"")},Dh={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},jc=e=>({applyToStack:t=>{t.add(Fh(e),Dh)}}),Hc=!1,zc=!1,qc=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips")),eo=e=>qc(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,Vc=e=>{const{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if(typeof t=="string")return eo(t);const n=await t();return eo(n)},useFipsEndpoint:async()=>{const n=typeof t=="string"?t:await t();return qc(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}}},Uh=e=>({...e,eventStreamMarshaller:e.eventStreamSerdeProvider(e)}),to="content-length";function Lh(e){return t=>async r=>{const n=r.request;if(me.isInstance(n)){const{body:s,headers:i}=n;if(s&&Object.keys(i).map(o=>o.toLowerCase()).indexOf(to)===-1)try{const o=e(s);n.headers={...n.headers,[to]:String(o)}}catch{}}return t({...r,request:n})}}const jh={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Gc=e=>({applyToStack:t=>{t.add(Lh(e.bodyLengthChecker),jh)}}),Hh=async e=>{const t=(e==null?void 0:e.Bucket)||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),Wh(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!Gh(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},zh=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,qh=/(\d+\.){3}\d+/,Vh=/\.\./,Gh=e=>zh.test(e)&&!qh.test(e)&&!Vh.test(e),Wh=e=>{const[t,r,n,s,i,o]=e.split(":"),a=t==="arn"&&e.split(":").length>=6,u=[t,r,n,i,o].filter(Boolean).length===5;if(a&&!u)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return t==="arn"&&!!r&&!!n&&!!i&&!!o},Kh=(e,t,r)=>{const n=async()=>{const s=r[e]??r[t];return typeof s=="function"?s():s};return e==="credentialScope"||t==="CredentialScope"?async()=>{const s=typeof r.credentials=="function"?await r.credentials():r.credentials;return(s==null?void 0:s.credentialScope)??(s==null?void 0:s.CredentialScope)}:e==="endpoint"||t==="endpoint"?async()=>{const s=await n();if(s&&typeof s=="object"){if("url"in s)return s.url.href;if("hostname"in s){const{protocol:i,hostname:o,port:a,path:u}=s;return`${i}//${o}${a?":"+a:""}${u}`}}return s}:n},Xh=async e=>{};function Zh(e){const t={};if(e=e.replace(/^\?/,""),e)for(const r of e.split("&")){let[n,s=null]=r.split("=");n=decodeURIComponent(n),s&&(s=decodeURIComponent(s)),n in t?Array.isArray(t[n])?t[n].push(s):t[n]=[t[n],s]:t[n]=s}return t}const Gt=e=>{if(typeof e=="string")return Gt(new URL(e));const{hostname:t,pathname:r,port:n,protocol:s,search:i}=e;let o;return i&&(o=Zh(i)),{hostname:t,port:n?parseInt(n):void 0,protocol:s,path:r,query:o}},Wc=e=>typeof e=="object"?"url"in e?Gt(e.url):e:Gt(e),Yh=async(e,t,r,n)=>{if(!r.endpoint){const o=await Xh(r.serviceId||"");o&&(r.endpoint=()=>Promise.resolve(Wc(o)))}const s=await Qh(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(s,n)},Qh=async(e,t,r)=>{var i;const n={},s=((i=t==null?void 0:t.getEndpointParameterInstructions)==null?void 0:i.call(t))||{};for(const[o,a]of Object.entries(s))switch(a.type){case"staticContextParams":n[o]=a.value;break;case"contextParams":n[o]=e[a.name];break;case"clientContextParams":case"builtInParams":n[o]=await Kh(a.name,o,r)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(a))}return Object.keys(s).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await Hh(n),n},Jh=({config:e,instructions:t})=>(r,n)=>async s=>{var a,u,c;const i=await Yh(s.input,{getEndpointParameterInstructions(){return t}},{...e},n);n.endpointV2=i,n.authSchemes=(a=i.properties)==null?void 0:a.authSchemes;const o=(u=n.authSchemes)==null?void 0:u[0];if(o){n.signing_region=o.signingRegion,n.signing_service=o.signingName;const l=Ef(n),h=(c=l==null?void 0:l.selectedHttpAuthScheme)==null?void 0:c.httpAuthOption;h&&(h.signingProperties=Object.assign(h.signingProperties||{},{signing_region:o.signingRegion,signingRegion:o.signingRegion,signing_service:o.signingName,signingName:o.signingName,signingRegionSet:o.signingRegionSet},o.properties))}return r({...s})},ep=(e,t)=>(r,n)=>async s=>{const{response:i}=await r(s);try{const o=await t(i,e);return{response:i,output:o}}catch(o){if(Object.defineProperty(o,"$response",{value:i}),!("$metadata"in o)){const a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";o.message+=`
  `+a}throw o}},tp=(e,t)=>(r,n)=>async s=>{var a;const i=(a=n.endpointV2)!=null&&a.url&&e.urlParser?async()=>e.urlParser(n.endpointV2.url):e.endpoint;if(!i)throw new Error("No valid endpoint provider available.");const o=await t(s.input,{...e,endpoint:i});return r({...s,request:o})},rp={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Hs={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Br(e,t,r){return{applyToStack:n=>{n.add(ep(e,r),rp),n.add(tp(e,t),Hs)}}}const Kc={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:Hs.name},Mr=(e,t)=>({applyToStack:r=>{r.addRelativeTo(Jh({config:e,instructions:t}),Kc)}}),Xc=e=>{const t=e.tls??!0,{endpoint:r}=e,n=r!=null?async()=>Wc(await Ee(r)()):void 0;return{...e,endpoint:n,tls:t,isCustomEndpoint:!!r,useDualstackEndpoint:Ee(e.useDualstackEndpoint??!1),useFipsEndpoint:Ee(e.useFipsEndpoint??!1)}};var it;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(it||(it={}));const Wt=3,Zc=it.STANDARD,np=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],sp=["TimeoutError","RequestTimeout","RequestTimeoutException"],ip=[500,502,503,504],op=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],Yc=e=>{var t,r;return((t=e.$metadata)==null?void 0:t.httpStatusCode)===429||np.includes(e.name)||((r=e.$retryable)==null?void 0:r.throttling)==!0},Qc=e=>{var t;return sp.includes(e.name)||op.includes((e==null?void 0:e.code)||"")||ip.includes(((t=e.$metadata)==null?void 0:t.httpStatusCode)||0)},ap=e=>{var t;if(((t=e.$metadata)==null?void 0:t.httpStatusCode)!==void 0){const r=e.$metadata.httpStatusCode;return 500<=r&&r<=599&&!Qc(e)}return!1};class cp{constructor(t){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(t==null?void 0:t.beta)??.7,this.minCapacity=(t==null?void 0:t.minCapacity)??1,this.minFillRate=(t==null?void 0:t.minFillRate)??.5,this.scaleConstant=(t==null?void 0:t.scaleConstant)??.4,this.smooth=(t==null?void 0:t.smooth)??.8;const r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){const r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>setTimeout(n,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){const t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}const r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),Yc(t)){const s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());const n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){const n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}}const ps=100,Jc=20*1e3,up=500,ro=500,lp=5,dp=10,fp=1,hp="amz-sdk-invocation-id",pp="amz-sdk-request",yp=()=>{let e=ps;return{computeNextBackoffDelay:n=>Math.floor(Math.min(Jc,Math.random()*2**n*e)),setDelayBase:n=>{e=n}}},no=({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(Jc,e),getRetryCost:()=>r});class eu{constructor(t){this.maxAttempts=t,this.mode=it.STANDARD,this.capacity=ro,this.retryBackoffStrategy=yp(),this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return no({retryDelay:ps,retryCount:0})}async refreshRetryTokenForRetry(t,r){const n=await this.getMaxAttempts();if(this.shouldRetry(t,r,n)){const s=r.errorType;this.retryBackoffStrategy.setDelayBase(s==="THROTTLING"?up:ps);const i=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),o=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,i):i,a=this.getCapacityCost(s);return this.capacity-=a,no({retryDelay:o,retryCount:t.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(ro,this.capacity+(t.getRetryCost()??fp))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Wt}`),Wt}}shouldRetry(t,r,n){return t.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(t){return t==="TRANSIENT"?dp:lp}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}}class gp{constructor(t,r){this.maxAttemptsProvider=t,this.mode=it.ADAPTIVE;const{rateLimiter:n}=r??{};this.rateLimiter=n??new cp,this.standardRetryStrategy=new eu(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}}var sr,mp=new Uint8Array(16);function bp(){if(!sr&&(sr=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!sr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return sr(mp)}const wp=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function _p(e){return typeof e=="string"&&wp.test(e)}var ee=[];for(var Qr=0;Qr<256;++Qr)ee.push((Qr+256).toString(16).substr(1));function Sp(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(ee[e[t+0]]+ee[e[t+1]]+ee[e[t+2]]+ee[e[t+3]]+"-"+ee[e[t+4]]+ee[e[t+5]]+"-"+ee[e[t+6]]+ee[e[t+7]]+"-"+ee[e[t+8]]+ee[e[t+9]]+"-"+ee[e[t+10]]+ee[e[t+11]]+ee[e[t+12]]+ee[e[t+13]]+ee[e[t+14]]+ee[e[t+15]]).toLowerCase();if(!_p(r))throw TypeError("Stringified UUID is invalid");return r}function Ep(e,t,r){e=e||{};var n=e.random||(e.rng||bp)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,Sp(n)}const vp=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`),tu=e=>{const{retryStrategy:t}=e,r=Ee(e.maxAttempts??Wt);return{...e,maxAttempts:r,retryStrategy:async()=>t||(await Ee(e.retryMode)()===it.ADAPTIVE?new gp(r):new eu(r))}},xp=e=>(e==null?void 0:e.body)instanceof ReadableStream,Ap=e=>(t,r)=>async n=>{var o;let s=await e.retryStrategy();const i=await e.maxAttempts();if(Rp(s)){s=s;let a=await s.acquireInitialRetryToken(r.partition_id),u=new Error,c=0,l=0;const{request:h}=n,f=me.isInstance(h);for(f&&(h.headers[hp]=Ep());;)try{f&&(h.headers[pp]=`attempt=${c+1}; max=${i}`);const{response:y,output:g}=await t(n);return s.recordSuccess(a),g.$metadata.attempts=c+1,g.$metadata.totalRetryDelay=l,{response:y,output:g}}catch(y){const g=Cp(y);if(u=vp(y),f&&xp(h))throw(o=r.logger instanceof Bs?console:r.logger)==null||o.warn("An error was encountered in a non-retryable streaming request."),u;try{a=await s.refreshRetryTokenForRetry(a,g)}catch{throw u.$metadata||(u.$metadata={}),u.$metadata.attempts=c+1,u.$metadata.totalRetryDelay=l,u}c=a.getRetryCount();const E=a.getRetryDelay();l+=E,await new Promise(C=>setTimeout(C,E))}}else return s=s,s!=null&&s.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(t,n)},Rp=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",Cp=e=>{const t={errorType:Pp(e)},r=Tp(e.$response);return r&&(t.retryAfterHint=r),t},Pp=e=>Yc(e)?"THROTTLING":Qc(e)?"TRANSIENT":ap(e)?"SERVER_ERROR":"CLIENT_ERROR",ru={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},nu=e=>({applyToStack:t=>{t.add(Ap(e),ru)}}),Tp=e=>{if(!_r.isInstance(e))return;const t=Object.keys(e.headers).find(i=>i.toLowerCase()==="retry-after");if(!t)return;const r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)},Op=e=>({...e,useFipsEndpoint:e.useFipsEndpoint??!1,useDualstackEndpoint:e.useDualstackEndpoint??!1,forcePathStyle:e.forcePathStyle??!1,useAccelerateEndpoint:e.useAccelerateEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,disableMultiregionAccessPoints:e.disableMultiregionAccessPoints??!1,defaultSigningName:"s3"}),su={ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},DisableS3ExpressSessionAuth:{type:"clientContextParams",name:"disableS3ExpressSessionAuth"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};class Fr extends Or{constructor(t){super(t),Object.setPrototypeOf(this,Fr.prototype)}}class zs extends Fr{constructor(t){super({name:"NoSuchBucket",$fault:"client",...t}),this.name="NoSuchBucket",this.$fault="client",Object.setPrototypeOf(this,zs.prototype)}}var so;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(so||(so={}));var io;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.ObjectSizeGreaterThan!==void 0?r.ObjectSizeGreaterThan(t.ObjectSizeGreaterThan):t.ObjectSizeLessThan!==void 0?r.ObjectSizeLessThan(t.ObjectSizeLessThan):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(io||(io={}));var oo;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.AccessPointArn!==void 0?r.AccessPointArn(t.AccessPointArn):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(oo||(oo={}));var ao;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(ao||(ao={}));const Ip=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:Ai},...e.SessionToken&&{SessionToken:Ai}}),Np=e=>({...e,...e.Credentials&&{Credentials:Ip(e.Credentials)}});Kc.name;Hs.name;ru.name;function iu(e,t){return new kp(e,t)}class kp{constructor(t,r){this.input=t,this.context=r,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}async build(){const{hostname:t,protocol:r="https",port:n,path:s}=await this.context.endpoint();this.path=s;for(const i of this.resolvePathStack)i(this.path);return new me({protocol:r,hostname:this.hostname||t,port:n,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(t){return this.hostname=t,this}bp(t){return this.resolvePathStack.push(r=>{this.path=`${r!=null&&r.endsWith("/")?r.slice(0,-1):r||""}`+t}),this}p(t,r,n,s){return this.resolvePathStack.push(i=>{this.path=Sd(i,this.input,t,r,n,s)}),this}h(t){return this.headers=t,this}q(t){return this.query=t,this}b(t){return this.body=t,this}m(t){return this.method=t,this}}var qs={},Dr={};(function(e){const t=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",r=t+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",n="["+t+"]["+r+"]*",s=new RegExp("^"+n+"$"),i=function(a,u){const c=[];let l=u.exec(a);for(;l;){const h=[];h.startIndex=u.lastIndex-l[0].length;const f=l.length;for(let y=0;y<f;y++)h.push(l[y]);c.push(h),l=u.exec(a)}return c},o=function(a){const u=s.exec(a);return!(u===null||typeof u>"u")};e.isExist=function(a){return typeof a<"u"},e.isEmptyObject=function(a){return Object.keys(a).length===0},e.merge=function(a,u,c){if(u){const l=Object.keys(u),h=l.length;for(let f=0;f<h;f++)c==="strict"?a[l[f]]=[u[l[f]]]:a[l[f]]=u[l[f]]}},e.getValue=function(a){return e.isExist(a)?a:""},e.isName=o,e.getAllMatches=i,e.nameRegexp=n})(Dr);const Vs=Dr,$p={allowBooleanAttributes:!1,unpairedTags:[]};qs.validate=function(e,t){t=Object.assign({},$p,t);const r=[];let n=!1,s=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let i=0;i<e.length;i++)if(e[i]==="<"&&e[i+1]==="?"){if(i+=2,i=uo(e,i),i.err)return i}else if(e[i]==="<"){let o=i;if(i++,e[i]==="!"){i=lo(e,i);continue}else{let a=!1;e[i]==="/"&&(a=!0,i++);let u="";for(;i<e.length&&e[i]!==">"&&e[i]!==" "&&e[i]!=="	"&&e[i]!==`
`&&e[i]!=="\r";i++)u+=e[i];if(u=u.trim(),u[u.length-1]==="/"&&(u=u.substring(0,u.length-1),i--),!Hp(u)){let h;return u.trim().length===0?h="Invalid space after '<'.":h="Tag '"+u+"' is an invalid name.",G("InvalidTag",h,ce(e,i))}const c=Fp(e,i);if(c===!1)return G("InvalidAttr","Attributes for '"+u+"' have open quote.",ce(e,i));let l=c.value;if(i=c.index,l[l.length-1]==="/"){const h=i-l.length;l=l.substring(0,l.length-1);const f=fo(l,t);if(f===!0)n=!0;else return G(f.err.code,f.err.msg,ce(e,h+f.err.line))}else if(a)if(c.tagClosed){if(l.trim().length>0)return G("InvalidTag","Closing tag '"+u+"' can't have attributes or invalid starting.",ce(e,o));{const h=r.pop();if(u!==h.tagName){let f=ce(e,h.tagStartPos);return G("InvalidTag","Expected closing tag '"+h.tagName+"' (opened in line "+f.line+", col "+f.col+") instead of closing tag '"+u+"'.",ce(e,o))}r.length==0&&(s=!0)}}else return G("InvalidTag","Closing tag '"+u+"' doesn't have proper closing.",ce(e,i));else{const h=fo(l,t);if(h!==!0)return G(h.err.code,h.err.msg,ce(e,i-l.length+h.err.line));if(s===!0)return G("InvalidXml","Multiple possible root nodes found.",ce(e,i));t.unpairedTags.indexOf(u)!==-1||r.push({tagName:u,tagStartPos:o}),n=!0}for(i++;i<e.length;i++)if(e[i]==="<")if(e[i+1]==="!"){i++,i=lo(e,i);continue}else if(e[i+1]==="?"){if(i=uo(e,++i),i.err)return i}else break;else if(e[i]==="&"){const h=Lp(e,i);if(h==-1)return G("InvalidChar","char '&' is not expected.",ce(e,i));i=h}else if(s===!0&&!co(e[i]))return G("InvalidXml","Extra text at the end",ce(e,i));e[i]==="<"&&i--}}else{if(co(e[i]))continue;return G("InvalidChar","char '"+e[i]+"' is not expected.",ce(e,i))}if(n){if(r.length==1)return G("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",ce(e,r[0].tagStartPos));if(r.length>0)return G("InvalidXml","Invalid '"+JSON.stringify(r.map(i=>i.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return G("InvalidXml","Start tag expected.",1);return!0};function co(e){return e===" "||e==="	"||e===`
`||e==="\r"}function uo(e,t){const r=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){const n=e.substr(r,t-r);if(t>5&&n==="xml")return G("InvalidXml","XML declaration allowed only at the start of the document.",ce(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function lo(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let r=1;for(t+=8;t<e.length;t++)if(e[t]==="<")r++;else if(e[t]===">"&&(r--,r===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}const Bp='"',Mp="'";function Fp(e,t){let r="",n="",s=!1;for(;t<e.length;t++){if(e[t]===Bp||e[t]===Mp)n===""?n=e[t]:n!==e[t]||(n="");else if(e[t]===">"&&n===""){s=!0;break}r+=e[t]}return n!==""?!1:{value:r,index:t,tagClosed:s}}const Dp=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function fo(e,t){const r=Vs.getAllMatches(e,Dp),n={};for(let s=0;s<r.length;s++){if(r[s][1].length===0)return G("InvalidAttr","Attribute '"+r[s][2]+"' has no space in starting.",Et(r[s]));if(r[s][3]!==void 0&&r[s][4]===void 0)return G("InvalidAttr","Attribute '"+r[s][2]+"' is without value.",Et(r[s]));if(r[s][3]===void 0&&!t.allowBooleanAttributes)return G("InvalidAttr","boolean attribute '"+r[s][2]+"' is not allowed.",Et(r[s]));const i=r[s][2];if(!jp(i))return G("InvalidAttr","Attribute '"+i+"' is an invalid name.",Et(r[s]));if(!n.hasOwnProperty(i))n[i]=1;else return G("InvalidAttr","Attribute '"+i+"' is repeated.",Et(r[s]))}return!0}function Up(e,t){let r=/\d/;for(e[t]==="x"&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(r))break}return-1}function Lp(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,Up(e,t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(e[t]===";")break;return-1}return t}function G(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}function jp(e){return Vs.isName(e)}function Hp(e){return Vs.isName(e)}function ce(e,t){const r=e.substring(0,t).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function Et(e){return e.startIndex+e[1].length}var Gs={};const ou={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,r){return e}},zp=function(e){return Object.assign({},ou,e)};Gs.buildOptions=zp;Gs.defaultOptions=ou;class qp{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,r){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:r})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child})}}var Vp=qp;const Gp=Dr;function Wp(e,t){const r={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let n=1,s=!1,i=!1,o="";for(;t<e.length;t++)if(e[t]==="<"&&!i){if(s&&Zp(e,t))t+=7,[entityName,val,t]=Kp(e,t+1),val.indexOf("&")===-1&&(r[ey(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(s&&Yp(e,t))t+=8;else if(s&&Qp(e,t))t+=8;else if(s&&Jp(e,t))t+=9;else if(Xp)i=!0;else throw new Error("Invalid DOCTYPE");n++,o=""}else if(e[t]===">"){if(i?e[t-1]==="-"&&e[t-2]==="-"&&(i=!1,n--):n--,n===0)break}else e[t]==="["?s=!0:o+=e[t];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:t}}function Kp(e,t){let r="";for(;t<e.length&&e[t]!=="'"&&e[t]!=='"';t++)r+=e[t];if(r=r.trim(),r.indexOf(" ")!==-1)throw new Error("External entites are not supported");const n=e[t++];let s="";for(;t<e.length&&e[t]!==n;t++)s+=e[t];return[r,s,t]}function Xp(e,t){return e[t+1]==="!"&&e[t+2]==="-"&&e[t+3]==="-"}function Zp(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="N"&&e[t+4]==="T"&&e[t+5]==="I"&&e[t+6]==="T"&&e[t+7]==="Y"}function Yp(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="L"&&e[t+4]==="E"&&e[t+5]==="M"&&e[t+6]==="E"&&e[t+7]==="N"&&e[t+8]==="T"}function Qp(e,t){return e[t+1]==="!"&&e[t+2]==="A"&&e[t+3]==="T"&&e[t+4]==="T"&&e[t+5]==="L"&&e[t+6]==="I"&&e[t+7]==="S"&&e[t+8]==="T"}function Jp(e,t){return e[t+1]==="!"&&e[t+2]==="N"&&e[t+3]==="O"&&e[t+4]==="T"&&e[t+5]==="A"&&e[t+6]==="T"&&e[t+7]==="I"&&e[t+8]==="O"&&e[t+9]==="N"}function ey(e){if(Gp.isName(e))return e;throw new Error(`Invalid entity name ${e}`)}var ty=Wp;const ry=/^[-+]?0x[a-fA-F0-9]+$/,ny=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const sy={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function iy(e,t={}){if(t=Object.assign({},sy,t),!e||typeof e!="string")return e;let r=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(r))return e;if(t.hex&&ry.test(r))return Number.parseInt(r,16);{const n=ny.exec(r);if(n){const s=n[1],i=n[2];let o=oy(n[3]);const a=n[4]||n[6];if(!t.leadingZeros&&i.length>0&&s&&r[2]!==".")return e;if(!t.leadingZeros&&i.length>0&&!s&&r[1]!==".")return e;{const u=Number(r),c=""+u;return c.search(/[eE]/)!==-1||a?t.eNotation?u:e:r.indexOf(".")!==-1?c==="0"&&o===""||c===o||s&&c==="-"+o?u:e:i?o===c||s+o===c?u:e:r===c||r===s+c?u:e}}else return e}}function oy(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}var ay=iy;const Ws=Dr,vt=Vp,cy=ty,uy=ay;"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,Ws.nameRegexp);let ly=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""}},this.addExternalEntities=dy,this.parseXml=gy,this.parseTextData=fy,this.resolveNameSpace=hy,this.buildAttributesMap=yy,this.isItStopNode=_y,this.replaceEntitiesValue=by,this.readStopNodeData=Ey,this.saveTextToParentTag=wy,this.addChild=my}};function dy(e){const t=Object.keys(e);for(let r=0;r<t.length;r++){const n=t[r];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:e[n]}}}function fy(e,t,r,n,s,i,o){if(e!==void 0&&(this.options.trimValues&&!n&&(e=e.trim()),e.length>0)){o||(e=this.replaceEntitiesValue(e));const a=this.options.tagValueProcessor(t,e,r,s,i);return a==null?e:typeof a!=typeof e||a!==e?a:this.options.trimValues?gs(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?gs(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function hy(e){if(this.options.removeNSPrefix){const t=e.split(":"),r=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=r+t[1])}return e}const py=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function yy(e,t,r){if(!this.options.ignoreAttributes&&typeof e=="string"){const n=Ws.getAllMatches(e,py),s=n.length,i={};for(let o=0;o<s;o++){const a=this.resolveNameSpace(n[o][1]);let u=n[o][4],c=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(c=this.options.transformAttributeName(c)),c==="__proto__"&&(c="#__proto__"),u!==void 0){this.options.trimValues&&(u=u.trim()),u=this.replaceEntitiesValue(u);const l=this.options.attributeValueProcessor(a,u,t);l==null?i[c]=u:typeof l!=typeof u||l!==u?i[c]=l:i[c]=gs(u,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(i[c]=!0)}if(!Object.keys(i).length)return;if(this.options.attributesGroupName){const o={};return o[this.options.attributesGroupName]=i,o}return i}}const gy=function(e){e=e.replace(/\r\n?/g,`
`);const t=new vt("!xml");let r=t,n="",s="";for(let i=0;i<e.length;i++)if(e[i]==="<")if(e[i+1]==="/"){const a=Ye(e,">",i,"Closing Tag is not closed.");let u=e.substring(i+2,a).trim();if(this.options.removeNSPrefix){const h=u.indexOf(":");h!==-1&&(u=u.substr(h+1))}this.options.transformTagName&&(u=this.options.transformTagName(u)),r&&(n=this.saveTextToParentTag(n,r,s));const c=s.substring(s.lastIndexOf(".")+1);if(u&&this.options.unpairedTags.indexOf(u)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${u}>`);let l=0;c&&this.options.unpairedTags.indexOf(c)!==-1?(l=s.lastIndexOf(".",s.lastIndexOf(".")-1),this.tagsNodeStack.pop()):l=s.lastIndexOf("."),s=s.substring(0,l),r=this.tagsNodeStack.pop(),n="",i=a}else if(e[i+1]==="?"){let a=ys(e,i,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(n=this.saveTextToParentTag(n,r,s),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){const u=new vt(a.tagName);u.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(u[":@"]=this.buildAttributesMap(a.tagExp,s,a.tagName)),this.addChild(r,u,s)}i=a.closeIndex+1}else if(e.substr(i+1,3)==="!--"){const a=Ye(e,"-->",i+4,"Comment is not closed.");if(this.options.commentPropName){const u=e.substring(i+4,a-2);n=this.saveTextToParentTag(n,r,s),r.add(this.options.commentPropName,[{[this.options.textNodeName]:u}])}i=a}else if(e.substr(i+1,2)==="!D"){const a=cy(e,i);this.docTypeEntities=a.entities,i=a.i}else if(e.substr(i+1,2)==="!["){const a=Ye(e,"]]>",i,"CDATA is not closed.")-2,u=e.substring(i+9,a);if(n=this.saveTextToParentTag(n,r,s),this.options.cdataPropName)r.add(this.options.cdataPropName,[{[this.options.textNodeName]:u}]);else{let c=this.parseTextData(u,r.tagname,s,!0,!1,!0);c==null&&(c=""),r.add(this.options.textNodeName,c)}i=a+2}else{let a=ys(e,i,this.options.removeNSPrefix),u=a.tagName,c=a.tagExp,l=a.attrExpPresent,h=a.closeIndex;this.options.transformTagName&&(u=this.options.transformTagName(u)),r&&n&&r.tagname!=="!xml"&&(n=this.saveTextToParentTag(n,r,s,!1));const f=r;if(f&&this.options.unpairedTags.indexOf(f.tagname)!==-1&&(r=this.tagsNodeStack.pop(),s=s.substring(0,s.lastIndexOf("."))),u!==t.tagname&&(s+=s?"."+u:u),this.isItStopNode(this.options.stopNodes,s,u)){let y="";if(c.length>0&&c.lastIndexOf("/")===c.length-1)i=a.closeIndex;else if(this.options.unpairedTags.indexOf(u)!==-1)i=a.closeIndex;else{const E=this.readStopNodeData(e,u,h+1);if(!E)throw new Error(`Unexpected end of ${u}`);i=E.i,y=E.tagContent}const g=new vt(u);u!==c&&l&&(g[":@"]=this.buildAttributesMap(c,s,u)),y&&(y=this.parseTextData(y,u,s,!0,l,!0,!0)),s=s.substr(0,s.lastIndexOf(".")),g.add(this.options.textNodeName,y),this.addChild(r,g,s)}else{if(c.length>0&&c.lastIndexOf("/")===c.length-1){u[u.length-1]==="/"?(u=u.substr(0,u.length-1),c=u):c=c.substr(0,c.length-1),this.options.transformTagName&&(u=this.options.transformTagName(u));const y=new vt(u);u!==c&&l&&(y[":@"]=this.buildAttributesMap(c,s,u)),this.addChild(r,y,s),s=s.substr(0,s.lastIndexOf("."))}else{const y=new vt(u);this.tagsNodeStack.push(r),u!==c&&l&&(y[":@"]=this.buildAttributesMap(c,s,u)),this.addChild(r,y,s),r=y}n="",i=h}}else n+=e[i];return t.child};function my(e,t,r){const n=this.options.updateTag(t.tagname,r,t[":@"]);n===!1||(typeof n=="string"&&(t.tagname=n),e.addChild(t))}const by=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){const r=this.docTypeEntities[t];e=e.replace(r.regx,r.val)}for(let t in this.lastEntities){const r=this.lastEntities[t];e=e.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){const r=this.htmlEntities[t];e=e.replace(r.regex,r.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function wy(e,t,r,n){return e&&(n===void 0&&(n=Object.keys(t.child).length===0),e=this.parseTextData(e,t.tagname,r,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,n),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function _y(e,t,r){const n="*."+r;for(const s in e){const i=e[s];if(n===i||t===i)return!0}return!1}function Sy(e,t,r=">"){let n,s="";for(let i=t;i<e.length;i++){let o=e[i];if(n)o===n&&(n="");else if(o==='"'||o==="'")n=o;else if(o===r[0])if(r[1]){if(e[i+1]===r[1])return{data:s,index:i}}else return{data:s,index:i};else o==="	"&&(o=" ");s+=o}}function Ye(e,t,r,n){const s=e.indexOf(t,r);if(s===-1)throw new Error(n);return s+t.length-1}function ys(e,t,r,n=">"){const s=Sy(e,t+1,n);if(!s)return;let i=s.data;const o=s.index,a=i.search(/\s/);let u=i,c=!0;if(a!==-1&&(u=i.substr(0,a).replace(/\s\s*$/,""),i=i.substr(a+1)),r){const l=u.indexOf(":");l!==-1&&(u=u.substr(l+1),c=u!==s.data.substr(l+1))}return{tagName:u,tagExp:i,closeIndex:o,attrExpPresent:c}}function Ey(e,t,r){const n=r;let s=1;for(;r<e.length;r++)if(e[r]==="<")if(e[r+1]==="/"){const i=Ye(e,">",r,`${t} is not closed`);if(e.substring(r+2,i).trim()===t&&(s--,s===0))return{tagContent:e.substring(n,r),i};r=i}else if(e[r+1]==="?")r=Ye(e,"?>",r+1,"StopNode is not closed.");else if(e.substr(r+1,3)==="!--")r=Ye(e,"-->",r+3,"StopNode is not closed.");else if(e.substr(r+1,2)==="![")r=Ye(e,"]]>",r,"StopNode is not closed.")-2;else{const i=ys(e,r,">");i&&((i&&i.tagName)===t&&i.tagExp[i.tagExp.length-1]!=="/"&&s++,r=i.closeIndex)}}function gs(e,t,r){if(t&&typeof e=="string"){const n=e.trim();return n==="true"?!0:n==="false"?!1:uy(e,r)}else return Ws.isExist(e)?e:""}var vy=ly,au={};function xy(e,t){return cu(e,t)}function cu(e,t,r){let n;const s={};for(let i=0;i<e.length;i++){const o=e[i],a=Ay(o);let u="";if(r===void 0?u=a:u=r+"."+a,a===t.textNodeName)n===void 0?n=o[a]:n+=""+o[a];else{if(a===void 0)continue;if(o[a]){let c=cu(o[a],t,u);const l=Cy(c,t);o[":@"]?Ry(c,o[":@"],u,t):Object.keys(c).length===1&&c[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?c=c[t.textNodeName]:Object.keys(c).length===0&&(t.alwaysCreateTextNode?c[t.textNodeName]="":c=""),s[a]!==void 0&&s.hasOwnProperty(a)?(Array.isArray(s[a])||(s[a]=[s[a]]),s[a].push(c)):t.isArray(a,u,l)?s[a]=[c]:s[a]=c}}}return typeof n=="string"?n.length>0&&(s[t.textNodeName]=n):n!==void 0&&(s[t.textNodeName]=n),s}function Ay(e){const t=Object.keys(e);for(let r=0;r<t.length;r++){const n=t[r];if(n!==":@")return n}}function Ry(e,t,r,n){if(t){const s=Object.keys(t),i=s.length;for(let o=0;o<i;o++){const a=s[o];n.isArray(a,r+"."+a,!0,!0)?e[a]=[t[a]]:e[a]=t[a]}}}function Cy(e,t){const{textNodeName:r}=t,n=Object.keys(e).length;return!!(n===0||n===1&&(e[r]||typeof e[r]=="boolean"||e[r]===0))}au.prettify=xy;const{buildOptions:Py}=Gs,Ty=vy,{prettify:Oy}=au,Iy=qs;let Ny=class{constructor(t){this.externalEntities={},this.options=Py(t)}parse(t,r){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});const i=Iy.validate(t,r);if(i!==!0)throw Error(`${i.err.msg}:${i.err.line}:${i.err.col}`)}const n=new Ty(this.options);n.addExternalEntities(this.externalEntities);const s=n.parseXml(t);return this.options.preserveOrder||s===void 0?s:Oy(s,this.options)}addEntity(t,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=r}};var ky=Ny;const $y=`
`;function By(e,t){let r="";return t.format&&t.indentBy.length>0&&(r=$y),uu(e,t,"",r)}function uu(e,t,r,n){let s="",i=!1;for(let o=0;o<e.length;o++){const a=e[o],u=My(a);let c="";if(r.length===0?c=u:c=`${r}.${u}`,u===t.textNodeName){let g=a[u];Fy(c,t)||(g=t.tagValueProcessor(u,g),g=lu(g,t)),i&&(s+=n),s+=g,i=!1;continue}else if(u===t.cdataPropName){i&&(s+=n),s+=`<![CDATA[${a[u][0][t.textNodeName]}]]>`,i=!1;continue}else if(u===t.commentPropName){s+=n+`<!--${a[u][0][t.textNodeName]}-->`,i=!0;continue}else if(u[0]==="?"){const g=ho(a[":@"],t),E=u==="?xml"?"":n;let C=a[u][0][t.textNodeName];C=C.length!==0?" "+C:"",s+=E+`<${u}${C}${g}?>`,i=!0;continue}let l=n;l!==""&&(l+=t.indentBy);const h=ho(a[":@"],t),f=n+`<${u}${h}`,y=uu(a[u],t,c,l);t.unpairedTags.indexOf(u)!==-1?t.suppressUnpairedNode?s+=f+">":s+=f+"/>":(!y||y.length===0)&&t.suppressEmptyNode?s+=f+"/>":y&&y.endsWith(">")?s+=f+`>${y}${n}</${u}>`:(s+=f+">",y&&n!==""&&(y.includes("/>")||y.includes("</"))?s+=n+t.indentBy+y+n:s+=y,s+=`</${u}>`),i=!0}return s}function My(e){const t=Object.keys(e);for(let r=0;r<t.length;r++){const n=t[r];if(n!==":@")return n}}function ho(e,t){let r="";if(e&&!t.ignoreAttributes)for(let n in e){let s=t.attributeValueProcessor(n,e[n]);s=lu(s,t),s===!0&&t.suppressBooleanAttributes?r+=` ${n.substr(t.attributeNamePrefix.length)}`:r+=` ${n.substr(t.attributeNamePrefix.length)}="${s}"`}return r}function Fy(e,t){e=e.substr(0,e.length-t.textNodeName.length-1);let r=e.substr(e.lastIndexOf(".")+1);for(let n in t.stopNodes)if(t.stopNodes[n]===e||t.stopNodes[n]==="*."+r)return!0;return!1}function lu(e,t){if(e&&e.length>0&&t.processEntities)for(let r=0;r<t.entities.length;r++){const n=t.entities[r];e=e.replace(n.regex,n.val)}return e}var Dy=By;const Uy=Dy,Ly={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function Ge(e){this.options=Object.assign({},Ly,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=zy),this.processTextOrObjNode=jy,this.options.format?(this.indentate=Hy,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}Ge.prototype.build=function(e){return this.options.preserveOrder?Uy(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0).val)};Ge.prototype.j2x=function(e,t){let r="",n="";for(let s in e)if(!(typeof e[s]>"u"))if(e[s]===null)s[0]==="?"?n+=this.indentate(t)+"<"+s+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+s+"/"+this.tagEndChar;else if(e[s]instanceof Date)n+=this.buildTextValNode(e[s],s,"",t);else if(typeof e[s]!="object"){const i=this.isAttribute(s);if(i)r+=this.buildAttrPairStr(i,""+e[s]);else if(s===this.options.textNodeName){let o=this.options.tagValueProcessor(s,""+e[s]);n+=this.replaceEntitiesValue(o)}else n+=this.buildTextValNode(e[s],s,"",t)}else if(Array.isArray(e[s])){const i=e[s].length;let o="";for(let a=0;a<i;a++){const u=e[s][a];typeof u>"u"||(u===null?s[0]==="?"?n+=this.indentate(t)+"<"+s+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+s+"/"+this.tagEndChar:typeof u=="object"?this.options.oneListGroup?o+=this.j2x(u,t+1).val:o+=this.processTextOrObjNode(u,s,t):o+=this.buildTextValNode(u,s,"",t))}this.options.oneListGroup&&(o=this.buildObjectNode(o,s,"",t)),n+=o}else if(this.options.attributesGroupName&&s===this.options.attributesGroupName){const i=Object.keys(e[s]),o=i.length;for(let a=0;a<o;a++)r+=this.buildAttrPairStr(i[a],""+e[s][i[a]])}else n+=this.processTextOrObjNode(e[s],s,t);return{attrStr:r,val:n}};Ge.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t==="true"?" "+e:" "+e+'="'+t+'"'};function jy(e,t,r){const n=this.j2x(e,r+1);return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextValNode(e[this.options.textNodeName],t,n.attrStr,r):this.buildObjectNode(n.val,t,n.attrStr,r)}Ge.prototype.buildObjectNode=function(e,t,r,n){if(e==="")return t[0]==="?"?this.indentate(n)+"<"+t+r+"?"+this.tagEndChar:this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar;{let s="</"+t+this.tagEndChar,i="";return t[0]==="?"&&(i="?",s=""),r&&e.indexOf("<")===-1?this.indentate(n)+"<"+t+r+i+">"+e+s:this.options.commentPropName!==!1&&t===this.options.commentPropName&&i.length===0?this.indentate(n)+`<!--${e}-->`+this.newLine:this.indentate(n)+"<"+t+r+i+this.tagEndChar+e+this.indentate(n)+s}};Ge.prototype.closeTag=function(e){let t="";return this.options.unpairedTags.indexOf(e)!==-1?this.options.suppressUnpairedNode||(t="/"):this.options.suppressEmptyNode?t="/":t=`></${e}`,t};Ge.prototype.buildTextValNode=function(e,t,r,n){if(this.options.cdataPropName!==!1&&t===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${e}]]>`+this.newLine;if(this.options.commentPropName!==!1&&t===this.options.commentPropName)return this.indentate(n)+`<!--${e}-->`+this.newLine;if(t[0]==="?")return this.indentate(n)+"<"+t+r+"?"+this.tagEndChar;{let s=this.options.tagValueProcessor(t,e);return s=this.replaceEntitiesValue(s),s===""?this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar:this.indentate(n)+"<"+t+r+">"+s+"</"+t+this.tagEndChar}};Ge.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){const r=this.options.entities[t];e=e.replace(r.regex,r.val)}return e};function Hy(e){return this.options.indentBy.repeat(e)}function zy(e){return e.startsWith(this.options.attributeNamePrefix)?e.substr(this.attrPrefixLen):!1}var qy=Ge;const Vy=qs,Gy=ky,Wy=qy;var Ky={XMLParser:Gy,XMLValidator:Vy,XMLBuilder:Wy};const Xy=async(e,t)=>{const r=iu(e,t),n=ze({},ms,{[xg]:e[pg]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);const s=ze({[Eg]:[,""]});return r.m("GET").h(n).q(s).b(void 0),r.build()},Zy=async(e,t)=>{const r=iu(e,t),n=ze({},ms,{[Pg]:e[hg],[Ag]:e[lg],[Rg]:[()=>ms(e[po]),()=>(e[po]||[]).map(o=>o).join(", ")]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);const s=ze({[wg]:[,"2"],[gg]:[,e[fr]],[mg]:[,e[hr]],[_g]:[()=>e.MaxKeys!==void 0,()=>e[pr].toString()],[Sg]:[,e[Je]],[yg]:[,e[dr]],[bg]:[()=>e.FetchOwner!==void 0,()=>e[dg].toString()],[vg]:[,e[yr]]});return r.m("GET").h(n).q(s).b(void 0),r.build()},Yy=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Qy(e,t);const r=ze({$metadata:Ks(e)}),n=ut(sc(await Xs(e.body,t)),"body");return n[en]!=null&&(r[en]=cg(n[en])),r},Qy=async(e,t)=>{const r={...e,body:await hu(e.body,t)},n=pu(e,r.body);switch(n){case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":throw await fu(r);default:const s=r.body;return du({output:e,parsedBody:s,errorCode:n})}},Jy=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return eg(e,t);const r=ze({$metadata:Ks(e),[fg]:[,e.headers[Cg]]}),n=ut(sc(await Xs(e.body,t)),"body");return n.CommonPrefixes===""?r[or]=[]:n[or]!=null&&(r[or]=ng(ss(n[or]))),n.Contents===""?r[ar]=[]:n[ar]!=null&&(r[ar]=ig(ss(n[ar]))),n[dr]!=null&&(r[dr]=z(n[dr])),n[fr]!=null&&(r[fr]=z(n[fr])),n[hr]!=null&&(r[hr]=z(n[hr])),n[an]!=null&&(r[an]=nc(n[an])),n[un]!=null&&(r[un]=Oi(n[un])),n[pr]!=null&&(r[pr]=Oi(n[pr])),n[dn]!=null&&(r[dn]=z(n[dn])),n[fn]!=null&&(r[fn]=z(n[fn])),n[Je]!=null&&(r[Je]=z(n[Je])),n[yr]!=null&&(r[yr]=z(n[yr])),r},eg=async(e,t)=>{const r={...e,body:await hu(e.body,t)},n=pu(e,r.body);switch(n){case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":throw await fu(r);default:const s=r.body;return du({output:e,parsedBody:s,errorCode:n})}},du=cc(Fr),fu=async(e,t)=>{const r=ze({});e.body;const n=new zs({$metadata:Ks(e),...r});return ve(n,e.body)},tg=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>z(r)),rg=(e,t)=>{const r={};return e[Je]!=null&&(r[Je]=z(e[Je])),r},ng=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>rg(r)),sg=(e,t)=>{const r={};return e[cn]!=null&&(r[cn]=z(e[cn])),e[ln]!=null&&(r[ln]=ut(Ds(e[ln]))),e[rn]!=null&&(r[rn]=z(e[rn])),e.ChecksumAlgorithm===""?r[ir]=[]:e[ir]!=null&&(r[ir]=tg(ss(e[ir]))),e[wn]!=null&&(r[wn]=ed(e[wn])),e[mn]!=null&&(r[mn]=z(e[mn])),e[hn]!=null&&(r[hn]=og(e[hn])),e[yn]!=null&&(r[yn]=ag(e[yn])),r},ig=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>sg(r)),og=(e,t)=>{const r={};return e[tn]!=null&&(r[tn]=z(e[tn])),e[sn]!=null&&(r[sn]=z(e[sn])),r},ag=(e,t)=>{const r={};return e[on]!=null&&(r[on]=nc(e[on])),e[pn]!=null&&(r[pn]=ut(Ds(e[pn]))),r},cg=(e,t)=>{const r={};return e[Jr]!=null&&(r[Jr]=z(e[Jr])),e[gn]!=null&&(r[gn]=z(e[gn])),e[bn]!=null&&(r[bn]=z(e[bn])),e[nn]!=null&&(r[nn]=ut(Ds(e[nn]))),r},Ks=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),ug=(e,t)=>rc(e,t).then(r=>t.utf8Encoder(r)),ms=e=>e!=null&&e!==""&&(!Object.getOwnPropertyNames(e).includes("length")||e.length!=0)&&(!Object.getOwnPropertyNames(e).includes("size")||e.size!=0),Jr="AccessKeyId",en="Credentials",ir="ChecksumAlgorithm",or="CommonPrefixes",dr="ContinuationToken",ar="Contents",fr="Delimiter",tn="DisplayName",lg="ExpectedBucketOwner",hr="EncodingType",rn="ETag",nn="Expiration",dg="FetchOwner",sn="ID",on="IsRestoreInProgress",an="IsTruncated",cn="Key",un="KeyCount",ln="LastModified",pr="MaxKeys",dn="Name",fn="NextContinuationToken",hn="Owner",po="OptionalObjectAttributes",Je="Prefix",fg="RequestCharged",pn="RestoreExpiryDate",hg="RequestPayer",yn="RestoreStatus",yr="StartAfter",gn="SecretAccessKey",mn="StorageClass",pg="SessionMode",bn="SessionToken",wn="Size",yg="continuation-token",gg="delimiter",mg="encoding-type",bg="fetch-owner",wg="list-type",_g="max-keys",Sg="prefix",Eg="session",vg="start-after",xg="x-amz-create-session-mode",Ag="x-amz-expected-bucket-owner",Rg="x-amz-optional-object-attributes",Cg="x-amz-request-charged",Pg="x-amz-request-payer",Xs=(e,t)=>ug(e,t).then(r=>{if(r.length){const n=new Ky.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(u,c)=>c.trim()===""&&c.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);const s=n.parse(r),i="#text",o=Object.keys(s)[0],a=s[o];return a[i]&&(a[o]=a[i],delete a[i]),fc(a)}return{}}),hu=async(e,t)=>{const r=await Xs(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},pu=(e,t)=>{if((t==null?void 0:t.Code)!==void 0)return t.Code;if(e.statusCode==404)return"NotFound"};class Tg extends tr.classBuilder().ep({...su,DisableS3ExpressSessionAuth:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[Br(n,this.serialize,this.deserialize),Mr(n,t.getEndpointParameterInstructions())]}).s("AmazonS3","CreateSession",{}).n("S3Client","CreateSessionCommand").f(void 0,Np).ser(Xy).de(Yy).build(){}const Og="@aws-sdk/client-s3",Ig="AWS SDK for JavaScript S3 Client for Node.js, Browser and React Native",Ng="3.485.0",kg={build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo s3",test:"yarn test:unit","test:e2e":"yarn test:e2e:node && yarn test:e2e:browser","test:e2e:browser":"ts-mocha test/**/*.browser.ispec.ts && karma start karma.conf.js","test:e2e:node":"jest --c jest.config.e2e.js","test:unit":"ts-mocha test/unit/**/*.spec.ts"},$g="./dist-cjs/index.js",Bg="./dist-types/index.d.ts",Mg="./dist-es/index.js",Fg=!1,Dg={"@aws-crypto/sha1-browser":"3.0.0","@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sts":"3.485.0","@aws-sdk/core":"3.485.0","@aws-sdk/credential-provider-node":"3.485.0","@aws-sdk/middleware-bucket-endpoint":"3.485.0","@aws-sdk/middleware-expect-continue":"3.485.0","@aws-sdk/middleware-flexible-checksums":"3.485.0","@aws-sdk/middleware-host-header":"3.485.0","@aws-sdk/middleware-location-constraint":"3.485.0","@aws-sdk/middleware-logger":"3.485.0","@aws-sdk/middleware-recursion-detection":"3.485.0","@aws-sdk/middleware-sdk-s3":"3.485.0","@aws-sdk/middleware-signing":"3.485.0","@aws-sdk/middleware-ssec":"3.485.0","@aws-sdk/middleware-user-agent":"3.485.0","@aws-sdk/region-config-resolver":"3.485.0","@aws-sdk/signature-v4-multi-region":"3.485.0","@aws-sdk/types":"3.485.0","@aws-sdk/util-endpoints":"3.485.0","@aws-sdk/util-user-agent-browser":"3.485.0","@aws-sdk/util-user-agent-node":"3.485.0","@aws-sdk/xml-builder":"3.485.0","@smithy/config-resolver":"^2.0.23","@smithy/core":"^1.2.2","@smithy/eventstream-serde-browser":"^2.0.16","@smithy/eventstream-serde-config-resolver":"^2.0.16","@smithy/eventstream-serde-node":"^2.0.16","@smithy/fetch-http-handler":"^2.3.2","@smithy/hash-blob-browser":"^2.0.17","@smithy/hash-node":"^2.0.18","@smithy/hash-stream-node":"^2.0.18","@smithy/invalid-dependency":"^2.0.16","@smithy/md5-js":"^2.0.18","@smithy/middleware-content-length":"^2.0.18","@smithy/middleware-endpoint":"^2.3.0","@smithy/middleware-retry":"^2.0.26","@smithy/middleware-serde":"^2.0.16","@smithy/middleware-stack":"^2.0.10","@smithy/node-config-provider":"^2.1.9","@smithy/node-http-handler":"^2.2.2","@smithy/protocol-http":"^3.0.12","@smithy/smithy-client":"^2.2.1","@smithy/types":"^2.8.0","@smithy/url-parser":"^2.0.16","@smithy/util-base64":"^2.0.1","@smithy/util-body-length-browser":"^2.0.1","@smithy/util-body-length-node":"^2.1.0","@smithy/util-defaults-mode-browser":"^2.0.24","@smithy/util-defaults-mode-node":"^2.0.32","@smithy/util-endpoints":"^1.0.8","@smithy/util-retry":"^2.0.9","@smithy/util-stream":"^2.0.24","@smithy/util-utf8":"^2.0.2","@smithy/util-waiter":"^2.0.16","fast-xml-parser":"4.2.5",tslib:"^2.5.0"},Ug={"@smithy/service-client-documentation-generator":"^2.0.0","@tsconfig/node14":"1.0.3","@types/chai":"^4.2.11","@types/mocha":"^8.0.4","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},Lg={node:">=14.0.0"},jg={"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},Hg=["dist-*/**"],zg={name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},qg="Apache-2.0",Vg={"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},Gg="https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-s3",Wg={type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-s3"},Kg={name:Og,description:Ig,version:Ng,scripts:kg,main:$g,types:Bg,module:Mg,sideEffects:Fg,dependencies:Dg,devDependencies:Ug,engines:Lg,typesVersions:jg,files:Hg,author:zg,license:qg,browser:Vg,"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:Gg,repository:Wg};var yu={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var bs=function(e,t){return bs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},bs(e,t)};function Xg(e,t){bs(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var ws=function(){return ws=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},ws.apply(this,arguments)};function Zg(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function Yg(e,t,r,n){var s=arguments.length,i=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}function Qg(e,t){return function(r,n){t(r,n,e)}}function Jg(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function em(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(h){o(h)}}function u(l){try{c(n.throw(l))}catch(h){o(h)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(e,t||[])).next())})}function tm(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(l){c=[6,l],s=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function rm(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}function nm(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function _s(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function gu(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function sm(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(gu(arguments[t]));return e}function im(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),s=0,t=0;t<r;t++)for(var i=arguments[t],o=0,a=i.length;o<a;o++,s++)n[s]=i[o];return n}function Kt(e){return this instanceof Kt?(this.v=e,this):new Kt(e)}function om(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(f){n[f]&&(s[f]=function(y){return new Promise(function(g,E){i.push([f,y,g,E])>1||a(f,y)})})}function a(f,y){try{u(n[f](y))}catch(g){h(i[0][3],g)}}function u(f){f.value instanceof Kt?Promise.resolve(f.value.v).then(c,l):h(i[0][2],f)}function c(f){a("next",f)}function l(f){a("throw",f)}function h(f,y){f(y),i.shift(),i.length&&a(i[0][0],i[0][1])}}function am(e){var t,r;return t={},n("next"),n("throw",function(s){throw s}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(s,i){t[s]=e[s]?function(o){return(r=!r)?{value:Kt(e[s](o)),done:s==="return"}:i?i(o):o}:i}}function cm(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof _s=="function"?_s(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(o){return new Promise(function(a,u){o=e[i](o),s(a,u,o.done,o.value)})}}function s(i,o,a,u){Promise.resolve(u).then(function(c){i({value:c,done:a})},o)}}function um(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function lm(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function dm(e){return e&&e.__esModule?e:{default:e}}function fm(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function hm(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}const pm=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return ws},__asyncDelegator:am,__asyncGenerator:om,__asyncValues:cm,__await:Kt,__awaiter:em,__classPrivateFieldGet:fm,__classPrivateFieldSet:hm,__createBinding:rm,__decorate:Yg,__exportStar:nm,__extends:Xg,__generator:tm,__importDefault:dm,__importStar:lm,__makeTemplateObject:um,__metadata:Jg,__param:Qg,__read:gu,__rest:Zg,__spread:sm,__spreadArrays:im,__values:_s},Symbol.toStringTag,{value:"Module"})),ym=Ve(pm);var xt={},At={},Rt={},yo;function mu(){if(yo)return Rt;yo=1,Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.isEmptyData=void 0;function e(t){return typeof t=="string"?t.length===0:t.byteLength===0}return Rt.isEmptyData=e,Rt}var _n={},go;function bu(){return go||(go=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_DATA_SHA_1=e.SHA_1_HMAC_ALGO=e.SHA_1_HASH=void 0,e.SHA_1_HASH={name:"SHA-1"},e.SHA_1_HMAC_ALGO={name:"HMAC",hash:e.SHA_1_HASH},e.EMPTY_DATA_SHA_1=new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9])}(_n)),_n}const gm={};function mm(){return typeof window<"u"?window:typeof self<"u"?self:gm}const bm=Object.freeze(Object.defineProperty({__proto__:null,locateWindow:mm},Symbol.toStringTag,{value:"Module"})),ht=Ve(bm);var mo;function wu(){if(mo)return At;mo=1,Object.defineProperty(At,"__esModule",{value:!0}),At.Sha1=void 0;var e=mu(),t=bu(),r=kr,n=ht,s=function(){function a(u){this.secret=u,this.reset()}return a.prototype.update=function(u){var c=this;(0,e.isEmptyData)(u)||(this.operation=this.operation.then(function(l){return l.onerror=function(){c.operation=Promise.reject(new Error("Error encountered updating hash"))},l.process(o(u)),l}),this.operation.catch(function(){}))},a.prototype.digest=function(){return this.operation.then(function(u){return new Promise(function(c,l){u.onerror=function(){l(new Error("Error encountered finalizing hash"))},u.oncomplete=function(){u.result&&c(new Uint8Array(u.result)),l(new Error("Error encountered finalizing hash"))},u.finish()})})},a.prototype.reset=function(){this.secret?(this.operation=i(this.secret).then(function(u){return(0,n.locateWindow)().msCrypto.subtle.sign(t.SHA_1_HMAC_ALGO,u)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,n.locateWindow)().msCrypto.subtle.digest("SHA-1"))},a}();At.Sha1=s;function i(a){return new Promise(function(u,c){var l=(0,n.locateWindow)().msCrypto.subtle.importKey("raw",o(a),t.SHA_1_HMAC_ALGO,!1,["sign"]);l.oncomplete=function(){l.result&&u(l.result),c(new Error("ImportKey completed without importing key."))},l.onerror=function(){c(new Error("ImportKey failed to import key."))}})}function o(a){return typeof a=="string"?(0,r.fromUtf8)(a):ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(a)}return At}var Ct={},bo;function _u(){if(bo)return Ct;bo=1,Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.Sha1=void 0;var e=kr,t=mu(),r=bu(),n=ht,s=function(){function o(a){this.toHash=new Uint8Array(0),a!==void 0&&(this.key=new Promise(function(u,c){(0,n.locateWindow)().crypto.subtle.importKey("raw",i(a),r.SHA_1_HMAC_ALGO,!1,["sign"]).then(u,c)}),this.key.catch(function(){}))}return o.prototype.update=function(a){if(!(0,t.isEmptyData)(a)){var u=i(a),c=new Uint8Array(this.toHash.byteLength+u.byteLength);c.set(this.toHash,0),c.set(u,this.toHash.byteLength),this.toHash=c}},o.prototype.digest=function(){var a=this;return this.key?this.key.then(function(u){return(0,n.locateWindow)().crypto.subtle.sign(r.SHA_1_HMAC_ALGO,u,a.toHash).then(function(c){return new Uint8Array(c)})}):(0,t.isEmptyData)(this.toHash)?Promise.resolve(r.EMPTY_DATA_SHA_1):Promise.resolve().then(function(){return(0,n.locateWindow)().crypto.subtle.digest(r.SHA_1_HASH,a.toHash)}).then(function(u){return Promise.resolve(new Uint8Array(u))})},o.prototype.reset=function(){this.toHash=new Uint8Array(0)},o}();Ct.Sha1=s;function i(o){return typeof o=="string"?(0,e.fromUtf8)(o):ArrayBuffer.isView(o)?new Uint8Array(o.buffer,o.byteOffset,o.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(o)}return Ct}var Sn={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ss=function(e,t){return Ss=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},Ss(e,t)};function wm(e,t){Ss(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Es=function(){return Es=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Es.apply(this,arguments)};function _m(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function Sm(e,t,r,n){var s=arguments.length,i=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}function Em(e,t){return function(r,n){t(r,n,e)}}function vm(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function xm(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(h){o(h)}}function u(l){try{c(n.throw(l))}catch(h){o(h)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(e,t||[])).next())})}function Am(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(l){c=[6,l],s=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Rm(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}function Cm(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function vs(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Su(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function Pm(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Su(arguments[t]));return e}function Tm(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),s=0,t=0;t<r;t++)for(var i=arguments[t],o=0,a=i.length;o<a;o++,s++)n[s]=i[o];return n}function Xt(e){return this instanceof Xt?(this.v=e,this):new Xt(e)}function Om(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(f){n[f]&&(s[f]=function(y){return new Promise(function(g,E){i.push([f,y,g,E])>1||a(f,y)})})}function a(f,y){try{u(n[f](y))}catch(g){h(i[0][3],g)}}function u(f){f.value instanceof Xt?Promise.resolve(f.value.v).then(c,l):h(i[0][2],f)}function c(f){a("next",f)}function l(f){a("throw",f)}function h(f,y){f(y),i.shift(),i.length&&a(i[0][0],i[0][1])}}function Im(e){var t,r;return t={},n("next"),n("throw",function(s){throw s}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(s,i){t[s]=e[s]?function(o){return(r=!r)?{value:Xt(e[s](o)),done:s==="return"}:i?i(o):o}:i}}function Nm(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof vs=="function"?vs(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(o){return new Promise(function(a,u){o=e[i](o),s(a,u,o.done,o.value)})}}function s(i,o,a,u){Promise.resolve(u).then(function(c){i({value:c,done:a})},o)}}function km(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function $m(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function Bm(e){return e&&e.__esModule?e:{default:e}}function Mm(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function Fm(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}const Dm=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Es},__asyncDelegator:Im,__asyncGenerator:Om,__asyncValues:Nm,__await:Xt,__awaiter:xm,__classPrivateFieldGet:Mm,__classPrivateFieldSet:Fm,__createBinding:Rm,__decorate:Sm,__exportStar:Cm,__extends:wm,__generator:Am,__importDefault:Bm,__importStar:$m,__makeTemplateObject:km,__metadata:vm,__param:Em,__read:Su,__rest:_m,__spread:Pm,__spreadArrays:Tm,__values:vs},Symbol.toStringTag,{value:"Module"})),Eu=Ve(Dm);var we={},wo;function Um(){if(wo)return we;wo=1,Object.defineProperty(we,"__esModule",{value:!0}),we.supportsZeroByteGCM=we.supportsSubtleCrypto=we.supportsSecureRandom=we.supportsWebCrypto=void 0;var e=Eu,t=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function r(o){if(n(o)&&typeof o.crypto.subtle=="object"){var a=o.crypto.subtle;return s(a)}return!1}we.supportsWebCrypto=r;function n(o){if(typeof o=="object"&&typeof o.crypto=="object"){var a=o.crypto.getRandomValues;return typeof a=="function"}return!1}we.supportsSecureRandom=n;function s(o){return o&&t.every(function(a){return typeof o[a]=="function"})}we.supportsSubtleCrypto=s;function i(o){return e.__awaiter(this,void 0,void 0,function(){var a,u;return e.__generator(this,function(c){switch(c.label){case 0:if(!s(o))return[2,!1];c.label=1;case 1:return c.trys.push([1,4,,5]),[4,o.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return a=c.sent(),[4,o.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},a,new Uint8Array(0))];case 3:return u=c.sent(),[2,u.byteLength===16];case 4:return c.sent(),[2,!1];case 5:return[2]}})})}return we.supportsZeroByteGCM=i,we}var _o;function vu(){return _o||(_o=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Eu;t.__exportStar(Um(),e)}(Sn)),Sn}var En={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var xs=function(e,t){return xs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},xs(e,t)};function Lm(e,t){xs(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var As=function(){return As=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},As.apply(this,arguments)};function jm(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function Hm(e,t,r,n){var s=arguments.length,i=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}function zm(e,t){return function(r,n){t(r,n,e)}}function qm(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Vm(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(h){o(h)}}function u(l){try{c(n.throw(l))}catch(h){o(h)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(e,t||[])).next())})}function Gm(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(l){c=[6,l],s=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Wm(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}function Km(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function Rs(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function xu(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function Xm(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(xu(arguments[t]));return e}function Zm(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),s=0,t=0;t<r;t++)for(var i=arguments[t],o=0,a=i.length;o<a;o++,s++)n[s]=i[o];return n}function Zt(e){return this instanceof Zt?(this.v=e,this):new Zt(e)}function Ym(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(f){n[f]&&(s[f]=function(y){return new Promise(function(g,E){i.push([f,y,g,E])>1||a(f,y)})})}function a(f,y){try{u(n[f](y))}catch(g){h(i[0][3],g)}}function u(f){f.value instanceof Zt?Promise.resolve(f.value.v).then(c,l):h(i[0][2],f)}function c(f){a("next",f)}function l(f){a("throw",f)}function h(f,y){f(y),i.shift(),i.length&&a(i[0][0],i[0][1])}}function Qm(e){var t,r;return t={},n("next"),n("throw",function(s){throw s}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(s,i){t[s]=e[s]?function(o){return(r=!r)?{value:Zt(e[s](o)),done:s==="return"}:i?i(o):o}:i}}function Jm(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Rs=="function"?Rs(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(o){return new Promise(function(a,u){o=e[i](o),s(a,u,o.done,o.value)})}}function s(i,o,a,u){Promise.resolve(u).then(function(c){i({value:c,done:a})},o)}}function e0(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function t0(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function r0(e){return e&&e.__esModule?e:{default:e}}function n0(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function s0(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}const i0=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return As},__asyncDelegator:Qm,__asyncGenerator:Ym,__asyncValues:Jm,__await:Zt,__awaiter:Vm,__classPrivateFieldGet:n0,__classPrivateFieldSet:s0,__createBinding:Wm,__decorate:Hm,__exportStar:Km,__extends:Lm,__generator:Gm,__importDefault:r0,__importStar:t0,__makeTemplateObject:e0,__metadata:qm,__param:zm,__read:xu,__rest:jm,__spread:Xm,__spreadArrays:Zm,__values:Rs},Symbol.toStringTag,{value:"Module"})),o0=Ve(i0);var vn={},So;function a0(){return So||(So=1,Object.defineProperty(vn,"__esModule",{value:!0})),vn}var xn={},Eo;function c0(){return Eo||(Eo=1,Object.defineProperty(xn,"__esModule",{value:!0})),xn}var An={},vo;function u0(){return vo||(vo=1,Object.defineProperty(An,"__esModule",{value:!0})),An}var Rn={},xo;function l0(){return xo||(xo=1,Object.defineProperty(Rn,"__esModule",{value:!0})),Rn}var Pt={},Ao;function d0(){if(Ao)return Pt;Ao=1,Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.isMsWindow=void 0;var e=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function t(n){return"MSInputMethodContext"in n&&"msCrypto"in n}function r(n){if(t(n)&&n.msCrypto.subtle!==void 0){var s=n.msCrypto,i=s.getRandomValues,o=s.subtle;return e.map(function(a){return o[a]}).concat(i).every(function(a){return typeof a=="function"})}return!1}return Pt.isMsWindow=r,Pt}var Ro;function Au(){return Ro||(Ro=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=o0;t.__exportStar(a0(),e),t.__exportStar(c0(),e),t.__exportStar(u0(),e),t.__exportStar(l0(),e),t.__exportStar(d0(),e)}(En)),En}var Co;function f0(){if(Co)return xt;Co=1,Object.defineProperty(xt,"__esModule",{value:!0}),xt.Sha1=void 0;var e=wu(),t=_u(),r=vu(),n=Au(),s=ht,i=dt(),o=function(){function a(u){if((0,r.supportsWebCrypto)((0,s.locateWindow)()))this.hash=new t.Sha1(u);else if((0,n.isMsWindow)((0,s.locateWindow)()))this.hash=new e.Sha1(u);else throw new Error("SHA1 not supported")}return a.prototype.update=function(u,c){this.hash.update((0,i.convertToBuffer)(u))},a.prototype.digest=function(){return this.hash.digest()},a.prototype.reset=function(){this.hash.reset()},a}();return xt.Sha1=o,xt}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WebCryptoSha1=e.Ie11Sha1=void 0;var t=ym;t.__exportStar(f0(),e);var r=wu();Object.defineProperty(e,"Ie11Sha1",{enumerable:!0,get:function(){return r.Sha1}});var n=_u();Object.defineProperty(e,"WebCryptoSha1",{enumerable:!0,get:function(){return n.Sha1}})})(yu);var Zs={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Cs=function(e,t){return Cs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},Cs(e,t)};function h0(e,t){Cs(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Ps=function(){return Ps=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Ps.apply(this,arguments)};function p0(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function y0(e,t,r,n){var s=arguments.length,i=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}function g0(e,t){return function(r,n){t(r,n,e)}}function m0(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function b0(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(h){o(h)}}function u(l){try{c(n.throw(l))}catch(h){o(h)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(e,t||[])).next())})}function w0(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(l){c=[6,l],s=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function _0(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}function S0(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function Ts(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ru(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function E0(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ru(arguments[t]));return e}function v0(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),s=0,t=0;t<r;t++)for(var i=arguments[t],o=0,a=i.length;o<a;o++,s++)n[s]=i[o];return n}function Yt(e){return this instanceof Yt?(this.v=e,this):new Yt(e)}function x0(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(f){n[f]&&(s[f]=function(y){return new Promise(function(g,E){i.push([f,y,g,E])>1||a(f,y)})})}function a(f,y){try{u(n[f](y))}catch(g){h(i[0][3],g)}}function u(f){f.value instanceof Yt?Promise.resolve(f.value.v).then(c,l):h(i[0][2],f)}function c(f){a("next",f)}function l(f){a("throw",f)}function h(f,y){f(y),i.shift(),i.length&&a(i[0][0],i[0][1])}}function A0(e){var t,r;return t={},n("next"),n("throw",function(s){throw s}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(s,i){t[s]=e[s]?function(o){return(r=!r)?{value:Yt(e[s](o)),done:s==="return"}:i?i(o):o}:i}}function R0(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Ts=="function"?Ts(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(o){return new Promise(function(a,u){o=e[i](o),s(a,u,o.done,o.value)})}}function s(i,o,a,u){Promise.resolve(u).then(function(c){i({value:c,done:a})},o)}}function C0(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function P0(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function T0(e){return e&&e.__esModule?e:{default:e}}function O0(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function I0(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}const N0=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Ps},__asyncDelegator:A0,__asyncGenerator:x0,__asyncValues:R0,__await:Yt,__awaiter:b0,__classPrivateFieldGet:O0,__classPrivateFieldSet:I0,__createBinding:_0,__decorate:y0,__exportStar:S0,__extends:h0,__generator:w0,__importDefault:T0,__importStar:P0,__makeTemplateObject:C0,__metadata:m0,__param:g0,__read:Ru,__rest:p0,__spread:E0,__spreadArrays:v0,__values:Ts},Symbol.toStringTag,{value:"Module"})),k0=Ve(N0);var Tt={},Ot={},It={},Po;function $0(){if(Po)return It;Po=1,Object.defineProperty(It,"__esModule",{value:!0}),It.isEmptyData=void 0;function e(t){return typeof t=="string"?t.length===0:t.byteLength===0}return It.isEmptyData=e,It}var Cn={},To;function Cu(){return To||(To=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_DATA_SHA_256=e.SHA_256_HMAC_ALGO=e.SHA_256_HASH=void 0,e.SHA_256_HASH={name:"SHA-256"},e.SHA_256_HMAC_ALGO={name:"HMAC",hash:e.SHA_256_HASH},e.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])}(Cn)),Cn}var Oo;function Pu(){if(Oo)return Ot;Oo=1,Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.Sha256=void 0;var e=$0(),t=Cu(),r=kr,n=ht,s=function(){function a(u){this.secret=u,this.reset()}return a.prototype.update=function(u){var c=this;(0,e.isEmptyData)(u)||(this.operation=this.operation.then(function(l){return l.onerror=function(){c.operation=Promise.reject(new Error("Error encountered updating hash"))},l.process(o(u)),l}),this.operation.catch(function(){}))},a.prototype.digest=function(){return this.operation.then(function(u){return new Promise(function(c,l){u.onerror=function(){l(new Error("Error encountered finalizing hash"))},u.oncomplete=function(){u.result&&c(new Uint8Array(u.result)),l(new Error("Error encountered finalizing hash"))},u.finish()})})},a.prototype.reset=function(){this.secret?(this.operation=i(this.secret).then(function(u){return(0,n.locateWindow)().msCrypto.subtle.sign(t.SHA_256_HMAC_ALGO,u)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,n.locateWindow)().msCrypto.subtle.digest("SHA-256"))},a}();Ot.Sha256=s;function i(a){return new Promise(function(u,c){var l=(0,n.locateWindow)().msCrypto.subtle.importKey("raw",o(a),t.SHA_256_HMAC_ALGO,!1,["sign"]);l.oncomplete=function(){l.result&&u(l.result),c(new Error("ImportKey completed without importing key."))},l.onerror=function(){c(new Error("ImportKey failed to import key."))}})}function o(a){return typeof a=="string"?(0,r.fromUtf8)(a):ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(a)}return Ot}var Nt={},Io;function Tu(){if(Io)return Nt;Io=1,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.Sha256=void 0;var e=dt(),t=Cu(),r=ht,n=function(){function s(i){this.toHash=new Uint8Array(0),this.secret=i,this.reset()}return s.prototype.update=function(i){if(!(0,e.isEmptyData)(i)){var o=(0,e.convertToBuffer)(i),a=new Uint8Array(this.toHash.byteLength+o.byteLength);a.set(this.toHash,0),a.set(o,this.toHash.byteLength),this.toHash=a}},s.prototype.digest=function(){var i=this;return this.key?this.key.then(function(o){return(0,r.locateWindow)().crypto.subtle.sign(t.SHA_256_HMAC_ALGO,o,i.toHash).then(function(a){return new Uint8Array(a)})}):(0,e.isEmptyData)(this.toHash)?Promise.resolve(t.EMPTY_DATA_SHA_256):Promise.resolve().then(function(){return(0,r.locateWindow)().crypto.subtle.digest(t.SHA_256_HASH,i.toHash)}).then(function(o){return Promise.resolve(new Uint8Array(o))})},s.prototype.reset=function(){var i=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(o,a){(0,r.locateWindow)().crypto.subtle.importKey("raw",(0,e.convertToBuffer)(i.secret),t.SHA_256_HMAC_ALGO,!1,["sign"]).then(o,a)}),this.key.catch(function(){}))},s}();return Nt.Sha256=n,Nt}var Pn={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Os=function(e,t){return Os=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},Os(e,t)};function B0(e,t){Os(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Is=function(){return Is=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Is.apply(this,arguments)};function M0(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function F0(e,t,r,n){var s=arguments.length,i=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}function D0(e,t){return function(r,n){t(r,n,e)}}function U0(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function L0(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(h){o(h)}}function u(l){try{c(n.throw(l))}catch(h){o(h)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(e,t||[])).next())})}function j0(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(l){c=[6,l],s=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function H0(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}function z0(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function Ns(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ou(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function q0(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ou(arguments[t]));return e}function V0(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),s=0,t=0;t<r;t++)for(var i=arguments[t],o=0,a=i.length;o<a;o++,s++)n[s]=i[o];return n}function Qt(e){return this instanceof Qt?(this.v=e,this):new Qt(e)}function G0(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(f){n[f]&&(s[f]=function(y){return new Promise(function(g,E){i.push([f,y,g,E])>1||a(f,y)})})}function a(f,y){try{u(n[f](y))}catch(g){h(i[0][3],g)}}function u(f){f.value instanceof Qt?Promise.resolve(f.value.v).then(c,l):h(i[0][2],f)}function c(f){a("next",f)}function l(f){a("throw",f)}function h(f,y){f(y),i.shift(),i.length&&a(i[0][0],i[0][1])}}function W0(e){var t,r;return t={},n("next"),n("throw",function(s){throw s}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(s,i){t[s]=e[s]?function(o){return(r=!r)?{value:Qt(e[s](o)),done:s==="return"}:i?i(o):o}:i}}function K0(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Ns=="function"?Ns(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(o){return new Promise(function(a,u){o=e[i](o),s(a,u,o.done,o.value)})}}function s(i,o,a,u){Promise.resolve(u).then(function(c){i({value:c,done:a})},o)}}function X0(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function Z0(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function Y0(e){return e&&e.__esModule?e:{default:e}}function Q0(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function J0(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}const eb=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Is},__asyncDelegator:W0,__asyncGenerator:G0,__asyncValues:K0,__await:Qt,__awaiter:L0,__classPrivateFieldGet:Q0,__classPrivateFieldSet:J0,__createBinding:H0,__decorate:F0,__exportStar:z0,__extends:B0,__generator:j0,__importDefault:Y0,__importStar:Z0,__makeTemplateObject:X0,__metadata:U0,__param:D0,__read:Ou,__rest:M0,__spread:q0,__spreadArrays:V0,__values:Ns},Symbol.toStringTag,{value:"Module"})),Iu=Ve(eb);var kt={},he={},No;function Nu(){return No||(No=1,Object.defineProperty(he,"__esModule",{value:!0}),he.MAX_HASHABLE_LENGTH=he.INIT=he.KEY=he.DIGEST_LENGTH=he.BLOCK_SIZE=void 0,he.BLOCK_SIZE=64,he.DIGEST_LENGTH=32,he.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),he.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],he.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1),he}var $t={},ko;function tb(){if(ko)return $t;ko=1,Object.defineProperty($t,"__esModule",{value:!0}),$t.RawSha256=void 0;var e=Nu(),t=function(){function r(){this.state=Int32Array.from(e.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return r.prototype.update=function(n){if(this.finished)throw new Error("Attempted to update an already finished hash.");var s=0,i=n.byteLength;if(this.bytesHashed+=i,this.bytesHashed*8>e.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;i>0;)this.buffer[this.bufferLength++]=n[s++],i--,this.bufferLength===e.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},r.prototype.digest=function(){if(!this.finished){var n=this.bytesHashed*8,s=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),i=this.bufferLength;if(s.setUint8(this.bufferLength++,128),i%e.BLOCK_SIZE>=e.BLOCK_SIZE-8){for(var o=this.bufferLength;o<e.BLOCK_SIZE;o++)s.setUint8(o,0);this.hashBuffer(),this.bufferLength=0}for(var o=this.bufferLength;o<e.BLOCK_SIZE-8;o++)s.setUint8(o,0);s.setUint32(e.BLOCK_SIZE-8,Math.floor(n/4294967296),!0),s.setUint32(e.BLOCK_SIZE-4,n),this.hashBuffer(),this.finished=!0}for(var a=new Uint8Array(e.DIGEST_LENGTH),o=0;o<8;o++)a[o*4]=this.state[o]>>>24&255,a[o*4+1]=this.state[o]>>>16&255,a[o*4+2]=this.state[o]>>>8&255,a[o*4+3]=this.state[o]>>>0&255;return a},r.prototype.hashBuffer=function(){for(var n=this,s=n.buffer,i=n.state,o=i[0],a=i[1],u=i[2],c=i[3],l=i[4],h=i[5],f=i[6],y=i[7],g=0;g<e.BLOCK_SIZE;g++){if(g<16)this.temp[g]=(s[g*4]&255)<<24|(s[g*4+1]&255)<<16|(s[g*4+2]&255)<<8|s[g*4+3]&255;else{var E=this.temp[g-2],C=(E>>>17|E<<15)^(E>>>19|E<<13)^E>>>10;E=this.temp[g-15];var N=(E>>>7|E<<25)^(E>>>18|E<<14)^E>>>3;this.temp[g]=(C+this.temp[g-7]|0)+(N+this.temp[g-16]|0)}var D=(((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))+(l&h^~l&f)|0)+(y+(e.KEY[g]+this.temp[g]|0)|0)|0,X=((o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10))+(o&a^o&u^a&u)|0;y=f,f=h,h=l,l=c+D|0,c=u,u=a,a=o,o=D+X|0}i[0]+=o,i[1]+=a,i[2]+=u,i[3]+=c,i[4]+=l,i[5]+=h,i[6]+=f,i[7]+=y},r}();return $t.RawSha256=t,$t}var $o;function rb(){if($o)return kt;$o=1,Object.defineProperty(kt,"__esModule",{value:!0}),kt.Sha256=void 0;var e=Iu,t=Nu(),r=tb(),n=dt(),s=function(){function o(a){this.secret=a,this.hash=new r.RawSha256,this.reset()}return o.prototype.update=function(a){if(!((0,n.isEmptyData)(a)||this.error))try{this.hash.update((0,n.convertToBuffer)(a))}catch(u){this.error=u}},o.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},o.prototype.digest=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(a){return[2,this.digestSync()]})})},o.prototype.reset=function(){if(this.hash=new r.RawSha256,this.secret){this.outer=new r.RawSha256;var a=i(this.secret),u=new Uint8Array(t.BLOCK_SIZE);u.set(a);for(var c=0;c<t.BLOCK_SIZE;c++)a[c]^=54,u[c]^=92;this.hash.update(a),this.outer.update(u);for(var c=0;c<a.byteLength;c++)a[c]=0}},o}();kt.Sha256=s;function i(o){var a=(0,n.convertToBuffer)(o);if(a.byteLength>t.BLOCK_SIZE){var u=new r.RawSha256;u.update(a),a=u.digest()}var c=new Uint8Array(t.BLOCK_SIZE);return c.set(a),c}return kt}var Bo;function nb(){return Bo||(Bo=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Iu;t.__exportStar(rb(),e)}(Pn)),Pn}var Mo;function sb(){if(Mo)return Tt;Mo=1,Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.Sha256=void 0;var e=Pu(),t=Tu(),r=nb(),n=vu(),s=Au(),i=ht,o=dt(),a=function(){function u(c){(0,n.supportsWebCrypto)((0,i.locateWindow)())?this.hash=new t.Sha256(c):(0,s.isMsWindow)((0,i.locateWindow)())?this.hash=new e.Sha256(c):this.hash=new r.Sha256(c)}return u.prototype.update=function(c,l){this.hash.update((0,o.convertToBuffer)(c))},u.prototype.digest=function(){return this.hash.digest()},u.prototype.reset=function(){this.hash.reset()},u}();return Tt.Sha256=a,Tt}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WebCryptoSha256=e.Ie11Sha256=void 0;var t=k0;t.__exportStar(sb(),e);var r=Pu();Object.defineProperty(e,"Ie11Sha256",{enumerable:!0,get:function(){return r.Sha256}});var n=Tu();Object.defineProperty(e,"WebCryptoSha256",{enumerable:!0,get:function(){return n.Sha256}})})(Zs);const ib={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},ku={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},j={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},ie={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},je={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class w{static getFirstMatch(t,r){const n=r.match(t);return n&&n.length>0&&n[1]||""}static getSecondMatch(t,r){const n=r.match(t);return n&&n.length>1&&n[2]||""}static matchAndReturnConst(t,r,n){if(t.test(r))return n}static getWindowsVersionName(t){switch(t){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(t){const r=t.split(".").splice(0,2).map(n=>parseInt(n,10)||0);if(r.push(0),r[0]===10)switch(r[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(t){const r=t.split(".").splice(0,2).map(n=>parseInt(n,10)||0);if(r.push(0),!(r[0]===1&&r[1]<5)){if(r[0]===1&&r[1]<6)return"Cupcake";if(r[0]===1&&r[1]>=6)return"Donut";if(r[0]===2&&r[1]<2)return"Eclair";if(r[0]===2&&r[1]===2)return"Froyo";if(r[0]===2&&r[1]>2)return"Gingerbread";if(r[0]===3)return"Honeycomb";if(r[0]===4&&r[1]<1)return"Ice Cream Sandwich";if(r[0]===4&&r[1]<4)return"Jelly Bean";if(r[0]===4&&r[1]>=4)return"KitKat";if(r[0]===5)return"Lollipop";if(r[0]===6)return"Marshmallow";if(r[0]===7)return"Nougat";if(r[0]===8)return"Oreo";if(r[0]===9)return"Pie"}}static getVersionPrecision(t){return t.split(".").length}static compareVersions(t,r,n=!1){const s=w.getVersionPrecision(t),i=w.getVersionPrecision(r);let o=Math.max(s,i),a=0;const u=w.map([t,r],c=>{const l=o-w.getVersionPrecision(c),h=c+new Array(l+1).join(".0");return w.map(h.split("."),f=>new Array(20-f.length).join("0")+f).reverse()});for(n&&(a=o-Math.min(s,i)),o-=1;o>=a;){if(u[0][o]>u[1][o])return 1;if(u[0][o]===u[1][o]){if(o===a)return 0;o-=1}else if(u[0][o]<u[1][o])return-1}}static map(t,r){const n=[];let s;if(Array.prototype.map)return Array.prototype.map.call(t,r);for(s=0;s<t.length;s+=1)n.push(r(t[s]));return n}static find(t,r){let n,s;if(Array.prototype.find)return Array.prototype.find.call(t,r);for(n=0,s=t.length;n<s;n+=1){const i=t[n];if(r(i,n))return i}}static assign(t,...r){const n=t;let s,i;if(Object.assign)return Object.assign(t,...r);for(s=0,i=r.length;s<i;s+=1){const o=r[s];typeof o=="object"&&o!==null&&Object.keys(o).forEach(u=>{n[u]=o[u]})}return t}static getBrowserAlias(t){return ib[t]}static getBrowserTypeByAlias(t){return ku[t]||""}}const B=/version\/(\d+(\.?_?\d+)+)/i,ob=[{test:[/googlebot/i],describe(e){const t={name:"Googlebot"},r=w.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||w.getFirstMatch(B,e);return r&&(t.version=r),t}},{test:[/opera/i],describe(e){const t={name:"Opera"},r=w.getFirstMatch(B,e)||w.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\/|opios/i],describe(e){const t={name:"Opera"},r=w.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||w.getFirstMatch(B,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe(e){const t={name:"Samsung Internet for Android"},r=w.getFirstMatch(B,e)||w.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe(e){const t={name:"NAVER Whale Browser"},r=w.getFirstMatch(B,e)||w.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe(e){const t={name:"MZ Browser"},r=w.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||w.getFirstMatch(B,e);return r&&(t.version=r),t}},{test:[/focus/i],describe(e){const t={name:"Focus"},r=w.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||w.getFirstMatch(B,e);return r&&(t.version=r),t}},{test:[/swing/i],describe(e){const t={name:"Swing"},r=w.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||w.getFirstMatch(B,e);return r&&(t.version=r),t}},{test:[/coast/i],describe(e){const t={name:"Opera Coast"},r=w.getFirstMatch(B,e)||w.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(e){const t={name:"Opera Touch"},r=w.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||w.getFirstMatch(B,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe(e){const t={name:"Yandex Browser"},r=w.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||w.getFirstMatch(B,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe(e){const t={name:"UC Browser"},r=w.getFirstMatch(B,e)||w.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe(e){const t={name:"Maxthon"},r=w.getFirstMatch(B,e)||w.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe(e){const t={name:"Epiphany"},r=w.getFirstMatch(B,e)||w.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe(e){const t={name:"Puffin"},r=w.getFirstMatch(B,e)||w.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe(e){const t={name:"Sleipnir"},r=w.getFirstMatch(B,e)||w.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe(e){const t={name:"K-Meleon"},r=w.getFirstMatch(B,e)||w.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe(e){const t={name:"WeChat"},r=w.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||w.getFirstMatch(B,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe(e){const t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},r=w.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||w.getFirstMatch(B,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe(e){const t={name:"Internet Explorer"},r=w.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\sedg\//i],describe(e){const t={name:"Microsoft Edge"},r=w.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe(e){const t={name:"Microsoft Edge"},r=w.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe(e){const t={name:"Vivaldi"},r=w.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe(e){const t={name:"SeaMonkey"},r=w.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe(e){const t={name:"Sailfish"},r=w.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe(e){const t={name:"Amazon Silk"},r=w.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe(e){const t={name:"PhantomJS"},r=w.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe(e){const t={name:"SlimerJS"},r=w.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t={name:"BlackBerry"},r=w.getFirstMatch(B,e)||w.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe(e){const t={name:"WebOS Browser"},r=w.getFirstMatch(B,e)||w.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe(e){const t={name:"Bada"},r=w.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe(e){const t={name:"Tizen"},r=w.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||w.getFirstMatch(B,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe(e){const t={name:"QupZilla"},r=w.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||w.getFirstMatch(B,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe(e){const t={name:"Firefox"},r=w.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/electron/i],describe(e){const t={name:"Electron"},r=w.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MiuiBrowser/i],describe(e){const t={name:"Miui"},r=w.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe(e){const t={name:"Chromium"},r=w.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||w.getFirstMatch(B,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe(e){const t={name:"Chrome"},r=w.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe(e){const t={name:"Google Search"},r=w.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){const t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe(e){const t={name:"Android Browser"},r=w.getFirstMatch(B,e);return r&&(t.version=r),t}},{test:[/playstation 4/i],describe(e){const t={name:"PlayStation 4"},r=w.getFirstMatch(B,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe(e){const t={name:"Safari"},r=w.getFirstMatch(B,e);return r&&(t.version=r),t}},{test:[/.*/i],describe(e){const t=/^(.*)\/(.*) /,r=/^(.*)\/(.*)[ \t]\((.*)/,s=e.search("\\(")!==-1?r:t;return{name:w.getFirstMatch(s,e),version:w.getSecondMatch(s,e)}}}],ab=[{test:[/Roku\/DVP/],describe(e){const t=w.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:ie.Roku,version:t}}},{test:[/windows phone/i],describe(e){const t=w.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:ie.WindowsPhone,version:t}}},{test:[/windows /i],describe(e){const t=w.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),r=w.getWindowsVersionName(t);return{name:ie.Windows,version:t,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(e){const t={name:ie.iOS},r=w.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return r&&(t.version=r),t}},{test:[/macintosh/i],describe(e){const t=w.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),r=w.getMacOSVersionName(t),n={name:ie.MacOS,version:t};return r&&(n.versionName=r),n}},{test:[/(ipod|iphone|ipad)/i],describe(e){const t=w.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:ie.iOS,version:t}}},{test(e){const t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe(e){const t=w.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),r=w.getAndroidVersionName(t),n={name:ie.Android,version:t};return r&&(n.versionName=r),n}},{test:[/(web|hpw)[o0]s/i],describe(e){const t=w.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),r={name:ie.WebOS};return t&&t.length&&(r.version=t),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t=w.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||w.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||w.getFirstMatch(/\bbb(\d+)/i,e);return{name:ie.BlackBerry,version:t}}},{test:[/bada/i],describe(e){const t=w.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:ie.Bada,version:t}}},{test:[/tizen/i],describe(e){const t=w.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:ie.Tizen,version:t}}},{test:[/linux/i],describe(){return{name:ie.Linux}}},{test:[/CrOS/],describe(){return{name:ie.ChromeOS}}},{test:[/PlayStation 4/],describe(e){const t=w.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:ie.PlayStation4,version:t}}}],cb=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(e){const t=w.getFirstMatch(/(can-l01)/i,e)&&"Nova",r={type:j.mobile,vendor:"Huawei"};return t&&(r.model=t),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:j.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:j.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:j.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:j.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:j.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:j.tablet}}},{test(e){const t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe(e){const t=w.getFirstMatch(/(ipod|iphone)/i,e);return{type:j.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:j.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:j.mobile}}},{test(e){return e.getBrowserName(!0)==="blackberry"},describe(){return{type:j.mobile,vendor:"BlackBerry"}}},{test(e){return e.getBrowserName(!0)==="bada"},describe(){return{type:j.mobile}}},{test(e){return e.getBrowserName()==="windows phone"},describe(){return{type:j.mobile,vendor:"Microsoft"}}},{test(e){const t=Number(String(e.getOSVersion()).split(".")[0]);return e.getOSName(!0)==="android"&&t>=3},describe(){return{type:j.tablet}}},{test(e){return e.getOSName(!0)==="android"},describe(){return{type:j.mobile}}},{test(e){return e.getOSName(!0)==="macos"},describe(){return{type:j.desktop,vendor:"Apple"}}},{test(e){return e.getOSName(!0)==="windows"},describe(){return{type:j.desktop}}},{test(e){return e.getOSName(!0)==="linux"},describe(){return{type:j.desktop}}},{test(e){return e.getOSName(!0)==="playstation 4"},describe(){return{type:j.tv}}},{test(e){return e.getOSName(!0)==="roku"},describe(){return{type:j.tv}}}],ub=[{test(e){return e.getBrowserName(!0)==="microsoft edge"},describe(e){if(/\sedg\//i.test(e))return{name:je.Blink};const r=w.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:je.EdgeHTML,version:r}}},{test:[/trident/i],describe(e){const t={name:je.Trident},r=w.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){return e.test(/presto/i)},describe(e){const t={name:je.Presto},r=w.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){const t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe(e){const t={name:je.Gecko},r=w.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:je.Blink}}},{test:[/(apple)?webkit/i],describe(e){const t={name:je.WebKit},r=w.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}}];class Fo{constructor(t,r=!1){if(t==null||t==="")throw new Error("UserAgent parameter can't be empty");this._ua=t,this.parsedResult={},r!==!0&&this.parse()}getUA(){return this._ua}test(t){return t.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const t=w.find(ob,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(t){return t?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const t=w.find(ab,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os}getOSName(t){const{name:r}=this.getOS();return t?String(r).toLowerCase()||"":r||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(t=!1){const{type:r}=this.getPlatform();return t?String(r).toLowerCase()||"":r||""}parsePlatform(){this.parsedResult.platform={};const t=w.find(cb,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(t){return t?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const t=w.find(ub,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return w.assign({},this.parsedResult)}satisfies(t){const r={};let n=0;const s={};let i=0;if(Object.keys(t).forEach(a=>{const u=t[a];typeof u=="string"?(s[a]=u,i+=1):typeof u=="object"&&(r[a]=u,n+=1)}),n>0){const a=Object.keys(r),u=w.find(a,l=>this.isOS(l));if(u){const l=this.satisfies(r[u]);if(l!==void 0)return l}const c=w.find(a,l=>this.isPlatform(l));if(c){const l=this.satisfies(r[c]);if(l!==void 0)return l}}if(i>0){const a=Object.keys(s),u=w.find(a,c=>this.isBrowser(c,!0));if(u!==void 0)return this.compareVersion(s[u])}}isBrowser(t,r=!1){const n=this.getBrowserName().toLowerCase();let s=t.toLowerCase();const i=w.getBrowserTypeByAlias(s);return r&&i&&(s=i.toLowerCase()),s===n}compareVersion(t){let r=[0],n=t,s=!1;const i=this.getBrowserVersion();if(typeof i=="string")return t[0]===">"||t[0]==="<"?(n=t.substr(1),t[1]==="="?(s=!0,n=t.substr(2)):r=[],t[0]===">"?r.push(1):r.push(-1)):t[0]==="="?n=t.substr(1):t[0]==="~"&&(s=!0,n=t.substr(1)),r.indexOf(w.compareVersions(i,n,s))>-1}isOS(t){return this.getOSName(!0)===String(t).toLowerCase()}isPlatform(t){return this.getPlatformType(!0)===String(t).toLowerCase()}isEngine(t){return this.getEngineName(!0)===String(t).toLowerCase()}is(t,r=!1){return this.isBrowser(t,r)||this.isOS(t)||this.isPlatform(t)}some(t=[]){return t.some(r=>this.is(r))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class $u{static getParser(t,r=!1){if(typeof t!="string")throw new Error("UserAgent should be a string");return new Fo(t,r)}static parse(t){return new Fo(t).getResult()}static get BROWSER_MAP(){return ku}static get ENGINE_MAP(){return je}static get OS_MAP(){return ie}static get PLATFORMS_MAP(){return j}}const Bu=({serviceId:e,clientVersion:t})=>async()=>{var s,i,o,a,u;const r=typeof window<"u"&&((s=window==null?void 0:window.navigator)!=null&&s.userAgent)?$u.parse(window.navigator.userAgent):void 0,n=[["aws-sdk-js",t],["ua","2.0"],[`os/${((i=r==null?void 0:r.os)==null?void 0:i.name)||"other"}`,(o=r==null?void 0:r.os)==null?void 0:o.version],["lang/js"],["md/browser",`${((a=r==null?void 0:r.browser)==null?void 0:a.name)??"unknown"}_${((u=r==null?void 0:r.browser)==null?void 0:u.version)??"unknown"}`]];return e&&n.push([`api/${e}`,t]),n};function lb(e){let t=0,r=0,n=null,s=null;const i=a=>{if(typeof a!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+a);t=a,r=4,n=new Uint8Array(a),new DataView(n.buffer).setUint32(0,a,!1)},o=async function*(){const a=e[Symbol.asyncIterator]();for(;;){const{value:u,done:c}=await a.next();if(c){if(t)if(t===r)yield n;else throw new Error("Truncated event message received.");else return;return}const l=u.length;let h=0;for(;h<l;){if(!n){const y=l-h;s||(s=new Uint8Array(4));const g=Math.min(4-r,y);if(s.set(u.slice(h,h+g),r),r+=g,h+=g,r<4)break;i(new DataView(s.buffer).getUint32(0,!1)),s=null}const f=Math.min(t-r,l-h);n.set(u.slice(h,h+f),r),r+=f,h+=f,t&&t===r&&(yield n,n=null,t=0,r=0)}}};return{[Symbol.asyncIterator]:o}}function db(e,t){return async function(r){const{value:n}=r.headers[":message-type"];if(n==="error"){const s=new Error(r.headers[":error-message"].value||"UnknownError");throw s.name=r.headers[":error-code"].value,s}else if(n==="exception"){const s=r.headers[":exception-type"].value,i={[s]:r},o=await e(i);if(o.$unknown){const a=new Error(t(r.body));throw a.name=s,a}throw o[s]}else if(n==="event"){const s={[r.headers[":event-type"].value]:r},i=await e(s);return i.$unknown?void 0:i}else throw Error(`Unrecognizable event type: ${r.headers[":event-type"].value}`)}}let fb=class{constructor({utf8Encoder:t,utf8Decoder:r}){this.eventStreamCodec=new mf(t,r),this.utfEncoder=t}deserialize(t,r){const n=lb(t);return new _f({messageStream:new bf({inputStream:n,decoder:this.eventStreamCodec}),deserializer:db(r,this.utfEncoder)})}serialize(t,r){return new wf({messageStream:new Sf({inputStream:t,serializer:r}),encoder:this.eventStreamCodec,includeEndFrame:!0})}};const hb=e=>({[Symbol.asyncIterator]:async function*(){const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)return;yield n}}finally{t.releaseLock()}}}),pb=e=>{const t=e[Symbol.asyncIterator]();return new ReadableStream({async pull(r){const{done:n,value:s}=await t.next();if(n)return r.close();r.enqueue(s)}})};class yb{constructor({utf8Encoder:t,utf8Decoder:r}){this.universalMarshaller=new fb({utf8Decoder:r,utf8Encoder:t})}deserialize(t,r){const n=gb(t)?hb(t):t;return this.universalMarshaller.deserialize(n,r)}serialize(t,r){const n=this.universalMarshaller.serialize(t,r);return typeof ReadableStream=="function"?pb(n):n}}const gb=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream,mb=e=>new yb(e);function bb(e,t,r=1024*1024){return new Promise((n,s)=>{const i=new FileReader;i.addEventListener("error",s),i.addEventListener("abort",s);const o=e.size;let a=0;function u(){if(a>=o){n();return}i.readAsArrayBuffer(e.slice(a,Math.min(o,a+r)))}i.addEventListener("load",c=>{const l=c.target.result;t(new Uint8Array(l)),a+=l.byteLength,u()}),u()})}const wb=async function(t,r){const n=new t;return await bb(r,s=>{n.update(s)}),n.digest()},Mu=e=>()=>Promise.reject(e),Fe=64,_b=16,Sb=[1732584193,4023233417,2562383102,271733878];class Eb{constructor(){this.reset()}update(t){if(vb(t))return;if(this.finished)throw new Error("Attempted to update an already finished hash.");const r=xb(t);let n=0,{byteLength:s}=r;for(this.bytesHashed+=s;s>0;)this.buffer.setUint8(this.bufferLength++,r[n++]),s--,this.bufferLength===Fe&&(this.hashBuffer(),this.bufferLength=0)}async digest(){if(!this.finished){const{buffer:r,bufferLength:n,bytesHashed:s}=this,i=s*8;if(r.setUint8(this.bufferLength++,128),n%Fe>=Fe-8){for(let o=this.bufferLength;o<Fe;o++)r.setUint8(o,0);this.hashBuffer(),this.bufferLength=0}for(let o=this.bufferLength;o<Fe-8;o++)r.setUint8(o,0);r.setUint32(Fe-8,i>>>0,!0),r.setUint32(Fe-4,Math.floor(i/4294967296),!0),this.hashBuffer(),this.finished=!0}const t=new DataView(new ArrayBuffer(_b));for(let r=0;r<4;r++)t.setUint32(r*4,this.state[r],!0);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}hashBuffer(){const{buffer:t,state:r}=this;let n=r[0],s=r[1],i=r[2],o=r[3];n=te(n,s,i,o,t.getUint32(0,!0),7,3614090360),o=te(o,n,s,i,t.getUint32(4,!0),12,3905402710),i=te(i,o,n,s,t.getUint32(8,!0),17,606105819),s=te(s,i,o,n,t.getUint32(12,!0),22,3250441966),n=te(n,s,i,o,t.getUint32(16,!0),7,4118548399),o=te(o,n,s,i,t.getUint32(20,!0),12,1200080426),i=te(i,o,n,s,t.getUint32(24,!0),17,2821735955),s=te(s,i,o,n,t.getUint32(28,!0),22,4249261313),n=te(n,s,i,o,t.getUint32(32,!0),7,1770035416),o=te(o,n,s,i,t.getUint32(36,!0),12,2336552879),i=te(i,o,n,s,t.getUint32(40,!0),17,4294925233),s=te(s,i,o,n,t.getUint32(44,!0),22,2304563134),n=te(n,s,i,o,t.getUint32(48,!0),7,1804603682),o=te(o,n,s,i,t.getUint32(52,!0),12,4254626195),i=te(i,o,n,s,t.getUint32(56,!0),17,2792965006),s=te(s,i,o,n,t.getUint32(60,!0),22,1236535329),n=re(n,s,i,o,t.getUint32(4,!0),5,4129170786),o=re(o,n,s,i,t.getUint32(24,!0),9,3225465664),i=re(i,o,n,s,t.getUint32(44,!0),14,643717713),s=re(s,i,o,n,t.getUint32(0,!0),20,3921069994),n=re(n,s,i,o,t.getUint32(20,!0),5,3593408605),o=re(o,n,s,i,t.getUint32(40,!0),9,38016083),i=re(i,o,n,s,t.getUint32(60,!0),14,3634488961),s=re(s,i,o,n,t.getUint32(16,!0),20,3889429448),n=re(n,s,i,o,t.getUint32(36,!0),5,568446438),o=re(o,n,s,i,t.getUint32(56,!0),9,3275163606),i=re(i,o,n,s,t.getUint32(12,!0),14,4107603335),s=re(s,i,o,n,t.getUint32(32,!0),20,1163531501),n=re(n,s,i,o,t.getUint32(52,!0),5,2850285829),o=re(o,n,s,i,t.getUint32(8,!0),9,4243563512),i=re(i,o,n,s,t.getUint32(28,!0),14,1735328473),s=re(s,i,o,n,t.getUint32(48,!0),20,2368359562),n=ne(n,s,i,o,t.getUint32(20,!0),4,4294588738),o=ne(o,n,s,i,t.getUint32(32,!0),11,2272392833),i=ne(i,o,n,s,t.getUint32(44,!0),16,1839030562),s=ne(s,i,o,n,t.getUint32(56,!0),23,4259657740),n=ne(n,s,i,o,t.getUint32(4,!0),4,2763975236),o=ne(o,n,s,i,t.getUint32(16,!0),11,1272893353),i=ne(i,o,n,s,t.getUint32(28,!0),16,4139469664),s=ne(s,i,o,n,t.getUint32(40,!0),23,3200236656),n=ne(n,s,i,o,t.getUint32(52,!0),4,681279174),o=ne(o,n,s,i,t.getUint32(0,!0),11,3936430074),i=ne(i,o,n,s,t.getUint32(12,!0),16,3572445317),s=ne(s,i,o,n,t.getUint32(24,!0),23,76029189),n=ne(n,s,i,o,t.getUint32(36,!0),4,3654602809),o=ne(o,n,s,i,t.getUint32(48,!0),11,3873151461),i=ne(i,o,n,s,t.getUint32(60,!0),16,530742520),s=ne(s,i,o,n,t.getUint32(8,!0),23,3299628645),n=se(n,s,i,o,t.getUint32(0,!0),6,4096336452),o=se(o,n,s,i,t.getUint32(28,!0),10,1126891415),i=se(i,o,n,s,t.getUint32(56,!0),15,2878612391),s=se(s,i,o,n,t.getUint32(20,!0),21,4237533241),n=se(n,s,i,o,t.getUint32(48,!0),6,1700485571),o=se(o,n,s,i,t.getUint32(12,!0),10,2399980690),i=se(i,o,n,s,t.getUint32(40,!0),15,4293915773),s=se(s,i,o,n,t.getUint32(4,!0),21,2240044497),n=se(n,s,i,o,t.getUint32(32,!0),6,1873313359),o=se(o,n,s,i,t.getUint32(60,!0),10,4264355552),i=se(i,o,n,s,t.getUint32(24,!0),15,2734768916),s=se(s,i,o,n,t.getUint32(52,!0),21,1309151649),n=se(n,s,i,o,t.getUint32(16,!0),6,4149444226),o=se(o,n,s,i,t.getUint32(44,!0),10,3174756917),i=se(i,o,n,s,t.getUint32(8,!0),15,718787259),s=se(s,i,o,n,t.getUint32(36,!0),21,3951481745),r[0]=n+r[0]&4294967295,r[1]=s+r[1]&4294967295,r[2]=i+r[2]&4294967295,r[3]=o+r[3]&4294967295}reset(){this.state=Uint32Array.from(Sb),this.buffer=new DataView(new ArrayBuffer(Fe)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}}function Ur(e,t,r,n,s,i){return t=(t+e&4294967295)+(n+i&4294967295)&4294967295,(t<<s|t>>>32-s)+r&4294967295}function te(e,t,r,n,s,i,o){return Ur(t&r|~t&n,e,t,s,i,o)}function re(e,t,r,n,s,i,o){return Ur(t&n|r&~n,e,t,s,i,o)}function ne(e,t,r,n,s,i,o){return Ur(t^r^n,e,t,s,i,o)}function se(e,t,r,n,s,i,o){return Ur(r^(t|~n),e,t,s,i,o)}function vb(e){return typeof e=="string"?e.length===0:e.byteLength===0}function xb(e){return typeof e=="string"?ct(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}const Do=typeof TextEncoder=="function"?new TextEncoder:null,Fu=e=>{if(typeof e=="string"){if(Do)return Do.encode(e).byteLength;let t=e.length;for(let r=t-1;r>=0;r--){const n=e.charCodeAt(r);n>127&&n<=2047?t++:n>2047&&n<=65535&&(t+=2),n>=56320&&n<=57343&&r--}return t}else{if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size}throw new Error(`Body Length computation failed for ${e}`)},Ab={CrtSignerV4:null};class Rb{constructor(t){this.sigv4Signer=new Xf(t),this.signerOptions=t}async sign(t,r={}){if(r.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().sign(t,r)}return this.sigv4Signer.sign(t,r)}async signWithCredentials(t,r,n={}){if(n.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().signWithCredentials(t,r,n)}return this.sigv4Signer.signWithCredentials(t,r,n)}async presign(t,r={}){if(r.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().presign(t,r)}return this.sigv4Signer.presign(t,r)}async presignWithCredentials(t,r,n={}){if(n.signingRegion==="*")throw new Error("Method presignWithCredentials is not supported for [signingRegion=*].");return this.sigv4Signer.presignWithCredentials(t,r,n)}getSigv4aSigner(){if(!this.sigv4aSigner){let t=null;try{if(t=Ab.CrtSignerV4,typeof t!="function")throw new Error}catch(r){throw r.message=`${r.message}
Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. 
You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. 
For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`,r}this.sigv4aSigner=new t({...this.signerOptions,signingAlgorithm:1})}return this.sigv4aSigner}}const Ys="required",d="type",p="conditions",m="fn",b="argv",P="ref",L="assign",v="url",x="properties",Du="backend",xe="authSchemes",Ae="disableDoubleEncoding",Re="signingName",ke="signingRegion",A="headers",Cb=!1,_e=!0,ge="isSet",J="booleanEquals",R="error",vr="aws.partition",U="stringEquals",H="getAttr",de="name",Te="substring",Uo="bucketSuffix",Uu="parseURL",Lo="{url#scheme}://{url#authority}/{uri_encoded_bucket}{url#path}",S="endpoint",_="tree",Lu="aws.isVirtualHostableS3Bucket",gr="{url#scheme}://{Bucket}.{url#authority}{url#path}",Ne="not",mr="{url#scheme}://{url#authority}{url#path}",ju="hardwareType",Hu="regionPrefix",jo="bucketAliasSuffix",ks="outpostId",et="isValidHostLabel",Qs="s3-outposts",ot="s3",zu="{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}",qu="https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}",Ho="https://{Bucket}.s3.{partitionResult#dnsSuffix}",Vu="aws.parseArn",Gu="bucketArn",Wu="arnType",xr="",Js="s3-object-lambda",Ku="accesspoint",ei="accessPointName",zo="{url#scheme}://{accessPointName}-{bucketArn#accountId}.{url#authority}{url#path}",qo="mrapPartition",Vo="outpostType",Go="arnPrefix",Xu="{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",Wo="https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",Ko="https://s3.{partitionResult#dnsSuffix}",Bt={[Ys]:!1,[d]:"String"},tt={[Ys]:!0,default:!1,[d]:"Boolean"},Mt={[Ys]:!1,[d]:"Boolean"},Se={[m]:J,[b]:[{[P]:"Accelerate"},!0]},F={[m]:J,[b]:[{[P]:"UseFIPS"},!0]},M={[m]:J,[b]:[{[P]:"UseDualStack"},!0]},V={[m]:ge,[b]:[{[P]:"Endpoint"}]},Zu={[m]:vr,[b]:[{[P]:"Region"}],[L]:"partitionResult"},Xo={[m]:U,[b]:[{[m]:H,[b]:[{[P]:"partitionResult"},de]},"aws-cn"]},Ar={[m]:ge,[b]:[{[P]:"Bucket"}]},ae={[P]:"Bucket"},oe={[m]:Uu,[b]:[{[P]:"Endpoint"}],[L]:"url"},br={[m]:J,[b]:[{[m]:H,[b]:[{[P]:"url"},"isIp"]},!0]},Yu={[P]:"url"},Qu={[m]:"uriEncode",[b]:[ae],[L]:"uri_encoded_bucket"},Be={[Du]:"S3Express",[xe]:[{[Ae]:!0,[de]:"sigv4",[Re]:"s3express",[ke]:"{Region}"}]},T={},Ju={[m]:Lu,[b]:[ae,!1]},Tn={[R]:"S3Express bucket name is not a valid virtual hostable name.",[d]:R},Rr={[Du]:"S3Express",[xe]:[{[Ae]:!0,[de]:"sigv4-s3express",[Re]:"s3express",[ke]:"{Region}"}]},Zo={[m]:ge,[b]:[{[P]:"UseS3ExpressControlEndpoint"}]},Yo={[m]:J,[b]:[{[P]:"UseS3ExpressControlEndpoint"},!0]},O={[m]:Ne,[b]:[V]},Qo={[R]:"Unrecognized S3Express bucket name format.",[d]:R},Jo={[m]:Ne,[b]:[Ar]},ea={[P]:ju},ta={[p]:[O],[R]:"Expected a endpoint to be specified but no endpoint was found",[d]:R},cr={[xe]:[{[Ae]:!0,[de]:"sigv4",[Re]:Qs,[ke]:"{Region}"}]},On={[m]:J,[b]:[{[P]:"ForcePathStyle"},!1]},Pb={[P]:"ForcePathStyle"},q={[m]:J,[b]:[{[P]:"Accelerate"},!1]},K={[m]:U,[b]:[{[P]:"Region"},"aws-global"]},Z={[xe]:[{[Ae]:!0,[de]:"sigv4",[Re]:ot,[ke]:"us-east-1"}]},$={[m]:Ne,[b]:[K]},Y={[m]:J,[b]:[{[P]:"UseGlobalEndpoint"},!0]},ra={[v]:"https://{Bucket}.s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[x]:{[xe]:[{[Ae]:!0,[de]:"sigv4",[Re]:ot,[ke]:"{Region}"}]},[A]:{}},W={[xe]:[{[Ae]:!0,[de]:"sigv4",[Re]:ot,[ke]:"{Region}"}]},Q={[m]:J,[b]:[{[P]:"UseGlobalEndpoint"},!1]},k={[m]:J,[b]:[{[P]:"UseDualStack"},!1]},na={[v]:"https://{Bucket}.s3-fips.{Region}.{partitionResult#dnsSuffix}",[x]:W,[A]:{}},I={[m]:J,[b]:[{[P]:"UseFIPS"},!1]},sa={[v]:"https://{Bucket}.s3-accelerate.dualstack.{partitionResult#dnsSuffix}",[x]:W,[A]:{}},ia={[v]:"https://{Bucket}.s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[x]:W,[A]:{}},In={[m]:J,[b]:[{[m]:H,[b]:[Yu,"isIp"]},!1]},Nn={[v]:zu,[x]:W,[A]:{}},$s={[v]:gr,[x]:W,[A]:{}},oa={[S]:$s,[d]:S},kn={[v]:qu,[x]:W,[A]:{}},aa={[v]:"https://{Bucket}.s3.{Region}.{partitionResult#dnsSuffix}",[x]:W,[A]:{}},ur={[R]:"Invalid region: region was not a valid DNS name.",[d]:R},ue={[P]:Gu},el={[P]:Wu},$n={[m]:H,[b]:[ue,"service"]},ti={[P]:ei},ca={[p]:[M],[R]:"S3 Object Lambda does not support Dual-stack",[d]:R},ua={[p]:[Se],[R]:"S3 Object Lambda does not support S3 Accelerate",[d]:R},la={[p]:[{[m]:ge,[b]:[{[P]:"DisableAccessPoints"}]},{[m]:J,[b]:[{[P]:"DisableAccessPoints"},!0]}],[R]:"Access points are not supported for this operation",[d]:R},Bn={[p]:[{[m]:ge,[b]:[{[P]:"UseArnRegion"}]},{[m]:J,[b]:[{[P]:"UseArnRegion"},!1]},{[m]:Ne,[b]:[{[m]:U,[b]:[{[m]:H,[b]:[ue,"region"]},"{Region}"]}]}],[R]:"Invalid configuration: region from ARN `{bucketArn#region}` does not match client region `{Region}` and UseArnRegion is `false`",[d]:R},tl={[m]:H,[b]:[{[P]:"bucketPartition"},de]},rl={[m]:H,[b]:[ue,"accountId"]},Mn={[xe]:[{[Ae]:!0,[de]:"sigv4",[Re]:Js,[ke]:"{bucketArn#region}"}]},da={[R]:"Invalid ARN: The access point name may only contain a-z, A-Z, 0-9 and `-`. Found: `{accessPointName}`",[d]:R},Fn={[R]:"Invalid ARN: The account id may only contain a-z, A-Z, 0-9 and `-`. Found: `{bucketArn#accountId}`",[d]:R},Dn={[R]:"Invalid region in ARN: `{bucketArn#region}` (invalid DNS name)",[d]:R},Un={[R]:"Client was configured for partition `{partitionResult#name}` but ARN (`{Bucket}`) has `{bucketPartition#name}`",[d]:R},fa={[R]:"Invalid ARN: The ARN may only contain a single resource component after `accesspoint`.",[d]:R},ha={[R]:"Invalid ARN: Expected a resource of the format `accesspoint:<accesspoint name>` but no name was provided",[d]:R},Ft={[xe]:[{[Ae]:!0,[de]:"sigv4",[Re]:ot,[ke]:"{bucketArn#region}"}]},pa={[xe]:[{[Ae]:!0,[de]:"sigv4",[Re]:Qs,[ke]:"{bucketArn#region}"}]},ya={[m]:Vu,[b]:[ae]},ga={[v]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[x]:W,[A]:{}},ma={[v]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[x]:W,[A]:{}},ba={[v]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[x]:W,[A]:{}},Ln={[v]:Xu,[x]:W,[A]:{}},wa={[v]:"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[x]:W,[A]:{}},_a={[P]:"UseObjectLambdaEndpoint"},jn={[xe]:[{[Ae]:!0,[de]:"sigv4",[Re]:Js,[ke]:"{Region}"}]},Sa={[v]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[x]:W,[A]:{}},Ea={[v]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}",[x]:W,[A]:{}},va={[v]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[x]:W,[A]:{}},Hn={[v]:mr,[x]:W,[A]:{}},xa={[v]:"https://s3.{Region}.{partitionResult#dnsSuffix}",[x]:W,[A]:{}},zn=[{[P]:"Region"}],Tb=[{[P]:"Endpoint"}],Ob=[ae],qn=[M],lr=[Se],Ke=[V,oe],Aa=[{[m]:ge,[b]:[{[P]:"DisableS3ExpressSessionAuth"}]},{[m]:J,[b]:[{[P]:"DisableS3ExpressSessionAuth"},!0]}],Ra=[br],Vn=[Qu],Gn=[Ju],rt=[F],Ca=[{[m]:Te,[b]:[ae,6,14,!0],[L]:"s3expressAvailabilityZoneId"},{[m]:Te,[b]:[ae,14,16,!0],[L]:"s3expressAvailabilityZoneDelim"},{[m]:U,[b]:[{[P]:"s3expressAvailabilityZoneDelim"},"--"]}],Pa=[{[p]:[F],[S]:{[v]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[x]:Be,[A]:{}},[d]:S},{[S]:{[v]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[x]:Be,[A]:{}},[d]:S}],Ta=[{[m]:Te,[b]:[ae,6,15,!0],[L]:"s3expressAvailabilityZoneId"},{[m]:Te,[b]:[ae,15,17,!0],[L]:"s3expressAvailabilityZoneDelim"},{[m]:U,[b]:[{[P]:"s3expressAvailabilityZoneDelim"},"--"]}],Oa=[{[p]:[F],[S]:{[v]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[x]:Rr,[A]:{}},[d]:S},{[S]:{[v]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[x]:Rr,[A]:{}},[d]:S}],Ib=[Ar],Ia=[{[m]:et,[b]:[{[P]:ks},!1]}],Na=[{[m]:U,[b]:[{[P]:Hu},"beta"]}],De=[Zu],ka=[{[m]:et,[b]:[{[P]:"Region"},!1]}],Ue=[{[m]:U,[b]:[{[P]:"Region"},"us-east-1"]}],Wn=[{[m]:U,[b]:[el,Ku]}],$a=[{[m]:H,[b]:[ue,"resourceId[1]"],[L]:ei},{[m]:Ne,[b]:[{[m]:U,[b]:[ti,xr]}]}],Nb=[ue,"resourceId[1]"],Kn=[{[m]:Ne,[b]:[{[m]:U,[b]:[{[m]:H,[b]:[ue,"region"]},xr]}]}],Ba=[{[m]:Ne,[b]:[{[m]:ge,[b]:[{[m]:H,[b]:[ue,"resourceId[2]"]}]}]}],kb=[ue,"resourceId[2]"],Xn=[{[m]:vr,[b]:[{[m]:H,[b]:[ue,"region"]}],[L]:"bucketPartition"}],Ma=[{[m]:U,[b]:[tl,{[m]:H,[b]:[{[P]:"partitionResult"},de]}]}],Zn=[{[m]:et,[b]:[{[m]:H,[b]:[ue,"region"]},!0]}],Yn=[{[m]:et,[b]:[rl,!1]}],Fa=[{[m]:et,[b]:[ti,!1]}],Da=[{[m]:et,[b]:[{[P]:"Region"},!0]}],$b={version:"1.0",parameters:{Bucket:Bt,Region:Bt,UseFIPS:tt,UseDualStack:tt,Endpoint:Bt,ForcePathStyle:tt,Accelerate:tt,UseGlobalEndpoint:tt,UseObjectLambdaEndpoint:Mt,Key:Bt,Prefix:Bt,DisableAccessPoints:Mt,DisableMultiRegionAccessPoints:tt,UseArnRegion:Mt,UseS3ExpressControlEndpoint:Mt,DisableS3ExpressSessionAuth:Mt},rules:[{[p]:[{[m]:ge,[b]:zn}],rules:[{[p]:[Se,F],error:"Accelerate cannot be used with FIPS",[d]:R},{[p]:[M,V],error:"Cannot set dual-stack in combination with a custom endpoint.",[d]:R},{[p]:[V,F],error:"A custom endpoint cannot be combined with FIPS",[d]:R},{[p]:[V,Se],error:"A custom endpoint cannot be combined with S3 Accelerate",[d]:R},{[p]:[F,Zu,Xo],error:"Partition does not support FIPS",[d]:R},{[p]:[Ar,{[m]:Te,[b]:[ae,0,6,_e],[L]:Uo},{[m]:U,[b]:[{[P]:Uo},"--x-s3"]}],rules:[{[p]:qn,error:"S3Express does not support Dual-stack.",[d]:R},{[p]:lr,error:"S3Express does not support S3 Accelerate.",[d]:R},{[p]:Ke,rules:[{[p]:Aa,rules:[{[p]:Ra,rules:[{[p]:Vn,rules:[{endpoint:{[v]:Lo,[x]:Be,[A]:T},[d]:S}],[d]:_}],[d]:_},{[p]:Gn,rules:[{endpoint:{[v]:gr,[x]:Be,[A]:T},[d]:S}],[d]:_},Tn],[d]:_},{[p]:Ra,rules:[{[p]:Vn,rules:[{endpoint:{[v]:Lo,[x]:Rr,[A]:T},[d]:S}],[d]:_}],[d]:_},{[p]:Gn,rules:[{endpoint:{[v]:gr,[x]:Rr,[A]:T},[d]:S}],[d]:_},Tn],[d]:_},{[p]:[Zo,Yo],rules:[{[p]:[Qu,O],rules:[{[p]:rt,endpoint:{[v]:"https://s3express-control-fips.{Region}.amazonaws.com/{uri_encoded_bucket}",[x]:Be,[A]:T},[d]:S},{endpoint:{[v]:"https://s3express-control.{Region}.amazonaws.com/{uri_encoded_bucket}",[x]:Be,[A]:T},[d]:S}],[d]:_}],[d]:_},{[p]:Gn,rules:[{[p]:Aa,rules:[{[p]:Ca,rules:Pa,[d]:_},{[p]:Ta,rules:Pa,[d]:_},Qo],[d]:_},{[p]:Ca,rules:Oa,[d]:_},{[p]:Ta,rules:Oa,[d]:_},Qo],[d]:_},Tn],[d]:_},{[p]:[Jo,Zo,Yo],rules:[{[p]:Ke,endpoint:{[v]:mr,[x]:Be,[A]:T},[d]:S},{[p]:rt,endpoint:{[v]:"https://s3express-control-fips.{Region}.amazonaws.com",[x]:Be,[A]:T},[d]:S},{endpoint:{[v]:"https://s3express-control.{Region}.amazonaws.com",[x]:Be,[A]:T},[d]:S}],[d]:_},{[p]:[Ar,{[m]:Te,[b]:[ae,49,50,_e],[L]:ju},{[m]:Te,[b]:[ae,8,12,_e],[L]:Hu},{[m]:Te,[b]:[ae,0,7,_e],[L]:jo},{[m]:Te,[b]:[ae,32,49,_e],[L]:ks},{[m]:vr,[b]:zn,[L]:"regionPartition"},{[m]:U,[b]:[{[P]:jo},"--op-s3"]}],rules:[{[p]:Ia,rules:[{[p]:[{[m]:U,[b]:[ea,"e"]}],rules:[{[p]:Na,rules:[ta,{[p]:Ke,endpoint:{[v]:"https://{Bucket}.ec2.{url#authority}",[x]:cr,[A]:T},[d]:S}],[d]:_},{endpoint:{[v]:"https://{Bucket}.ec2.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[x]:cr,[A]:T},[d]:S}],[d]:_},{[p]:[{[m]:U,[b]:[ea,"o"]}],rules:[{[p]:Na,rules:[ta,{[p]:Ke,endpoint:{[v]:"https://{Bucket}.op-{outpostId}.{url#authority}",[x]:cr,[A]:T},[d]:S}],[d]:_},{endpoint:{[v]:"https://{Bucket}.op-{outpostId}.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[x]:cr,[A]:T},[d]:S}],[d]:_},{error:'Unrecognized hardware type: "Expected hardware type o or e but got {hardwareType}"',[d]:R}],[d]:_},{error:"Invalid ARN: The outpost Id must only contain a-z, A-Z, 0-9 and `-`.",[d]:R}],[d]:_},{[p]:Ib,rules:[{[p]:[V,{[m]:Ne,[b]:[{[m]:ge,[b]:[{[m]:Uu,[b]:Tb}]}]}],error:"Custom endpoint `{Endpoint}` was not a valid URI",[d]:R},{[p]:[On,Ju],rules:[{[p]:De,rules:[{[p]:ka,rules:[{[p]:[Se,Xo],error:"S3 Accelerate cannot be used in this region",[d]:R},{[p]:[M,F,q,O,K],endpoint:{[v]:"https://{Bucket}.s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[x]:Z,[A]:T},[d]:S},{[p]:[M,F,q,O,$,Y],rules:[{endpoint:ra,[d]:S}],[d]:_},{[p]:[M,F,q,O,$,Q],endpoint:ra,[d]:S},{[p]:[k,F,q,O,K],endpoint:{[v]:"https://{Bucket}.s3-fips.us-east-1.{partitionResult#dnsSuffix}",[x]:Z,[A]:T},[d]:S},{[p]:[k,F,q,O,$,Y],rules:[{endpoint:na,[d]:S}],[d]:_},{[p]:[k,F,q,O,$,Q],endpoint:na,[d]:S},{[p]:[M,I,Se,O,K],endpoint:{[v]:"https://{Bucket}.s3-accelerate.dualstack.us-east-1.{partitionResult#dnsSuffix}",[x]:Z,[A]:T},[d]:S},{[p]:[M,I,Se,O,$,Y],rules:[{endpoint:sa,[d]:S}],[d]:_},{[p]:[M,I,Se,O,$,Q],endpoint:sa,[d]:S},{[p]:[M,I,q,O,K],endpoint:{[v]:"https://{Bucket}.s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[x]:Z,[A]:T},[d]:S},{[p]:[M,I,q,O,$,Y],rules:[{endpoint:ia,[d]:S}],[d]:_},{[p]:[M,I,q,O,$,Q],endpoint:ia,[d]:S},{[p]:[k,I,q,V,oe,br,K],endpoint:{[v]:zu,[x]:Z,[A]:T},[d]:S},{[p]:[k,I,q,V,oe,In,K],endpoint:{[v]:gr,[x]:Z,[A]:T},[d]:S},{[p]:[k,I,q,V,oe,br,$,Y],rules:[{[p]:Ue,endpoint:Nn,[d]:S},{endpoint:Nn,[d]:S}],[d]:_},{[p]:[k,I,q,V,oe,In,$,Y],rules:[{[p]:Ue,endpoint:$s,[d]:S},oa],[d]:_},{[p]:[k,I,q,V,oe,br,$,Q],endpoint:Nn,[d]:S},{[p]:[k,I,q,V,oe,In,$,Q],endpoint:$s,[d]:S},{[p]:[k,I,Se,O,K],endpoint:{[v]:qu,[x]:Z,[A]:T},[d]:S},{[p]:[k,I,Se,O,$,Y],rules:[{[p]:Ue,endpoint:kn,[d]:S},{endpoint:kn,[d]:S}],[d]:_},{[p]:[k,I,Se,O,$,Q],endpoint:kn,[d]:S},{[p]:[k,I,q,O,K],endpoint:{[v]:Ho,[x]:Z,[A]:T},[d]:S},{[p]:[k,I,q,O,$,Y],rules:[{[p]:Ue,endpoint:{[v]:Ho,[x]:W,[A]:T},[d]:S},{endpoint:aa,[d]:S}],[d]:_},{[p]:[k,I,q,O,$,Q],endpoint:aa,[d]:S}],[d]:_},ur],[d]:_}],[d]:_},{[p]:[V,oe,{[m]:U,[b]:[{[m]:H,[b]:[Yu,"scheme"]},"http"]},{[m]:Lu,[b]:[ae,_e]},On,I,k,q],rules:[{[p]:De,rules:[{[p]:ka,rules:[oa],[d]:_},ur],[d]:_}],[d]:_},{[p]:[On,{[m]:Vu,[b]:Ob,[L]:Gu}],rules:[{[p]:[{[m]:H,[b]:[ue,"resourceId[0]"],[L]:Wu},{[m]:Ne,[b]:[{[m]:U,[b]:[el,xr]}]}],rules:[{[p]:[{[m]:U,[b]:[$n,Js]}],rules:[{[p]:Wn,rules:[{[p]:$a,rules:[ca,ua,{[p]:Kn,rules:[la,{[p]:Ba,rules:[Bn,{[p]:Xn,rules:[{[p]:De,rules:[{[p]:Ma,rules:[{[p]:Zn,rules:[{[p]:[{[m]:U,[b]:[rl,xr]}],error:"Invalid ARN: Missing account id",[d]:R},{[p]:Yn,rules:[{[p]:Fa,rules:[{[p]:Ke,endpoint:{[v]:zo,[x]:Mn,[A]:T},[d]:S},{[p]:rt,endpoint:{[v]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[x]:Mn,[A]:T},[d]:S},{endpoint:{[v]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda.{bucketArn#region}.{bucketPartition#dnsSuffix}",[x]:Mn,[A]:T},[d]:S}],[d]:_},da],[d]:_},Fn],[d]:_},Dn],[d]:_},Un],[d]:_}],[d]:_}],[d]:_},fa],[d]:_},{error:"Invalid ARN: bucket ARN is missing a region",[d]:R}],[d]:_},ha],[d]:_},{error:"Invalid ARN: Object Lambda ARNs only support `accesspoint` arn types, but found: `{arnType}`",[d]:R}],[d]:_},{[p]:Wn,rules:[{[p]:$a,rules:[{[p]:Kn,rules:[{[p]:Wn,rules:[{[p]:Kn,rules:[la,{[p]:Ba,rules:[Bn,{[p]:Xn,rules:[{[p]:De,rules:[{[p]:[{[m]:U,[b]:[tl,"{partitionResult#name}"]}],rules:[{[p]:Zn,rules:[{[p]:[{[m]:U,[b]:[$n,ot]}],rules:[{[p]:Yn,rules:[{[p]:Fa,rules:[{[p]:lr,error:"Access Points do not support S3 Accelerate",[d]:R},{[p]:[F,M],endpoint:{[v]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[x]:Ft,[A]:T},[d]:S},{[p]:[F,k],endpoint:{[v]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[x]:Ft,[A]:T},[d]:S},{[p]:[I,M],endpoint:{[v]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[x]:Ft,[A]:T},[d]:S},{[p]:[I,k,V,oe],endpoint:{[v]:zo,[x]:Ft,[A]:T},[d]:S},{[p]:[I,k],endpoint:{[v]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.{bucketArn#region}.{bucketPartition#dnsSuffix}",[x]:Ft,[A]:T},[d]:S}],[d]:_},da],[d]:_},Fn],[d]:_},{error:"Invalid ARN: The ARN was not for the S3 service, found: {bucketArn#service}",[d]:R}],[d]:_},Dn],[d]:_},Un],[d]:_}],[d]:_}],[d]:_},fa],[d]:_}],[d]:_}],[d]:_},{[p]:[{[m]:et,[b]:[ti,_e]}],rules:[{[p]:qn,error:"S3 MRAP does not support dual-stack",[d]:R},{[p]:rt,error:"S3 MRAP does not support FIPS",[d]:R},{[p]:lr,error:"S3 MRAP does not support S3 Accelerate",[d]:R},{[p]:[{[m]:J,[b]:[{[P]:"DisableMultiRegionAccessPoints"},_e]}],error:"Invalid configuration: Multi-Region Access Point ARNs are disabled.",[d]:R},{[p]:[{[m]:vr,[b]:zn,[L]:qo}],rules:[{[p]:[{[m]:U,[b]:[{[m]:H,[b]:[{[P]:qo},de]},{[m]:H,[b]:[ue,"partition"]}]}],rules:[{endpoint:{[v]:"https://{accessPointName}.accesspoint.s3-global.{mrapPartition#dnsSuffix}",[x]:{[xe]:[{[Ae]:_e,name:"sigv4a",[Re]:ot,signingRegionSet:["*"]}]},[A]:T},[d]:S}],[d]:_},{error:"Client was configured for partition `{mrapPartition#name}` but bucket referred to partition `{bucketArn#partition}`",[d]:R}],[d]:_}],[d]:_},{error:"Invalid Access Point Name",[d]:R}],[d]:_},ha],[d]:_},{[p]:[{[m]:U,[b]:[$n,Qs]}],rules:[{[p]:qn,error:"S3 Outposts does not support Dual-stack",[d]:R},{[p]:rt,error:"S3 Outposts does not support FIPS",[d]:R},{[p]:lr,error:"S3 Outposts does not support S3 Accelerate",[d]:R},{[p]:[{[m]:ge,[b]:[{[m]:H,[b]:[ue,"resourceId[4]"]}]}],error:"Invalid Arn: Outpost Access Point ARN contains sub resources",[d]:R},{[p]:[{[m]:H,[b]:Nb,[L]:ks}],rules:[{[p]:Ia,rules:[Bn,{[p]:Xn,rules:[{[p]:De,rules:[{[p]:Ma,rules:[{[p]:Zn,rules:[{[p]:Yn,rules:[{[p]:[{[m]:H,[b]:kb,[L]:Vo}],rules:[{[p]:[{[m]:H,[b]:[ue,"resourceId[3]"],[L]:ei}],rules:[{[p]:[{[m]:U,[b]:[{[P]:Vo},Ku]}],rules:[{[p]:Ke,endpoint:{[v]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.{url#authority}",[x]:pa,[A]:T},[d]:S},{endpoint:{[v]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.s3-outposts.{bucketArn#region}.{bucketPartition#dnsSuffix}",[x]:pa,[A]:T},[d]:S}],[d]:_},{error:"Expected an outpost type `accesspoint`, found {outpostType}",[d]:R}],[d]:_},{error:"Invalid ARN: expected an access point name",[d]:R}],[d]:_},{error:"Invalid ARN: Expected a 4-component resource",[d]:R}],[d]:_},Fn],[d]:_},Dn],[d]:_},Un],[d]:_}],[d]:_}],[d]:_},{error:"Invalid ARN: The outpost Id may only contain a-z, A-Z, 0-9 and `-`. Found: `{outpostId}`",[d]:R}],[d]:_},{error:"Invalid ARN: The Outpost Id was not set",[d]:R}],[d]:_},{error:"Invalid ARN: Unrecognized format: {Bucket} (type: {arnType})",[d]:R}],[d]:_},{error:"Invalid ARN: No ARN type specified",[d]:R}],[d]:_},{[p]:[{[m]:Te,[b]:[ae,0,4,Cb],[L]:Go},{[m]:U,[b]:[{[P]:Go},"arn:"]},{[m]:Ne,[b]:[{[m]:ge,[b]:[ya]}]}],error:"Invalid ARN: `{Bucket}` was not a valid ARN",[d]:R},{[p]:[{[m]:J,[b]:[Pb,_e]},ya],error:"Path-style addressing cannot be used with ARN buckets",[d]:R},{[p]:Vn,rules:[{[p]:De,rules:[{[p]:[q],rules:[{[p]:[M,O,F,K],endpoint:{[v]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[x]:Z,[A]:T},[d]:S},{[p]:[M,O,F,$,Y],rules:[{endpoint:ga,[d]:S}],[d]:_},{[p]:[M,O,F,$,Q],endpoint:ga,[d]:S},{[p]:[k,O,F,K],endpoint:{[v]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[x]:Z,[A]:T},[d]:S},{[p]:[k,O,F,$,Y],rules:[{endpoint:ma,[d]:S}],[d]:_},{[p]:[k,O,F,$,Q],endpoint:ma,[d]:S},{[p]:[M,O,I,K],endpoint:{[v]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[x]:Z,[A]:T},[d]:S},{[p]:[M,O,I,$,Y],rules:[{endpoint:ba,[d]:S}],[d]:_},{[p]:[M,O,I,$,Q],endpoint:ba,[d]:S},{[p]:[k,V,oe,I,K],endpoint:{[v]:Xu,[x]:Z,[A]:T},[d]:S},{[p]:[k,V,oe,I,$,Y],rules:[{[p]:Ue,endpoint:Ln,[d]:S},{endpoint:Ln,[d]:S}],[d]:_},{[p]:[k,V,oe,I,$,Q],endpoint:Ln,[d]:S},{[p]:[k,O,I,K],endpoint:{[v]:Wo,[x]:Z,[A]:T},[d]:S},{[p]:[k,O,I,$,Y],rules:[{[p]:Ue,endpoint:{[v]:Wo,[x]:W,[A]:T},[d]:S},{endpoint:wa,[d]:S}],[d]:_},{[p]:[k,O,I,$,Q],endpoint:wa,[d]:S}],[d]:_},{error:"Path-style addressing cannot be used with S3 Accelerate",[d]:R}],[d]:_}],[d]:_}],[d]:_},{[p]:[{[m]:ge,[b]:[_a]},{[m]:J,[b]:[_a,_e]}],rules:[{[p]:De,rules:[{[p]:Da,rules:[ca,ua,{[p]:Ke,endpoint:{[v]:mr,[x]:jn,[A]:T},[d]:S},{[p]:rt,endpoint:{[v]:"https://s3-object-lambda-fips.{Region}.{partitionResult#dnsSuffix}",[x]:jn,[A]:T},[d]:S},{endpoint:{[v]:"https://s3-object-lambda.{Region}.{partitionResult#dnsSuffix}",[x]:jn,[A]:T},[d]:S}],[d]:_},ur],[d]:_}],[d]:_},{[p]:[Jo],rules:[{[p]:De,rules:[{[p]:Da,rules:[{[p]:[F,M,O,K],endpoint:{[v]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[x]:Z,[A]:T},[d]:S},{[p]:[F,M,O,$,Y],rules:[{endpoint:Sa,[d]:S}],[d]:_},{[p]:[F,M,O,$,Q],endpoint:Sa,[d]:S},{[p]:[F,k,O,K],endpoint:{[v]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}",[x]:Z,[A]:T},[d]:S},{[p]:[F,k,O,$,Y],rules:[{endpoint:Ea,[d]:S}],[d]:_},{[p]:[F,k,O,$,Q],endpoint:Ea,[d]:S},{[p]:[I,M,O,K],endpoint:{[v]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[x]:Z,[A]:T},[d]:S},{[p]:[I,M,O,$,Y],rules:[{endpoint:va,[d]:S}],[d]:_},{[p]:[I,M,O,$,Q],endpoint:va,[d]:S},{[p]:[I,k,V,oe,K],endpoint:{[v]:mr,[x]:Z,[A]:T},[d]:S},{[p]:[I,k,V,oe,$,Y],rules:[{[p]:Ue,endpoint:Hn,[d]:S},{endpoint:Hn,[d]:S}],[d]:_},{[p]:[I,k,V,oe,$,Q],endpoint:Hn,[d]:S},{[p]:[I,k,O,K],endpoint:{[v]:Ko,[x]:Z,[A]:T},[d]:S},{[p]:[I,k,O,$,Y],rules:[{[p]:Ue,endpoint:{[v]:Ko,[x]:W,[A]:T},[d]:S},{endpoint:xa,[d]:S}],[d]:_},{[p]:[I,k,O,$,Q],endpoint:xa,[d]:S}],[d]:_},ur],[d]:_}],[d]:_}],[d]:_},{error:"A region must be set when sending requests to S3.",[d]:R}]},Bb=$b,Mb=(e,t={})=>Uc(Bb,{endpointParams:e,logger:t.logger}),Fb=e=>({apiVersion:"2006-03-01",base64Decoder:(e==null?void 0:e.base64Decoder)??Cr,base64Encoder:(e==null?void 0:e.base64Encoder)??Pr,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Mb,extensions:(e==null?void 0:e.extensions)??[],getAwsChunkedEncodingStream:(e==null?void 0:e.getAwsChunkedEncodingStream)??Dl,logger:(e==null?void 0:e.logger)??new Bs,sdkStreamMixin:(e==null?void 0:e.sdkStreamMixin)??Wl,serviceId:(e==null?void 0:e.serviceId)??"S3",signerConstructor:(e==null?void 0:e.signerConstructor)??Rb,signingEscapePath:(e==null?void 0:e.signingEscapePath)??!1,urlParser:(e==null?void 0:e.urlParser)??Gt,useArnRegion:(e==null?void 0:e.useArnRegion)??!1,utf8Decoder:(e==null?void 0:e.utf8Decoder)??ct,utf8Encoder:(e==null?void 0:e.utf8Encoder)??er}),Db=["in-region","cross-region","mobile","standard","legacy"],nl=({defaultsMode:e}={})=>Pc(async()=>{const t=typeof e=="function"?await e():e;switch(t==null?void 0:t.toLowerCase()){case"auto":return Promise.resolve(Ub()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(t==null?void 0:t.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${Db.join(", ")}, got ${t}`)}}),Ub=()=>{var r,n;const e=typeof window<"u"&&((r=window==null?void 0:window.navigator)!=null&&r.userAgent)?$u.parse(window.navigator.userAgent):void 0,t=(n=e==null?void 0:e.platform)==null?void 0:n.type;return t==="tablet"||t==="mobile"},Lb=e=>{const t=nl(e),r=()=>t().then(uc),n=Fb(e);return{...n,...e,runtime:"browser",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??Fu,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??(s=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Bu({serviceId:n.serviceId,clientVersion:Kg.version}),eventStreamSerdeProvider:(e==null?void 0:e.eventStreamSerdeProvider)??mb,maxAttempts:(e==null?void 0:e.maxAttempts)??Wt,md5:(e==null?void 0:e.md5)??Eb,region:(e==null?void 0:e.region)??Mu("Region is missing"),requestHandler:(e==null?void 0:e.requestHandler)??new Tr(r),retryMode:(e==null?void 0:e.retryMode)??(async()=>(await r()).retryMode||Zc),sha1:(e==null?void 0:e.sha1)??yu.Sha1,sha256:(e==null?void 0:e.sha256)??Zs.Sha256,streamCollector:(e==null?void 0:e.streamCollector)??Ms,streamHasher:(e==null?void 0:e.streamHasher)??wb,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??(()=>Promise.resolve(Hc)),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??(()=>Promise.resolve(zc))}},sl=e=>{let t=async()=>{if(e.region===void 0)throw new Error("Region is missing from runtimeConfig");const r=e.region;return typeof r=="string"?r:r()};return{setRegion(r){t=r},region(){return t}}},il=e=>({region:e.region()}),Qn=e=>e,jb=(e,t)=>{const r={...Qn(sl(e)),...Qn(lc(e)),...Qn(Xa(e))};return t.forEach(n=>n.configure(r)),{...e,...il(r),...dc(r),...Za(r)}};class Hw extends ec{constructor(...[t]){const r=Lb(t||{}),n=Op(r),s=Vc(n),i=Xc(s),o=tu(i),a=o,u=Tc(a),c=Jf(u,{session:[()=>this,Tg]}),l=Ic(c),h=Uh(l),f=jb(h,(t==null?void 0:t.extensions)||[]);super(f),this.config=f,this.middlewareStack.use(nu(this.config)),this.middlewareStack.use(Gc(this.config)),this.middlewareStack.use(Ya(this.config)),this.middlewareStack.use(Qa(this.config)),this.middlewareStack.use(Ja(this.config)),this.middlewareStack.use(uh(this.config)),this.middlewareStack.use(nh(this.config)),this.middlewareStack.use(Rl(this.config)),this.middlewareStack.use(Rd(this.config)),this.middlewareStack.use(Qf(this.config)),this.middlewareStack.use(jc(this.config))}destroy(){super.destroy()}}class zw extends tr.classBuilder().ep({...su,Bucket:{type:"contextParams",name:"Bucket"},Prefix:{type:"contextParams",name:"Prefix"}}).m(function(t,r,n,s){return[Br(n,this.serialize,this.deserialize),Mr(n,t.getEndpointParameterInstructions())]}).s("AmazonS3","ListObjectsV2",{}).n("S3Client","ListObjectsV2Command").f(void 0,void 0).ser(Zy).de(Jy).build(){}const Hb=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"cognito-identity"}),ol={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},zb="@aws-sdk/client-cognito-identity",qb="AWS SDK for JavaScript Cognito Identity Client for Node.js, Browser and React Native",Vb="3.485.0",Gb={build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo cognito-identity","test:e2e":"ts-mocha test/**/*.ispec.ts && karma start karma.conf.js"},Wb="./dist-cjs/index.js",Kb="./dist-types/index.d.ts",Xb="./dist-es/index.js",Zb=!1,Yb={"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sts":"3.485.0","@aws-sdk/core":"3.485.0","@aws-sdk/credential-provider-node":"3.485.0","@aws-sdk/middleware-host-header":"3.485.0","@aws-sdk/middleware-logger":"3.485.0","@aws-sdk/middleware-recursion-detection":"3.485.0","@aws-sdk/middleware-signing":"3.485.0","@aws-sdk/middleware-user-agent":"3.485.0","@aws-sdk/region-config-resolver":"3.485.0","@aws-sdk/types":"3.485.0","@aws-sdk/util-endpoints":"3.485.0","@aws-sdk/util-user-agent-browser":"3.485.0","@aws-sdk/util-user-agent-node":"3.485.0","@smithy/config-resolver":"^2.0.23","@smithy/core":"^1.2.2","@smithy/fetch-http-handler":"^2.3.2","@smithy/hash-node":"^2.0.18","@smithy/invalid-dependency":"^2.0.16","@smithy/middleware-content-length":"^2.0.18","@smithy/middleware-endpoint":"^2.3.0","@smithy/middleware-retry":"^2.0.26","@smithy/middleware-serde":"^2.0.16","@smithy/middleware-stack":"^2.0.10","@smithy/node-config-provider":"^2.1.9","@smithy/node-http-handler":"^2.2.2","@smithy/protocol-http":"^3.0.12","@smithy/smithy-client":"^2.2.1","@smithy/types":"^2.8.0","@smithy/url-parser":"^2.0.16","@smithy/util-base64":"^2.0.1","@smithy/util-body-length-browser":"^2.0.1","@smithy/util-body-length-node":"^2.1.0","@smithy/util-defaults-mode-browser":"^2.0.24","@smithy/util-defaults-mode-node":"^2.0.32","@smithy/util-endpoints":"^1.0.8","@smithy/util-retry":"^2.0.9","@smithy/util-utf8":"^2.0.2",tslib:"^2.5.0"},Qb={"@aws-sdk/client-iam":"3.485.0","@smithy/service-client-documentation-generator":"^2.0.0","@tsconfig/node14":"1.0.3","@types/chai":"^4.2.11","@types/mocha":"^8.0.4","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},Jb={node:">=14.0.0"},ew={"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},tw=["dist-*/**"],rw={name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},nw="Apache-2.0",sw={"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},iw="https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-cognito-identity",ow={type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-cognito-identity"},aw={name:zb,description:qb,version:Vb,scripts:Gb,main:Wb,types:Kb,module:Xb,sideEffects:Zb,dependencies:Yb,devDependencies:Qb,engines:Jb,typesVersions:ew,files:tw,author:rw,license:nw,browser:sw,"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:iw,repository:ow},al="required",Oe="fn",Ie="argv",pt="ref",Ua=!0,La="isSet",Jt="booleanEquals",nt="error",Dt="endpoint",$e="tree",ri="PartitionResult",ja={[al]:!1,type:"String"},Ha={[al]:!0,default:!1,type:"Boolean"},za={[pt]:"Endpoint"},cl={[Oe]:Jt,[Ie]:[{[pt]:"UseFIPS"},!0]},ul={[Oe]:Jt,[Ie]:[{[pt]:"UseDualStack"},!0]},Pe={},qa={[Oe]:"getAttr",[Ie]:[{[pt]:ri},"supportsFIPS"]},Va={[Oe]:Jt,[Ie]:[!0,{[Oe]:"getAttr",[Ie]:[{[pt]:ri},"supportsDualStack"]}]},Ga=[cl],Wa=[ul],Ka=[{[pt]:"Region"}],cw={version:"1.0",parameters:{Region:ja,UseDualStack:Ha,UseFIPS:Ha,Endpoint:ja},rules:[{conditions:[{[Oe]:La,[Ie]:[za]}],rules:[{conditions:Ga,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:nt},{conditions:Wa,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:nt},{endpoint:{url:za,properties:Pe,headers:Pe},type:Dt}],type:$e},{conditions:[{[Oe]:La,[Ie]:Ka}],rules:[{conditions:[{[Oe]:"aws.partition",[Ie]:Ka,assign:ri}],rules:[{conditions:[cl,ul],rules:[{conditions:[{[Oe]:Jt,[Ie]:[Ua,qa]},Va],rules:[{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Pe,headers:Pe},type:Dt}],type:$e},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:nt}],type:$e},{conditions:Ga,rules:[{conditions:[{[Oe]:Jt,[Ie]:[qa,Ua]}],rules:[{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Pe,headers:Pe},type:Dt}],type:$e},{error:"FIPS is enabled but this partition does not support FIPS",type:nt}],type:$e},{conditions:Wa,rules:[{conditions:[Va],rules:[{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Pe,headers:Pe},type:Dt}],type:$e},{error:"DualStack is enabled but this partition does not support DualStack",type:nt}],type:$e},{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dnsSuffix}",properties:Pe,headers:Pe},type:Dt}],type:$e}],type:$e},{error:"Invalid Configuration: Missing Region",type:nt}]},uw=cw,lw=(e,t={})=>Uc(uw,{endpointParams:e,logger:t.logger}),dw=e=>({apiVersion:"2014-06-30",base64Decoder:(e==null?void 0:e.base64Decoder)??Cr,base64Encoder:(e==null?void 0:e.base64Encoder)??Pr,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??lw,extensions:(e==null?void 0:e.extensions)??[],logger:(e==null?void 0:e.logger)??new Bs,serviceId:(e==null?void 0:e.serviceId)??"Cognito Identity",urlParser:(e==null?void 0:e.urlParser)??Gt,utf8Decoder:(e==null?void 0:e.utf8Decoder)??ct,utf8Encoder:(e==null?void 0:e.utf8Encoder)??er}),fw=e=>{const t=nl(e),r=()=>t().then(uc),n=dw(e);return{...n,...e,runtime:"browser",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??Fu,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??(s=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Bu({serviceId:n.serviceId,clientVersion:aw.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??Wt,region:(e==null?void 0:e.region)??Mu("Region is missing"),requestHandler:(e==null?void 0:e.requestHandler)??new Tr(r),retryMode:(e==null?void 0:e.retryMode)??(async()=>(await r()).retryMode||Zc),sha256:(e==null?void 0:e.sha256)??Zs.Sha256,streamCollector:(e==null?void 0:e.streamCollector)??Ms,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??(()=>Promise.resolve(Hc)),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??(()=>Promise.resolve(zc))}},Jn=e=>e,hw=(e,t)=>{const r={...Jn(sl(e)),...Jn(lc(e)),...Jn(Xa(e))};return t.forEach(n=>n.configure(r)),{...e,...il(r),...dc(r),...Za(r)}};class pw extends ec{constructor(...[t]){const r=fw(t||{}),n=Hb(r),s=Vc(n),i=Xc(s),o=tu(i),a=o,u=Tc(a),c=Ic(u),l=hw(c,(t==null?void 0:t.extensions)||[]);super(l),this.config=l,this.middlewareStack.use(nu(this.config)),this.middlewareStack.use(Gc(this.config)),this.middlewareStack.use(Ya(this.config)),this.middlewareStack.use(Qa(this.config)),this.middlewareStack.use(Ja(this.config)),this.middlewareStack.use(jc(this.config))}destroy(){super.destroy()}}class be extends Or{constructor(t){super(t),Object.setPrototypeOf(this,be.prototype)}}class ni extends be{constructor(t){super({name:"InternalErrorException",$fault:"server",...t}),this.name="InternalErrorException",this.$fault="server",Object.setPrototypeOf(this,ni.prototype)}}class si extends be{constructor(t){super({name:"InvalidParameterException",$fault:"client",...t}),this.name="InvalidParameterException",this.$fault="client",Object.setPrototypeOf(this,si.prototype)}}class ii extends be{constructor(t){super({name:"LimitExceededException",$fault:"client",...t}),this.name="LimitExceededException",this.$fault="client",Object.setPrototypeOf(this,ii.prototype)}}class oi extends be{constructor(t){super({name:"NotAuthorizedException",$fault:"client",...t}),this.name="NotAuthorizedException",this.$fault="client",Object.setPrototypeOf(this,oi.prototype)}}class ai extends be{constructor(t){super({name:"ResourceConflictException",$fault:"client",...t}),this.name="ResourceConflictException",this.$fault="client",Object.setPrototypeOf(this,ai.prototype)}}class ci extends be{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,ci.prototype)}}class ui extends be{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,ui.prototype)}}class li extends be{constructor(t){super({name:"ExternalServiceException",$fault:"client",...t}),this.name="ExternalServiceException",this.$fault="client",Object.setPrototypeOf(this,li.prototype)}}class di extends be{constructor(t){super({name:"InvalidIdentityPoolConfigurationException",$fault:"client",...t}),this.name="InvalidIdentityPoolConfigurationException",this.$fault="client",Object.setPrototypeOf(this,di.prototype)}}const yw=async(e,t)=>{const r=wl("GetCredentialsForIdentity");let n;return n=JSON.stringify(le(e)),bl(t,r,"/",void 0,n)},gw=async(e,t)=>{const r=wl("GetId");let n;return n=JSON.stringify(le(e)),bl(t,r,"/",void 0,n)},mw=async(e,t)=>{if(e.statusCode>=300)return bw(e,t);const r=await fi(e.body,t);let n={};return n=xw(r),{$metadata:Ce(e),...n}},bw=async(e,t)=>{const r={...e,body:await _l(e.body,t)},n=Sl(e,r.body);switch(n){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":throw await ll(r);case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await dl(r);case"InvalidIdentityPoolConfigurationException":case"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException":throw await Sw(r);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await fl(r);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await hl(r);case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":throw await pl(r);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await yl(r);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await gl(r);default:const s=r.body;return ml({output:e,parsedBody:s,errorCode:n})}},ww=async(e,t)=>{if(e.statusCode>=300)return _w(e,t);const r=await fi(e.body,t);let n={};return n=le(r),{$metadata:Ce(e),...n}},_w=async(e,t)=>{const r={...e,body:await _l(e.body,t)},n=Sl(e,r.body);switch(n){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":throw await ll(r);case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await dl(r);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await fl(r);case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":throw await Ew(r);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await hl(r);case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":throw await pl(r);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await yl(r);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await gl(r);default:const s=r.body;return ml({output:e,parsedBody:s,errorCode:n})}},ll=async(e,t)=>{const r=e.body,n=le(r),s=new li({$metadata:Ce(e),...n});return ve(s,r)},dl=async(e,t)=>{const r=e.body,n=le(r),s=new ni({$metadata:Ce(e),...n});return ve(s,r)},Sw=async(e,t)=>{const r=e.body,n=le(r),s=new di({$metadata:Ce(e),...n});return ve(s,r)},fl=async(e,t)=>{const r=e.body,n=le(r),s=new si({$metadata:Ce(e),...n});return ve(s,r)},Ew=async(e,t)=>{const r=e.body,n=le(r),s=new ii({$metadata:Ce(e),...n});return ve(s,r)},hl=async(e,t)=>{const r=e.body,n=le(r),s=new oi({$metadata:Ce(e),...n});return ve(s,r)},pl=async(e,t)=>{const r=e.body,n=le(r),s=new ai({$metadata:Ce(e),...n});return ve(s,r)},yl=async(e,t)=>{const r=e.body,n=le(r),s=new ui({$metadata:Ce(e),...n});return ve(s,r)},gl=async(e,t)=>{const r=e.body,n=le(r),s=new ci({$metadata:Ce(e),...n});return ve(s,r)},vw=(e,t)=>hc(e,{AccessKeyId:z,Expiration:r=>ut(id(Er(r))),SecretKey:z,SessionToken:z}),xw=(e,t)=>hc(e,{Credentials:r=>vw(r),IdentityId:z}),Ce=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Aw=(e,t)=>rc(e,t).then(r=>t.utf8Encoder(r)),ml=cc(be),bl=async(e,t,r,n,s)=>{const{hostname:i,protocol:o="https",port:a,path:u}=await e.endpoint(),c={protocol:o,hostname:i,port:a,method:"POST",path:u.endsWith("/")?u.slice(0,-1)+r:u+r,headers:t};return s!==void 0&&(c.body=s),new me(c)};function wl(e){return{"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}}const fi=(e,t)=>Aw(e,t).then(r=>r.length?JSON.parse(r):{}),_l=async(e,t)=>{const r=await fi(e,t);return r.message=r.message??r.Message,r},Sl=(e,t)=>{const r=(i,o)=>Object.keys(i).find(a=>a.toLowerCase()===o.toLowerCase()),n=i=>{let o=i;return typeof o=="number"&&(o=o.toString()),o.indexOf(",")>=0&&(o=o.split(",")[0]),o.indexOf(":")>=0&&(o=o.split(":")[0]),o.indexOf("#")>=0&&(o=o.split("#")[1]),o},s=r(e.headers,"x-amzn-errortype");if(s!==void 0)return n(e.headers[s]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)};class Rw extends tr.classBuilder().ep({...ol}).m(function(t,r,n,s){return[Br(n,this.serialize,this.deserialize),Mr(n,t.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetCredentialsForIdentity",{}).n("CognitoIdentityClient","GetCredentialsForIdentityCommand").f(void 0,void 0).ser(yw).de(mw).build(){}class Cw extends tr.classBuilder().ep({...ol}).m(function(t,r,n,s){return[Br(n,this.serialize,this.deserialize),Mr(n,t.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetId",{}).n("CognitoIdentityClient","GetIdCommand").f(void 0,void 0).ser(gw).de(ww).build(){}function El(e){return Promise.all(Object.keys(e).reduce((t,r)=>{const n=e[r];return typeof n=="string"?t.push([r,n]):t.push(n().then(s=>[r,s])),t},[])).then(t=>t.reduce((r,[n,s])=>(r[n]=s,r),{}))}function Pw(e){return async()=>{const{Credentials:{AccessKeyId:t=Tw(),Expiration:r,SecretKey:n=Iw(),SessionToken:s}=Ow()}=await e.client.send(new Rw({CustomRoleArn:e.customRoleArn,IdentityId:e.identityId,Logins:e.logins?await El(e.logins):void 0}));return{identityId:e.identityId,accessKeyId:t,secretAccessKey:n,sessionToken:s,expiration:r}}}function Tw(){throw new ft("Response from Amazon Cognito contained no access key ID")}function Ow(){throw new ft("Response from Amazon Cognito contained no credentials")}function Iw(){throw new ft("Response from Amazon Cognito contained no secret key")}const es="IdentityIds";class Nw{constructor(t="aws:cognito-identity-ids"){this.dbName=t}getItem(t){return this.withObjectStore("readonly",r=>{const n=r.get(t);return new Promise(s=>{n.onerror=()=>s(null),n.onsuccess=()=>s(n.result?n.result.value:null)})}).catch(()=>null)}removeItem(t){return this.withObjectStore("readwrite",r=>{const n=r.delete(t);return new Promise((s,i)=>{n.onerror=()=>i(n.error),n.onsuccess=()=>s()})})}setItem(t,r){return this.withObjectStore("readwrite",n=>{const s=n.put({id:t,value:r});return new Promise((i,o)=>{s.onerror=()=>o(s.error),s.onsuccess=()=>i()})})}getDb(){const t=self.indexedDB.open(this.dbName,1);return new Promise((r,n)=>{t.onsuccess=()=>{r(t.result)},t.onerror=()=>{n(t.error)},t.onblocked=()=>{n(new Error("Unable to access DB"))},t.onupgradeneeded=()=>{const s=t.result;s.onerror=()=>{n(new Error("Failed to create object store"))},s.createObjectStore(es,{keyPath:"id"})}})}withObjectStore(t,r){return this.getDb().then(n=>{const s=n.transaction(es,t);return s.oncomplete=()=>n.close(),new Promise((i,o)=>{s.onerror=()=>o(s.error),i(r(s.objectStore(es)))}).catch(i=>{throw n.close(),i})})}}class kw{constructor(t={}){this.store=t}getItem(t){return t in this.store?this.store[t]:null}removeItem(t){delete this.store[t]}setItem(t,r){this.store[t]=r}}const $w=new kw;function Bw(){return typeof self=="object"&&self.indexedDB?new Nw:typeof window=="object"&&window.localStorage?window.localStorage:$w}function Mw({accountId:e,cache:t=Bw(),client:r,customRoleArn:n,identityPoolId:s,logins:i,userIdentifier:o=!i||Object.keys(i).length===0?"ANONYMOUS":void 0}){const a=o?`aws:cognito-identity-credentials:${s}:${o}`:void 0;let u=async()=>{let c=a&&await t.getItem(a);if(!c){const{IdentityId:l=Fw()}=await r.send(new Cw({AccountId:e,IdentityPoolId:s,Logins:i?await El(i):void 0}));c=l,a&&Promise.resolve(t.setItem(a,c)).catch(()=>{})}return u=Pw({client:r,customRoleArn:n,logins:i,identityId:c}),u()};return()=>u().catch(async c=>{throw a&&Promise.resolve(t.removeItem(a)).catch(()=>{}),c})}function Fw(){throw new ft("Response from Amazon Cognito contained no identity ID")}const qw=e=>Mw({...e,client:new pw(e.clientConfig??{})});export{zw as L,Hw as S,qw as f};
