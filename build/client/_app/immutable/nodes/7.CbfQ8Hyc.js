const __vite__fileDeps=["../chunks/Loading.Cz-JubWZ.js","../chunks/scheduler.BM2JUaET.js","../chunks/index.DjdkDzVp.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{_ as X}from"../chunks/preload-helper.D6kgxu3v.js";import{s as G,e as P,a as I,c as S,b as j,f as B,d as y,h as d,i as M,j as $,o as K,k as F,l as Q}from"../chunks/scheduler.BM2JUaET.js";import{S as U,i as Y,c as H,a as E,m as N,t as p,b as h,d as T,e as O,g as C}from"../chunks/index.DjdkDzVp.js";import{e as J}from"../chunks/each.6y9O-auE.js";import{B as Z}from"../chunks/Bar.Bvbyx1d8.js";import{B as R}from"../chunks/BlogCard.CLWfGWF_.js";import{P as x}from"../chunks/Path.BOpErr3t.js";import{n as ee,s as L,a as te}from"../chunks/not.CMbolwtH.js";import{B as ne}from"../chunks/Button.BTfuxz0C.js";function W(l,n,s){const r=l.slice();return r[10]=n[s],r}function z(l){let n,s;return n=new R({props:{makeNew:!0,uploadHandler:l[4],cancelHandler:l[5]}}),{c(){H(n.$$.fragment)},l(r){E(n.$$.fragment,r)},m(r,e){N(n,r,e),s=!0},p(r,e){const a={};e&2&&(a.uploadHandler=r[4]),e&2&&(a.cancelHandler=r[5]),n.$set(a)},i(r){s||(p(n.$$.fragment,r),s=!0)},o(r){h(n.$$.fragment,r),s=!1},d(r){O(n,r)}}}function q(l){let n,s,r=J(l[0]),e=[];for(let o=0;o<r.length;o+=1)e[o]=A(W(l,r,o));const a=o=>h(e[o],1,1,()=>{e[o]=null});return{c(){for(let o=0;o<e.length;o+=1)e[o].c();n=F()},l(o){for(let t=0;t<e.length;t+=1)e[t].l(o);n=F()},m(o,t){for(let i=0;i<e.length;i+=1)e[i]&&e[i].m(o,t);M(o,n,t),s=!0},p(o,t){if(t&3){r=J(o[0]);let i;for(i=0;i<r.length;i+=1){const b=W(o,r,i);e[i]?(e[i].p(b,t),p(e[i],1)):(e[i]=A(b),e[i].c(),p(e[i],1),e[i].m(n.parentNode,n))}for(C(),i=r.length;i<e.length;i+=1)a(i);T()}},i(o){if(!s){for(let t=0;t<r.length;t+=1)p(e[t]);s=!0}},o(o){e=e.filter(Boolean);for(let t=0;t<e.length;t+=1)h(e[t]);s=!1},d(o){o&&y(n),Q(e,o)}}}function A(l){let n,s;function r(...a){return l[6](l[10],...a)}function e(...a){return l[7](l[10],...a)}return n=new R({props:{title:l[10].title,ID:l[10].ID,date:new Date(l[10].date),saveHandler:r,deleteHandler:e,details:l[10].blogDetails,url:"https://echo-dentists.s3.me-central-1.amazonaws.com/blogs/"+l[10].blogID,cancelHandler:l[8]}}),{c(){H(n.$$.fragment)},l(a){E(n.$$.fragment,a)},m(a,o){N(n,a,o),s=!0},p(a,o){l=a;const t={};o&1&&(t.title=l[10].title),o&1&&(t.ID=l[10].ID),o&1&&(t.date=new Date(l[10].date)),o&1&&(t.saveHandler=r),o&1&&(t.deleteHandler=e),o&1&&(t.details=l[10].blogDetails),o&1&&(t.url="https://echo-dentists.s3.me-central-1.amazonaws.com/blogs/"+l[10].blogID),o&2&&(t.cancelHandler=l[8]),n.$set(t)},i(a){s||(p(n.$$.fragment,a),s=!0)},o(a){h(n.$$.fragment,a),s=!1},d(a){O(n,a)}}}function oe(l){let n,s,r,e,a,o,t,i,b,D,k,u,_;s=new Z({props:{title:"Blogs"}}),a=new x({props:{links:[{link:"/",txt:"Home"},{link:"/blogs",txt:"Blogs"}]}}),i=new ne({props:{text:"منشور جديد",clickHandler:l[3]}});let f=l[1]&&z(l),c=l[0].length>0&&q(l);return{c(){n=P("div"),H(s.$$.fragment),r=I(),e=P("div"),H(a.$$.fragment),o=I(),t=P("div"),H(i.$$.fragment),b=I(),D=P("div"),k=I(),f&&f.c(),u=I(),c&&c.c(),this.h()},l(m){n=S(m,"DIV",{style:!0});var g=j(n);E(s.$$.fragment,g),r=B(g),e=S(g,"DIV",{style:!0});var v=j(e);E(a.$$.fragment,v),v.forEach(y),o=B(g),t=S(g,"DIV",{style:!0});var w=j(t);E(i.$$.fragment,w),b=B(w),D=S(w,"DIV",{style:!0}),j(D).forEach(y),k=B(w),f&&f.l(w),u=B(w),c&&c.l(w),w.forEach(y),g.forEach(y),this.h()},h(){d(e,"width","100%"),d(e,"display","inline-table"),d(e,"margin","auto"),d(e,"margin-top","141px"),d(D,"margin-top","120px"),d(t,"display","flex"),d(t,"justify-content","center"),d(t,"flex-direction","column"),d(t,"gap","40px"),d(t,"align-items","center"),d(t,"justify-content","center"),d(t,"width","100%"),d(t,"display","flex"),d(t,"flex-direction","column"),d(t,"align-items","center"),d(n,"width","100vw")},m(m,g){M(m,n,g),N(s,n,null),$(n,r),$(n,e),N(a,e,null),$(n,o),$(n,t),N(i,t,null),$(t,b),$(t,D),$(t,k),f&&f.m(t,null),$(t,u),c&&c.m(t,null),_=!0},p(m,[g]){const v={};g&2&&(v.clickHandler=m[3]),i.$set(v),m[1]?f?(f.p(m,g),g&2&&p(f,1)):(f=z(m),f.c(),p(f,1),f.m(t,u)):f&&(C(),h(f,1,1,()=>{f=null}),T()),m[0].length>0?c?(c.p(m,g),g&1&&p(c,1)):(c=q(m),c.c(),p(c,1),c.m(t,null)):c&&(C(),h(c,1,1,()=>{c=null}),T())},i(m){_||(p(s.$$.fragment,m),p(a.$$.fragment,m),p(i.$$.fragment,m),p(f),p(c),_=!0)},o(m){h(s.$$.fragment,m),h(a.$$.fragment,m),h(i.$$.fragment,m),h(f),h(c),_=!1},d(m){m&&y(n),O(s),O(a),O(i),f&&f.d(),c&&c.d()}}}async function V(l,n,s){const{default:r}=await X(async()=>{const{default:o}=await import("../chunks/Loading.Cz-JubWZ.js");return{default:o}},__vite__mapDeps([0,1,2]),import.meta.url);new r({target:document.getElementById("nots")});const e=await fetch("http://3.29.235.228:3000/api/"+l,{method:"POST",mode:"cors",credentials:"include",headers:{},body:n});if(!e.ok)throw new NotificationBubble({props:{duration:10,msg:"حدثت مشكلة اثناء الاتصال بالسيرفر الرجاء اعادة تحميل الصفحة"},target:document.getElementById("nots")}),document.getElementById("loadingWindow").remove(),new Error(`HTTP error! Status: ${e.status}`);let a="";try{return a=await e.json(),document.getElementById("loadingWindow").remove(),a}catch{}return document.getElementById("loadingWindow").remove(),a}function ae(l,n,s){let{data:r={blogs:[]}}=n,e=[],a=!1;K(()=>{document.body.style.overflowX="hidden",s(0,e=r.blogs),console.log(e)});const o=()=>{console.log("making new blog"),s(1,a=!0)},t=(u,_,f)=>{let c=new FormData;c.append("body",JSON.stringify({bd:f,title:_})),c.append("files",u),V("a/nb",c).then(()=>{ee("تم انشاء منشور جديد")}),s(1,a=!1)},i=()=>{s(1,a=!1)},b=(u,_)=>{let f=new FormData;f.append("body",JSON.stringify(Object({id:u.blogID,bd:u.blogDetails,title:u.title}))),console.log(_),f.append("files",_),V("a/ub",f).then(()=>{L("تم حذف المنشور","cornflowerblue"),s(0,e=e.filter(c=>c!=u))})},D=(u,_)=>{let f=new FormData;f.append("body",JSON.stringify(Object({bid:u.blogID}))),console.log(u),te("هل انت متأكد من حذف المنشور؟",async()=>{await V("a/db",f).then(()=>{L("تم حذف المنشور","cornflowerblue"),s(0,e=e.filter(c=>c!=u))})})},k=()=>{s(1,a=!1)};return l.$$set=u=>{"data"in u&&s(2,r=u.data)},[e,a,r,o,t,i,b,D,k]}class ge extends U{constructor(n){super(),Y(this,n,ae,oe,G,{data:2})}}export{ge as component};
