import{s as h,a as D,i as I,d as N,o as A,n as M}from"../chunks/scheduler.C7Xo_3aa.js";import{S as v,i as S,b as p,e as k,t as f,g as w,c as x,a as y,m as T,d as q}from"../chunks/index.NYh16Rov.js";import{A as j,a as C}from"../chunks/AdminQuestions.7KquyvKj.js";import{f as _,s as b}from"../chunks/not.CMcaOXzY.js";function P(i){let o,s;return o=new j({props:{data:i[2],saveQuestions:i[4],switchToMainExams:i[8]}}),{c(){x(o.$$.fragment)},l(t){y(o.$$.fragment,t)},m(t,n){T(o,t,n),s=!0},p(t,n){const e={};n&4&&(e.data=t[2]),n&2&&(e.switchToMainExams=t[8]),o.$set(e)},i(t){s||(f(o.$$.fragment,t),s=!0)},o(t){p(o.$$.fragment,t),s=!1},d(t){q(o,t)}}}function z(i){let o,s;return o=new C({props:{groups:i[3],save:i[6],data:i[2],switchToQuestions:i[7]}}),{c(){x(o.$$.fragment)},l(t){y(o.$$.fragment,t)},m(t,n){T(o,t,n),s=!0},p(t,n){const e={};n&8&&(e.groups=t[3]),n&1&&(e.save=t[6]),n&4&&(e.data=t[2]),n&3&&(e.switchToQuestions=t[7]),o.$set(e)},i(t){s||(f(o.$$.fragment,t),s=!0)},o(t){p(o.$$.fragment,t),s=!1},d(t){q(o,t)}}}function d(i){let o,s,t,n;const e=[z,P],a=[];function c(r,u){return r[1]==0?0:1}return o=c(i),s=a[o]=e[o](i),{c(){s.c(),t=D()},l(r){s.l(r),t=D()},m(r,u){a[o].m(r,u),I(r,t,u),n=!0},p(r,u){let g=o;o=c(r),o===g?a[o].p(r,u):(w(),p(a[g],1,1,()=>{a[g]=null}),k(),s=a[o],s?s.p(r,u):(s=a[o]=e[o](r),s.c()),f(s,1),s.m(t.parentNode,t))},i(r){n||(f(s),n=!0)},o(r){p(s),n=!1},d(r){r&&N(t),a[o].d(r)}}}function B(i){let o=i[1],s,t,n=d(i);return{c(){n.c(),s=D()},l(e){n.l(e),s=D()},m(e,a){n.m(e,a),I(e,s,a),t=!0},p(e,[a]){a&2&&h(o,o=e[1])?(w(),p(n,1,1,M),k(),n=d(e),n.c(),f(n,1),n.m(s.parentNode,s)):n.p(e,a)},i(e){t||(f(n),t=!0)},o(e){p(n),t=!1},d(e){e&&N(s),n.d(e)}}}function F(i,o,s){let t=0,{data:n}=o,e={questions:[],answers:[],title:"",startingDate:"",ending:"",v:!1,groupID:1,level:"",note:"",passing:"",examType:1},a,c=[];A(()=>{console.log(n),n.examID.includes("new")?(a=location.href.split("/")[7].split("-")[1],_("a/gcp",{course:!1,ID:Number(location.href.split("/")[5])}).then(l=>{s(3,c=l.g.map(m=>m.groupID))})):(a=location.href.split("/")[7].split("-")[2],_("a/gspx",{courseID:!1,fellowshipID:Number(location.href.split("/")[5]),examType:Number(n.examID.split("-")[0]),examID:Number(n.examID.split("-")[1])}).then(l=>{s(2,e=l.d[0]),s(2,e.passing*=100,e),s(2,e.examType=Number(n.examID.split("-")[0]),e),s(2,e.ot=Number(n.examID.split("-")[0]),e),console.log(e),s(3,c=l.g.map(m=>m.groupID)),s(2,e.note=l.d.note,e),e.examType!=0&&(s(2,e.ending=e.ending.split(".")[0],e),s(2,e.startingDate=e.startingDate.split(".")[0],e))}))});function r(){_("a/ufxm",{t:!n.course,title:e.title,q:e.questions,ans:e.answers,sd:e.startingDate,duration:e.ending,ID:Number(n.examID.split("-")[1]),visible:!0,type:Number(e.examType),groupID:Number(e.groupID),level:Number(a),passing:Number(e.passing)/100,note:e.note}).then(()=>{b("تم تحديث الامتحان","cornflowerblue").then(()=>{})}).catch(()=>{b("يوجد امتحان بنفس هذا العنوان","red")})}function u(){_("a/nfxm",{t:!n.course,title:e.title,q:e.questions,ans:e.answers,startingDate:e.startingDate,ending:e.ending,ID:location.href.split("/")[5],v:!0,type:Number(e.examType),groupID:Number(e.groupID),level:Number(a),passing:Number(e.passing)/100,note:e.note}).then(l=>{b("تم إضافة الامتحان","cornflowerblue").then(()=>{let m=location.href.split("/");m.pop(),m.push(`${e.examType}-${l.id}-${a}`),location.href=m.join("/")}),console.log(l)}).catch(()=>{b("يوجد امتحان بنفس هذا العنوان","red")})}const g=l=>{console.log(l),n.examID.includes("new")?u():r()},E=()=>{n.examID.includes("new")&&u(),s(1,t=1)},Q=()=>{s(1,t=0)};return i.$$set=l=>{"data"in l&&s(0,n=l.data)},[n,t,e,c,r,u,g,E,Q]}class L extends v{constructor(o){super(),S(this,o,F,B,h,{data:0})}}export{L as component};
