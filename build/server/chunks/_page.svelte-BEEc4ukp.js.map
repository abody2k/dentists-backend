{"version":3,"file":"_page.svelte-BEEc4ukp.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/admin/blogs/_page.svelte.js"],"sourcesContent":["import { c as create_ssr_component, v as validate_component, d as each } from \"../../../../chunks/ssr.js\";\nimport { B as Bar } from \"../../../../chunks/Bar.js\";\nimport { B as BlogCard } from \"../../../../chunks/BlogCard.js\";\nimport { P as Path } from \"../../../../chunks/Path.js\";\nimport { n as notification, s as showNotification, a as showConfirmation } from \"../../../../chunks/not.js\";\nimport { B as Button } from \"../../../../chunks/Button.js\";\nasync function fetchData(url, body, res) {\n  const { default: Loading } = await import(\"../../../../chunks/Loading.js\");\n  new Loading({ target: document.getElementById(\"nots\") });\n  const response = await fetch(\"http://3.29.235.228:3000/api/\" + url, {\n    method: \"POST\",\n    mode: \"cors\",\n    credentials: \"include\",\n    headers: {},\n    // 'Content-Type': 'application/form-data',\n    //  \"Access-Control-Allow-Credentials\":true\n    // Add any additional headers as needed\n    // Replace with your actual JSON payload\n    body\n  });\n  if (!response.ok) {\n    new NotificationBubble({\n      props: {\n        duration: 10,\n        msg: \"حدثت مشكلة اثناء الاتصال بالسيرفر الرجاء اعادة تحميل الصفحة\"\n      },\n      target: document.getElementById(\"nots\")\n    });\n    document.getElementById(\"loadingWindow\").remove();\n    throw new Error(`HTTP error! Status: ${response.status}`);\n  }\n  let e = \"\";\n  try {\n    e = await response.json();\n    document.getElementById(\"loadingWindow\").remove();\n    return e;\n  } catch (error) {\n  }\n  if (res)\n    res();\n  document.getElementById(\"loadingWindow\").remove();\n  return e;\n}\nconst Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {\n  let { data = { blogs: [] } } = $$props;\n  let blogs = [];\n  let makeNew = false;\n  if ($$props.data === void 0 && $$bindings.data && data !== void 0)\n    $$bindings.data(data);\n  return `<div style=\"width: 100vw;\">${validate_component(Bar, \"Bar\").$$render($$result, { title: \"Blogs\" }, {}, {})} <div style=\"width: 100%; display: inline-table;margin:auto; margin-top: 141px;\">${validate_component(Path, \"Path\").$$render(\n    $$result,\n    {\n      links: [{ link: \"/\", txt: \"Home\" }, { link: \"/blogs\", txt: \"Blogs\" }]\n    },\n    {},\n    {}\n  )}</div> <div style=\"display: flex;justify-content:center;flex-direction:column;gap:40px;align-items:center;justify-content:center; width: 100%; display: flex; flex-direction: column; align-items: center; \">${validate_component(Button, \"Button\").$$render(\n    $$result,\n    {\n      text: \"منشور جديد\",\n      clickHandler: () => {\n        console.log(\"making new blog\");\n        makeNew = true;\n      }\n    },\n    {},\n    {}\n  )} <div style=\"margin-top:120px\"></div> ${makeNew ? `${validate_component(BlogCard, \"BlogCard\").$$render(\n    $$result,\n    {\n      makeNew: true,\n      uploadHandler: (img, title, detail) => {\n        let n = new FormData();\n        n.append(\"body\", JSON.stringify({ bd: detail, title }));\n        n.append(\"files\", img);\n        fetchData(\"a/nb\", n).then(() => {\n          notification(\"تم انشاء منشور جديد\");\n        });\n        makeNew = false;\n      },\n      cancelHandler: () => {\n        makeNew = false;\n      }\n    },\n    {},\n    {}\n  )}` : ``} ${blogs.length > 0 ? `${each(blogs, (blog) => {\n    return `${validate_component(BlogCard, \"BlogCard\").$$render(\n      $$result,\n      {\n        title: blog.title,\n        ID: blog.ID,\n        date: new Date(blog.date),\n        saveHandler: (e) => {\n          let n = new FormData();\n          n.append(\"body\", JSON.stringify(Object({\n            \"id\": blog.blogID,\n            \"bd\": blog.blogDetails,\n            \"title\": blog.title\n          })));\n          console.log(e);\n          n.append(\"files\", e);\n          fetchData(\"a/ub\", n).then(() => {\n            showNotification(\"تم حذف المنشور\", \"cornflowerblue\");\n            blogs = blogs.filter((s) => s != blog);\n          });\n        },\n        deleteHandler: (e) => {\n          let n = new FormData();\n          n.append(\"body\", JSON.stringify(Object({ \"bid\": blog.blogID })));\n          console.log(blog);\n          showConfirmation(\"هل انت متأكد من حذف المنشور؟\", async () => {\n            await fetchData(\"a/db\", n).then(() => {\n              showNotification(\"تم حذف المنشور\", \"cornflowerblue\");\n              blogs = blogs.filter((s) => s != blog);\n            });\n          });\n        },\n        details: blog.blogDetails,\n        url: \"https://echo-dentists.s3.me-central-1.amazonaws.com/blogs/\" + blog.blogID,\n        cancelHandler: () => {\n          makeNew = false;\n        }\n      },\n      {},\n      {}\n    )}`;\n  })}` : ``}</div></div>`;\n});\nexport {\n  Page as default\n};\n"],"names":[],"mappings":"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"}